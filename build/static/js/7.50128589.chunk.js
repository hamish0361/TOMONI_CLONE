(this["webpackJsonptomoni-app"]=this["webpackJsonptomoni-app"]||[]).push([[7],{1272:function(e,t,a){"use strict";var n=a(0),c=a.n(n),l=a(388),i=a(1178),o=a(95);t.a=function(e){var t=e.show,a=void 0!==t&&t,n=e.onHide,r=void 0===n?null:n,s=e.onDelete,u=void 0===s?null:s,d=e.title,m=void 0===d?"Confirm Delete":d,b=e.content,v=void 0===b?"Are you sure?":b,f=e.isLoading,h=void 0!==f&&f;return c.a.createElement(l.a,{show:a,onHide:r,"aria-labelledby":"example-modal-sizes-title-lg"},h&&c.a.createElement(o.a,null),c.a.createElement(l.a.Header,{closeButton:!0},c.a.createElement(l.a.Title,{id:"example-modal-sizes-title-lg"},m)),c.a.createElement(l.a.Body,null,c.a.createElement("span",null,v)),c.a.createElement(l.a.Footer,null,c.a.createElement("div",null,c.a.createElement("button",{type:"button",onClick:r,className:"btn btn-light btn-elevate"},c.a.createElement(i.a,{id:"GLOBAL.BUTTON.CANCEL"})),c.a.createElement(c.a.Fragment,null," "),c.a.createElement("button",{type:"button",onClick:u,className:"btn btn-primary btn-elevate"},c.a.createElement(i.a,{id:"GLOBAL.BUTTON.DELETE"})))))}},1331:function(e,t,a){},1371:function(e,t,a){},1372:function(e,t,a){},1373:function(e,t,a){},1374:function(e,t,a){},1375:function(e,t,a){},1376:function(e,t,a){},1377:function(e,t,a){},1378:function(e,t,a){},1381:function(e,t,a){},1382:function(e,t,a){},1383:function(e,t,a){},1384:function(e,t,a){},1385:function(e,t,a){},1386:function(e,t,a){},1387:function(e,t,a){},1388:function(e,t,a){},1389:function(e,t,a){},1390:function(e,t,a){},1391:function(e,t,a){},1394:function(e,t,a){},1395:function(e,t,a){},1396:function(e,t,a){},1397:function(e,t,a){},1398:function(e,t,a){},1399:function(e,t,a){},1400:function(e,t,a){},1401:function(e,t,a){},1402:function(e,t,a){},1403:function(e,t,a){},1404:function(e,t,a){},1405:function(e,t,a){},1406:function(e,t,a){},1407:function(e,t,a){},1408:function(e,t,a){},1409:function(e,t,a){},1410:function(e,t,a){},1411:function(e,t,a){},1412:function(e,t,a){},1413:function(e,t,a){},1414:function(e,t,a){},1415:function(e,t,a){},1416:function(e,t,a){},1417:function(e,t,a){},1418:function(e,t,a){},1419:function(e,t,a){},1420:function(e,t,a){},1421:function(e,t,a){},1422:function(e,t,a){},1423:function(e,t,a){},1424:function(e,t,a){},1425:function(e,t,a){},1426:function(e,t,a){},1427:function(e,t,a){},1428:function(e,t,a){},1429:function(e,t,a){},1430:function(e,t,a){},1431:function(e,t,a){},1432:function(e,t,a){},1433:function(e,t,a){},1434:function(e,t,a){},1435:function(e,t,a){},1436:function(e,t,a){},1437:function(e,t,a){},1438:function(e,t,a){},1439:function(e,t,a){},1440:function(e,t,a){},1441:function(e,t,a){},1442:function(e,t,a){},1443:function(e,t,a){},1444:function(e,t,a){},1445:function(e,t,a){},1446:function(e,t,a){},1447:function(e,t,a){},1448:function(e,t,a){},1449:function(e,t,a){},1485:function(e,t,a){},1486:function(e,t,a){},1487:function(e,t,a){},1488:function(e,t,a){},1489:function(e,t,a){},1490:function(e,t,a){},1491:function(e,t,a){},1492:function(e,t,a){},1493:function(e,t,a){},1494:function(e,t,a){},1495:function(e,t,a){},1496:function(e,t,a){},1497:function(e,t,a){},1498:function(e,t,a){},1499:function(e,t,a){},1500:function(e,t,a){},1501:function(e,t,a){},1502:function(e,t,a){},1503:function(e,t,a){},1504:function(e,t,a){},1505:function(e,t,a){},1506:function(e,t,a){},1507:function(e,t,a){},1508:function(e,t,a){},1509:function(e,t,a){},1510:function(e,t,a){},1511:function(e,t,a){},1512:function(e,t,a){},1513:function(e,t,a){},1514:function(e,t,a){},1515:function(e,t,a){},1516:function(e,t,a){},1517:function(e,t,a){},1518:function(e,t,a){},1519:function(e,t,a){},1520:function(e,t,a){},1521:function(e,t,a){},1522:function(e,t,a){},1523:function(e,t,a){},1524:function(e,t,a){},1525:function(e,t,a){},1526:function(e,t,a){},1527:function(e,t,a){},1528:function(e,t,a){},1529:function(e,t,a){},1530:function(e,t,a){},1531:function(e,t,a){},1532:function(e,t,a){},1533:function(e,t,a){},1609:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return _o}));var n=a(28),c=a(112),l=a(0),i=a.n(l),o=a(17),r=a(120),s=a(65),u=a(431),d=a(414),m=a(12),b=a(119),v=a(1238),f=a(34);var h=function(e){var t=e.title,a=void 0===t?"":t,n=e.toolbar;return i.a.createElement(f.c,null,i.a.createElement(v.a,null),i.a.createElement(f.e,{title:a},i.a.createElement(f.f,null,n)))},p=(a(1371),function(e){var t=e.title,a=e.toolbar,n=e.children;return i.a.createElement("div",{className:"warehouse-layout"},i.a.createElement(h,{title:t,toolbar:a}),i.a.createElement("div",{className:"px-5 pb-5"},n))}),E=a(8),g=a(399),j=a(29),O=a.n(j),w=a(63),_=a.n(w),y=function(e,t){var a,n=e.onSearch,c=e.searchAll,r=void 0===c||c,s=Object(l.useState)(""),u=Object(m.a)(s,2),d=u[0],v=u[1],f=Object(b.a)(),h=Object(m.a)(f,1)[0],p=Object(l.useMemo)((function(){return[{id:"id",title:h("warehouse.sfa.id")},{id:"tracking",title:h("warehouse.tracking.id")},{id:"agency_id",title:h("common.agency")}]}),[h]),E=Object(l.useState)(r?"":null===p||void 0===p||null===(a=p[0])||void 0===a?void 0:a.id),g=Object(m.a)(E,2),j=g[0],w=g[1],_=Object(o.e)((function(e){return e.warehouse.agency.list})),y=Object(l.useCallback)(O.a.debounce((function(e,t){t.length&&e.length?n&&n({search:"".concat(t,":").concat(e),searchFields:"".concat(t,":like")}):n&&n({search:e})}),700),[]);Object(l.useImperativeHandle)(t,(function(){return{reset:function(){var e;v(""),w(r?"":null===p||void 0===p||null===(e=p[0])||void 0===e?void 0:e.id)}}}));var N=function(e){v(e.target.value),y(e.target.value,j)},x=Object(l.useMemo)((function(){return"agency_id"===j?i.a.createElement("select",{onChange:N,className:"form-control"},i.a.createElement("option",{value:""},h("common.all")),_.map((function(e,t){return i.a.createElement("option",{value:e.id,key:"agency-idx-".concat(t)},e.name)}))):i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search",onChange:N,value:d})}),[j,d,_]);return i.a.createElement("div",{className:"d-flex custom-filter-warehouse"},i.a.createElement("div",{className:"p-3"},i.a.createElement("select",{name:"searchField",id:"searchField",className:"form-control",onChange:function(e){w(e.target.value),d.length&&(v(""),y("",e.target.value))},value:j},r?i.a.createElement("option",{value:""},h("common.all")):"",(p||[]).map((function(e,t){return i.a.createElement("option",{value:e.id,key:"search-field-".concat(t)},e.title)})))),i.a.createElement("div",{className:"p-3 flex-grow-1"},x))},N=Object(l.forwardRef)(y),x=a(95),k=a(13),C=a(25),S=a(39),q=a.n(S),R=function(e){var t,a=e.sfa;return i.a.createElement("div",{className:"sfa-list-box"},!!(null===a||void 0===a||null===(t=a.boxes)||void 0===t?void 0:t.length)&&a.boxes.map((function(e){return i.a.createElement("div",{className:"sfa-box-item",key:"box-".concat(e.id)},i.a.createElement("div",{className:"sfa-box-item--id"},e.id),i.a.createElement("div",{className:"sfa-box-item--duplicate success"},e.duplicate))})))},F=function(e){var t,a=e.sfa;return i.a.createElement("div",{className:"sfa-list-box"},!!(null===a||void 0===a||null===(t=a.boxes)||void 0===t?void 0:t.length)&&a.boxes.map((function(e){return i.a.createElement("div",{className:"sfa-box-item",key:"box-".concat(e.id)},i.a.createElement("div",{className:"sfa-box-item--id"},e.id),e.quantity_available_in_pallet?i.a.createElement("div",{className:"sfa-box-item--duplicate"},e.quantity_available_in_pallet):i.a.createElement("span",{className:"svg-icon svg-icon-success"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Navigation/Double-check.svg")})))})))},D=a(1253),B=a(1223),P=function(e){var t,a=e.box,n=Object(b.a)(),c=Object(m.a)(n,1)[0];return(null===a||void 0===a||null===(t=a.owners)||void 0===t?void 0:t.length)?i.a.createElement(D.a,{key:"order",placement:"top",overlay:i.a.createElement(B.a,{className:"owner-tooltip"},i.a.createElement("div",{className:"owner-list"},a.owners.map((function(e,t){return i.a.createElement("div",{className:"owner-item",key:"owner-".concat(t)},i.a.createElement("div",{className:"owner-obj"},"order"===e.objectable_type&&c("ORDER.SHIPMENT.TABLE_ID"),"\xa0",e.objectable_id),i.a.createElement("div",{className:"owner-quantity"},e.quantity))}))))},i.a.createElement("div",{className:"sfa-box-item--id cursor-pointer"},a.id)):i.a.createElement("div",{className:"sfa-box-item--id"},a.id)},T=function(e){var t,a=e.sfa;return i.a.createElement("div",{className:"sfa-list-box"},!!(null===a||void 0===a||null===(t=a.boxes)||void 0===t?void 0:t.length)&&a.boxes.map((function(e){return i.a.createElement("div",{className:"sfa-box-item",key:"box-".concat(e.id)},i.a.createElement(P,{box:e}),e.duplicate-Number(e.quantity_of_owners)?i.a.createElement("div",{className:"sfa-box-item--duplicate"},e.duplicate-e.quantity_of_owners):i.a.createElement("span",{className:"svg-icon svg-icon-success"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Navigation/Double-check.svg")})))})))},M=(a(1372),function(e){var t,a=e.sfa,n=e.type,c=e.onRedirect,o=Object(b.a)(),r=Object(m.a)(o,1)[0],s=Object(l.useMemo)((function(){var e;return(null===a||void 0===a||null===(e=a.boxes)||void 0===e?void 0:e.length)?a.boxes.reduce((function(e,t){return e+t.duplicate}),0):0}),[a]),u=Object(l.useMemo)((function(){var e;return(null===a||void 0===a||null===(e=a.boxes)||void 0===e?void 0:e.length)?s-a.boxes.reduce((function(e,t){return e+t.quantity_available_in_pallet}),0):0}),[a,s]),d=Object(l.useMemo)((function(){var e;return(null===a||void 0===a||null===(e=a.boxes)||void 0===e?void 0:e.length)?a.boxes.reduce((function(e,t){return e+Number(t.quantity_of_owners)}),0):0}),[a]),v=Object(l.useMemo)((function(){return"box"===n?i.a.createElement("div",{className:"sfa-info--quantity-status"},i.a.createElement("span",{className:Object(k.a)(s<(null===a||void 0===a?void 0:a.quantity)?"text-danger":"text-success")},s)," / ",i.a.createElement("span",{className:"text-success"},null===a||void 0===a?void 0:a.quantity)):"storage"===n?i.a.createElement("div",{className:"sfa-info--quantity-status"},i.a.createElement("span",{className:Object(k.a)(u<s?"text-danger":"text-success")},u)," / ",i.a.createElement("span",{className:"text-success"},s)):"order"===n?i.a.createElement("div",{className:"sfa-info--quantity-status"},i.a.createElement("span",{className:Object(k.a)(d<s?"text-danger":"text-success")},d)," / ",i.a.createElement("span",{className:"text-success"},s)):i.a.createElement(i.a.Fragment,null)}),[n,null===a||void 0===a?void 0:a.quantity,s,u,d]),h=Object(l.useMemo)((function(){return"box"===n?i.a.createElement(R,{sfa:a}):"storage"===n?i.a.createElement(F,{sfa:a}):"order"===n?i.a.createElement(T,{sfa:a}):i.a.createElement(i.a.Fragment,null)}),[n,a]);return i.a.createElement(f.c,{className:"sfa-item"},i.a.createElement(f.d,null,i.a.createElement("div",{className:"sfa-info"},i.a.createElement("div",{className:"sfa-head",onClick:function(){c&&c(a.id)}},i.a.createElement("div",{className:"sfa-info--id"},null===a||void 0===a?void 0:a.id,i.a.createElement("span",{className:"svg-icon svg-icon-primary svg-icon-2x redirect-icon"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Navigation/Arrow-right.svg")})))),i.a.createElement("div",{className:"sfa-info--arrival_date"},r("warehouse.sfa.arrival_date.title"),": ",i.a.createElement("b",null,null===a||void 0===a?void 0:a.arrival_date)),i.a.createElement("div",{className:"sfa-info--tracking"},r("warehouse.tracking.title"),": ",i.a.createElement("b",null,null===a||void 0===a?void 0:a.tracking)),i.a.createElement("div",{className:"d-flex justify-content-between"},i.a.createElement("div",{className:"sfa-info--agency"},i.a.createElement("b",null,null===a||void 0===a||null===(t=a.agency)||void 0===t?void 0:t.name)),v)),h))}),I=a(1249),V=(a(1373),a(254)),L=function(e){var t=e.onViewEdit,a=e.type,n=Object(o.e)((function(e){return e.warehouse.sfa.list})),c=n.pagination,s=n.loading,u=n.data,d=Object(r.h)(),v=Object(o.d)(),h=Object(l.useRef)(),p=Object(b.a)(),j=Object(m.a)(p,1)[0],w=function(e){var t="agency";"box"===a&&(t+=";boxes"),"storage"===a&&(t+=";boxes"),"order"===a&&(t+=";boxes.owners"),v(Object(g.c)(Object(E.a)({page:c.page,with:t},e)))};Object(l.useEffect)((function(){w()}),[c.page]);var y=Object(l.useMemo)((function(){return"box"===a?O.a.sortBy(u,[function(e){return(null===e||void 0===e?void 0:e.boxes)?e.boxes.reduce((function(e,t){return e+t.duplicate}),0)>=e.quantity:0}],(function(e){return _()(e.created_at).toDate()})):"storage"===a?O.a.sortBy(u,[function(e){return(null===e||void 0===e?void 0:e.boxes)?0===e.boxes.reduce((function(e,t){return e+t.quantity_available_in_pallet}),0):0}],(function(e){return _()(e.created_at).toDate()})):"order"===a?O.a.sortBy(u,[function(e){if(!(null===e||void 0===e?void 0:e.boxes))return 0;var t=e.boxes.reduce((function(e,t){return e+t.duplicate}),0);return e.boxes.reduce((function(e,t){return e+t.quantity_of_owners}),0)>=t}],(function(e){return _()(e.created_at).toDate()})):u}),[u,a]);return i.a.createElement("div",{className:"list-sfa-for-inbound"},i.a.createElement(f.c,{className:"head-card"},i.a.createElement(f.d,{className:"position-relative"},s&&i.a.createElement(x.a,{local:!0}),i.a.createElement("div",{className:"action-section"},i.a.createElement(N,{ref:h,onSearch:function(e){w(e)}}),i.a.createElement(V.a,{need:["sfas.create"]},i.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){d.push("/warehouse/inbound/step-1")}},j("warehouse.sfa.create.title")))),i.a.createElement(I.a,{count:c.lastPage,page:c.page,shape:"rounded",onChange:function(e,t){v(g.d.changePagination({page:t}))}}))),i.a.createElement("div",{className:"row"},y.map((function(e){return i.a.createElement("div",{className:"col-lg-6 col-sm-12",key:"sfa-".concat(e.id)},i.a.createElement(M,{sfa:e,type:a,onRedirect:t}))}))))},A=function(e){var t=Object(r.h)();return i.a.createElement(L,{onViewEdit:function(e){t.push("/warehouse/inbound/step-2/".concat(e))},type:"box"})},Y=function(e){var t=Object(b.a)(),a=Object(m.a)(t,1)[0];return i.a.createElement(p,{title:a("MENU.WAREHOUSE.CHECKING_GOODS")},i.a.createElement(A,null))},H=function(e){var t=Object(r.h)(),a=Object(b.a)(),n=Object(m.a)(a,1)[0];return i.a.createElement(p,{title:n("MENU.WAREHOUSE.ASSIGN_BOXES")},i.a.createElement(L,{onViewEdit:function(e){t.push("/warehouse/classify-box/".concat(e))},type:"order"}))},U=function(e){var t=e.focusModalCreateBox,a=Object(b.a)(),n=Object(m.a)(a,1)[0];return i.a.createElement(f.c,{className:"step-2__empty-content"},i.a.createElement(f.d,null,i.a.createElement("div",{className:"empty-text"},n("warehouse.sku.empty")),i.a.createElement("div",{className:"empty-actions"},i.a.createElement(V.a,{need:"boxes.create"},i.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:t},n("warehouse.sku.create.title"))))))},K=a(3),z=a.n(K),Q=a(9),G=a(19);function J(e,t){if(t){var a=O.a.get(e,["response","errors"])||O.a.get(e,["response","data","errors"]),n={};a&&Object.entries(a).forEach((function(e){var t=Object(m.a)(e,2),a=t[0],c=t[1];"message"===a&&(a="api"),n[a]=c[0]})),t.setErrors(Object(E.a)(Object(E.a)({},n),{},{api:O.a.get(e,["response","data","message"])||O.a.get(e,["response","data","errors","message"])}))}else console.error(e)}var W=a(73),X=a(68),$=(a(1374),function(e){var t=Object(W.g)(),a=t.errors,n=t.status;return i.a.createElement("div",null,a&&O.a.has(a,["api"])&&i.a.createElement("div",{className:"form-api-error py-3"},O.a.get(a,["api"])),n&&O.a.has(n,["api"])&&i.a.createElement("div",{className:"form-api-success py-3"},O.a.get(n,["api"])))}),Z=a(23),ee=["INPUT","SELECT"];var te=function(e){e.enterIndex;var t=e.children,a=Object(Z.a)(e,["enterIndex","children"]),n=Object(l.useRef)();return function(e){var t=Object(W.g)().submitForm;Object(l.useEffect)((function(){(null===e||void 0===e?void 0:e.current)&&e.current.addEventListener("keydown",(function(e){if((13===e.keyCode||9===e.keyCode)&&ee.includes(e.target.nodeName)){var a=e.target.form,n=Array.from(a.elements).filter((function(e){return"BUTTON"!==e.nodeName&&!e.disabled})),c=Array.prototype.indexOf.call(n,e.target);c===n.length-1&&t();for(var l=1;l<(null===n||void 0===n?void 0:n.length);l++){var i;if(n[c+l]&&!(null===(i=n[c+l])||void 0===i?void 0:i.disabled)){n[c+l].focus();break}}e.preventDefault()}}))}),[])}(n),i.a.createElement(W.c,Object.assign({ref:n},a),t)},ae=a(428);function ne(e){var t=e.onReceivedMessage,a=Object(o.e)((function(e){return e.warehouse.settings.printer.socketServer})),n=Object(l.useRef)(),c=Object(l.useCallback)((function(e){var t=new WebSocket((e||a)+"?encoding=text",ae.a);n.current=t,n.current.onerror=function(e){n.current=null}}),[a]),i=Object(l.useCallback)((function(e){1===n.current.readyState?n.current.send(e):n.current.onopen=function(){n.current.send(e)}}),[a]),r=Object(l.useCallback)((function(){n.current.onmessage=function(e){if(function(e){try{JSON.parse(e)}catch(t){return!1}return!0}(null===e||void 0===e?void 0:e.data)){var a=JSON.parse(e.data)||{};t(a)}}}),[]);return[Object(l.useCallback)((function(e){n.current||c(a),i(e),r()}),[c,i,r,a])]}a(1375);var ce={type:"ReadDWS"},le=function(e,t){var a=e.formItemClass,n=void 0===a?"col-lg-6 col-md-6 mt-3":a,c=e.isHaveDuplicate,o=void 0===c||c,r=e.onSubmit,s=e.initialValues,u=Object(b.a)(),d=Object(m.a)(u,1)[0],v=ne({onReceivedMessage:function(e){return p(e)}}),h=Object(m.a)(v,1)[0];Object(l.useEffect)((function(){h(JSON.stringify(ce))}),[]);var p=function(e){console.log(e,"handleSocketData")},E=X.d().shape({width:X.c().min(0,d("validation.message.min",{min:0})),height:X.c().min(0,d("validation.message.min",{min:0})),weight_per_box:X.c().min(0,d("validation.message.min",{min:0})),length:X.c().min(0,d("validation.message.min",{min:0})),duplicate:X.c().min(0,d("validation.message.min",{min:0}))});return i.a.createElement(W.d,{initialValues:s,validationSchema:E,onSubmit:r,innerRef:t},i.a.createElement(te,{className:"form form-label-right form-update-box-info"},i.a.createElement("div",{className:"form-group row"},i.a.createElement("div",{className:n},i.a.createElement(W.b,{name:"weight_per_box",component:f.i,label:d("common.weight"),placeholder:d("common.weight"),autoFocus:!0,type:"number",min:0})),i.a.createElement("div",{className:n},i.a.createElement(W.b,{name:"width",component:f.i,label:d("common.width"),placeholder:d("common.width"),type:"number",min:0})),i.a.createElement("div",{className:n},i.a.createElement(W.b,{name:"height",component:f.i,label:d("common.height"),placeholder:d("common.height"),type:"number",min:0})),i.a.createElement("div",{className:n},i.a.createElement(W.b,{name:"length",component:f.i,label:d("common.length"),placeholder:d("common.length"),type:"number",min:0})),o&&i.a.createElement("div",{className:n},i.a.createElement(W.b,{name:"duplicate",component:f.i,label:d("warehouse.sku.duplicate"),placeholder:d("warehouse.sku.duplicate"),type:"number",min:0}))),i.a.createElement($,null)))},ie=i.a.forwardRef(le),oe=a(186),re=a(388),se=a(255),ue=function(e,t){var a=e.type,n=void 0===a?"secondary":a,c=e.loading,o=void 0!==c&&c,r=e.htmlType,s=void 0===r?"button":r,u=e.disabled,d=void 0!==u&&u,m=e.className,b=void 0===m?"":m,v=e.children,f=e.need,h=e.permissionJoin,p=void 0===h?"or":h,E=Object(Z.a)(e,["type","loading","htmlType","disabled","className","children","need","permissionJoin"]),g=Object(se.a)(f,p),j=Object(l.useMemo)((function(){return o?"light-success"===n?"spinner spinner-darker-success spinner-left":"secondary"===n?"spinner spinner-dark spinner-left":"outline-danger"===n?"spinner spinner-darker-danger spinner-left":"spinner spinner-white spinner-left":""}),[n,o]);return i.a.createElement("button",Object.assign({ref:t,type:s,className:Object(k.a)("btn btn-".concat(n),b,j),disabled:d||o||!g},E),v)},de=i.a.forwardRef(ue),me=(a(1376),{width:1,height:1,weight_per_box:1,length:1,duplicate:1}),be=function(e){var t=e.show,a=e.onSuccess,c=e.initialValues,o=e.onHide,s=e.isHaveDuplicate,u=void 0===s||s,d=Object(l.useState)(!1),v=Object(m.a)(d,2),f=v[0],h=v[1],p=Object(r.h)(),g=Object(r.j)(),j=Object(b.a)(),w=Object(m.a)(j,1)[0],_=Object(l.useRef)(),y=function(){o?o():p.goBack()},N=function(){var e=Object(Q.a)(z.a.mark((function e(t,a){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(!0),!c){e.next=6;break}return e.next=4,k(t,a);case 4:e.next=8;break;case 6:return e.next=8,x(Object(E.a)({sfa_id:null===g||void 0===g?void 0:g.sfa_id},t),a);case 8:h(!1);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),x=function(e,t){var c=e;return u||(c=O.a.omit(e,["duplicate"])),G.a.box.create(c).then((function(e){n.b.success(w("warehouse.sku.create.success")),y(),setTimeout((function(){a&&a(e)}),500)})).catch((function(e){n.b.error(w("warehouse.sku.create.failure")),J(e,t)}))},k=function(e,t){var l=(null===c||void 0===c?void 0:c.id)||(null===g||void 0===g?void 0:g.box_id),i=O.a.pick(e,["width","height","weight_per_box","length","duplicate"]);return u||(i=O.a.pick(e,["width","height","weight_per_box","length"])),G.a.box.update(l,i).then((function(e){n.b.success(w("warehouse.sku.update.success")),y(),setTimeout((function(){a&&a(e)}),500)})).catch((function(e){n.b.error(w("warehouse.sku.update.failure")),J(e,t)}))};return i.a.createElement(oe.a,{show:t,onHide:y,actionsLoading:f,title:w(c?"warehouse.sku.update.title":"warehouse.sku.create.title")},i.a.createElement("div",{className:"modal-create-new-box"},i.a.createElement(re.a.Body,null,i.a.createElement(ie,{isHaveDuplicate:u,formItemClass:"col-lg-6 col-md-12 col-sm-12",initialValues:c||me,onSubmit:N,ref:_})),i.a.createElement(re.a.Footer,null,i.a.createElement(de,{type:"secondary",onClick:y,className:"btn-large"},w("common.cancel")),i.a.createElement(de,{htmlType:"submit",type:"primary",onClick:function(){_.current.submitForm()},className:"btn-large",need:["boxes.create","boxes.update"]},w("common.save")))))},ve=a(396),fe=a(48),he=a(74),pe=(a(1377),function(e){var t,a=e.box,n=e.active,c=e.onClick,o=e.showQuantity,r=void 0===o?function(){return!1}:o,s=e.showRelative,u=void 0!==s&&s,d=e.showTotalItems,m=void 0!==d&&d,b=Object(l.useMemo)((function(){var e,t,n=0;return(null===a||void 0===a||null===(e=a.items)||void 0===e?void 0:e.length)&&(n+=a.items.reduce((function(e,t){return e+(t.quantity||0)}),0)),(null===a||void 0===a||null===(t=a.childs)||void 0===t?void 0:t.length)?n+=a.childs.reduce((function(e,t){return e+t.items.reduce((function(e,t){return e+(t.quantity||0)}),0)*t.duplicate}),0):n}),[a]);return i.a.createElement("div",{className:Object(k.a)("box-item",n&&"active"),onClick:function(){n||c&&c(a)}},i.a.createElement("div",{className:"box-icon position-relative"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Shopping/Box3.svg")}),!!r(a)&&i.a.createElement("div",{className:"label-quantity"},r(a))),i.a.createElement("div",{className:"box-info"},i.a.createElement("div",{className:"sku"},"SKU: ",a.id),i.a.createElement("div",{className:"size"},"Size: ",a.width," \xd7 ",a.height," \xd7 ",a.length),m&&i.a.createElement("div",{className:"size"},"Items: ",Object(he.a)(b)),u&&!!(null===a||void 0===a||null===(t=a.childs)||void 0===t?void 0:t.length)&&i.a.createElement("div",{className:"box-childs"},i.a.createElement("div",{className:"box-childs-title"},"Childs:"),i.a.createElement("div",{className:"box-childs-wrapper"},a.childs.map((function(e,t){return i.a.createElement("div",{className:"box-child",key:"box-child-".concat(t)},i.a.createElement("div",{className:"box-child--id"},e.id),i.a.createElement("div",{className:"box-child--duplicate"},Object(he.a)(e.duplicate)))}))))))}),Ee=(a(1378),function(e){var t=e.onSelectBox,a=e.showQuantity,n=void 0===a?function(){return!1}:a,c=e.showRelative,s=void 0!==c&&c,u=e.showTotalItems,d=void 0!==u&&u,v=Object(l.useState)(""),h=Object(m.a)(v,2),p=h[0],E=h[1],g=Object(o.e)((function(e){return e.warehouse.sfa.detail.data})),j=Object(l.useRef)(),w=Object(l.useRef)(),_=Object(r.j)(),y=Object(l.useRef)(),N=Object(b.a)(),x=Object(m.a)(N,1)[0];Object(l.useEffect)((function(){return document.addEventListener("scroll",k),function(){document.removeEventListener("scroll",k)}}),[]);var k=function(e){var t=j.current.getBoundingClientRect(),a=t.top,n=t.height;if(w.current.getBoundingClientRect().height>n)return w.current.style.top="0px",void(w.current.style.bottom="0px");w.current.style.top=a<=65?"".concat(65-a,"px"):0},C=Object(l.useMemo)((function(){var e;if(!(null===g||void 0===g||null===(e=g.boxes)||void 0===e?void 0:e.length))return[];var t=Object(fe.a)(null===g||void 0===g?void 0:g.boxes);return s&&(t=t.filter((function(e){return!e.box_parent_id}))),p?t.sort((function(e,t){return e.id.includes(p)?-1:t.id.includes(p)?1:0})):t}),[null===g||void 0===g?void 0:g.boxes,p]),S=function(e){t&&t(e)},q=Object(l.useCallback)(O.a.debounce((function(e){E(e)}),750),[]);return i.a.createElement(f.c,{className:"list-box-wrapper position-relative",ref:j},i.a.createElement("div",{className:"position-absolute list-box",ref:w},i.a.createElement("div",{className:"title"},x("warehouse.sku.list.title")),i.a.createElement("div",{className:"search-box"},i.a.createElement("input",{className:"form-control",placeholder:"Search here",onChange:function(e){y.current.scrollTo({top:0,left:0,behavior:"smooth"}),q(e.target.value)},onKeyPress:function(e){13===e.charCode&&p.length&&C.length&&t&&t(C[0])}})),i.a.createElement("div",{className:"list-box-items",ref:y},C.map((function(e,t){return i.a.createElement("div",{className:"position-relative",key:"box-".concat(t)},i.a.createElement(pe,{showTotalItems:d,showRelative:s,showQuantity:n,onClick:S,box:e,active:e.id===(null===_||void 0===_?void 0:_.box_id),key:"box-item-".concat(t)}))})))))}),ge=a(1232),je=a(1589),Oe=a(1233),we=a(1234),_e=a(1235),ye=a(1236),Ne=a(1237),xe=a(1604),ke=a(1379),Ce=a.n(ke),Se=a(1272),qe=function(e){var t=e.id,a=e.show,n=e.onConfirmed,c=e.title,l=Object(r.h)();return i.a.createElement(Se.a,{show:a,onHide:function(){return l.goBack()},onDelete:function(){n&&n(t),l.goBack()},title:c})},Re=a(389),Fe=(a(1381),Object(ge.a)((function(e){return{root:{},pagination:{display:"flex",marginTop:e.spacing(2),marginBottom:e.spacing(2),justifyContent:"flex-end"}}}))),De=function(e){var t=e.onRefresh,a=e.data,c=void 0===a?[]:a,o=e.pagination,s=void 0===o?{}:o,u=e.onPageChange,d=Fe(),v=Object(r.h)(),f=Object(r.k)(),h=Object(l.useRef)([]),p=Object(b.a)(),E=Object(m.a)(p,1)[0];Object(l.useEffect)((function(){(null===c||void 0===c?void 0:c.length)&&c.forEach((function(e){h.current[e.id].value=e.quantity}))}),[c]);var g=function(e){G.a.boxOwner.delete(e).then((function(){n.b.success(E("warehouse.sku.owner.delete.success")),t&&t()})).catch((function(){n.b.error(E("warehouse.sku.owner.delete.failure"))}))},j=Object(l.useMemo)((function(){return[{id:"objectable_id",title:E("warehouse.sku.owner.title"),render:function(e,t){var a=t.objectable_type;return i.a.createElement("div",{className:"owner-object"},i.a.createElement("span",{className:"object-type"},E("user"===a?"common.customer":"common.the_order")),i.a.createElement("span",null," - "),i.a.createElement("span",{className:"object-id"},E("common.code"),": ",e))}},{id:"quantity",title:E("common.quantity"),render:function(e,t){return i.a.createElement(V.a,{need:["owning-boxes.update"],fallback:i.a.createElement("span",null,e)},i.a.createElement("input",{className:"form-control quantity-box",min:1,type:"number",ref:function(e){return h.current[t.id]=e},onKeyPress:function(e){return w(e,t)}}))}}]}),[]),w=function(e,t){e.persist(),13===e.charCode&&_(e.target.value,t,e.target)},_=Object(l.useCallback)(O.a.debounce((function(e,t,a){e<1?a.style.borderColor="#dc3545":G.a.boxOwner.update(null===t||void 0===t?void 0:t.id,{quantity:e}).then((function(){n.b.success(E("warehouse.sku.owner.update.success")),a.style.borderColor="#1BC5BD",setTimeout((function(){a.style.borderColor=""}),5e3)})).catch((function(e){var c,l,i,o=E("warehouse.sku.owner.update.failure");(null===e||void 0===e||null===(c=e.response)||void 0===c||null===(l=c.data)||void 0===l||null===(i=l.errors)||void 0===i?void 0:i.quantity)&&(o=e.response.data.errors.quantity),n.b.error(o),h.current[t.id].value=t.quantity,a.style.borderColor="#dc3545"}))}),700),[]);return c.length?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.c,{path:"".concat(f.path,"/delete-box-owner/:id")},(function(e){var t,a=e.match;return i.a.createElement(qe,{id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.id,show:null!==a,onConfirmed:g,title:E("warehouse.sku.owner.delete.title")})})),i.a.createElement(Ce.a,null,i.a.createElement(je.a,null,i.a.createElement(Oe.a,{className:"table-box-owners"},i.a.createElement(we.a,null,i.a.createElement(_e.a,null,j.map((function(e){return i.a.createElement(ye.a,{key:e.id},e.title)})),i.a.createElement(ye.a,null))),i.a.createElement(Ne.a,null,c.map((function(e){return i.a.createElement(_e.a,{hover:!0,key:e[j[0].id]},j.map((function(t){return i.a.createElement(ye.a,{key:t.id},function(e,t){return t.render?t.render(O.a.get(e,t.id),e):O.a.get(e,t.id)}(e,t))})),i.a.createElement(ye.a,null,i.a.createElement(V.a,{need:["owning-boxes.delete"]},i.a.createElement(xe.a,{color:"primary",size:"small",onClick:function(){return t=e,void v.push("".concat(f.url,"/delete-box-owner/").concat(t.id));var t}},E("common.delete")))))})))),i.a.createElement(I.a,{className:d.pagination,count:s.lastPage,page:s.page,shape:"rounded",onChange:u})))):i.a.createElement(Re.a,{emptyText:E("warehouse.sku.owner.empty")})},Be=a(54),Pe=function(e){var t=e.name,a=e.showLabel,n=void 0===a||a,c=Object(Z.a)(e,["name","showLabel"]),o=Object(l.useState)(),r=Object(m.a)(o,2),s=r[0],u=r[1],d=Object(W.e)(t),v=Object(m.a)(d,2),f=v[0],h=v[1],p=Object(W.g)(),E=p.setFieldTouched,g=p.setFieldValue,j=h.error,O=h.touched,w=Object(b.a)(),_=Object(m.a)(w,1)[0],y=[{value:"user",label:_("warehouse.order.owner_type.customer")},{value:"order",label:_("warehouse.order.owner_type.order")}];Object(l.useEffect)((function(){if((null===s||void 0===s?void 0:s.value)!==(null===f||void 0===f?void 0:f.value)){var e,t=null===(e=y.filter((function(e){return e.value===f.value})))||void 0===e?void 0:e[0];u(t)}}),[f.value]);return i.a.createElement("div",{className:Object(k.a)(O&&j&&"is-invalid")},i.a.createElement("div",{className:"select-customer"},i.a.createElement("div",{className:"form-group"},n&&i.a.createElement("label",{htmlFor:""},_("warehouse.order.owner_type.title")),i.a.createElement(Be.a,Object.assign({value:s,placeholder:_("common.select_here"),options:y,onChange:function(e){u(e),g(f.name,e.value)},onClick:function(){E(f.name)}},c)))),O&&j&&i.a.createElement("div",{className:"invalid-feedback d-block"},j))},Te=a(187),Me=(a(1382),function(e){var t=e.className,a=void 0===t?"":t,n=e.options,c=void 0===n?[]:n,o=e.loading,r=void 0!==o&&o,s=e.onFetchData,u=e.value,d=e.typeSearch,v=void 0===d?"id":d,f=e.label,h=e.onChange,p=e.dispatchFirstOption,E=void 0!==p&&p,g=Object(Z.a)(e,["className","options","loading","onFetchData","value","typeSearch","label","onChange","dispatchFirstOption"]),j=Object(l.useState)(""),w=Object(m.a)(j,2),_=w[0],y=w[1],N=Object(b.a)(),x=Object(m.a)(N,1)[0],C=Object(l.useRef)(!1);Object(l.useEffect)((function(){!c.length&&s&&s()}),[]),Object(l.useEffect)((function(){c.length&&E&&!C.current&&(h&&h(null===c||void 0===c?void 0:c[0]),C.current=!0)}),[c,E,C,h]);var S=Object(l.useMemo)((function(){return void 0===u||null===u?"":c.filter((function(e){return e.value===u}))[0]||""}),[u,c]),q=Object(l.useCallback)(O.a.debounce((function(e){var t=e.value,a=e.type;if(t!==_){y(t);var n={search:t,searchFields:a&&"".concat(a,":like")};s&&s(n)}}),700),[_]);return i.a.createElement("div",{className:Object(k.a)("tomoni-base-select",a)},i.a.createElement("div",{className:"form-group"},f&&i.a.createElement("label",{htmlFor:""},f),i.a.createElement(Be.a,Object.assign({value:S,placeholder:x("common.select_here"),options:c,onInputChange:function(e){e&&q({value:e,type:v})},onChange:function(e){h&&h(e)},isLoading:r},g))))}),Ie=(a(1383),function(e){var t=e.onChange,a=e.value,n=e.showLabel,c=void 0===n||n,l=Object(Z.a)(e,["onChange","value","showLabel"]),r=Object(o.e)((function(e){return{customerList:e.authService.user.userList}}),o.c).customerList,s=Object(o.d)(),u=Object(b.a)(),d=Object(m.a)(u,1)[0],v=null===r||void 0===r?void 0:r.map((function(e){return{value:e.id,label:e.email}}));return i.a.createElement(Me,Object.assign({value:a,label:c&&d("common.customer_info"),placeholder:d("common.pick_here"),options:v,onChange:function(e){t&&t(e.value)},className:"select-customer",typeSearch:"email",onFetchData:function(e){s(Object(Te.f)(e))}},l))}),Ve=function(e){var t=e.name,a=Object(Z.a)(e,["name"]),n=Object(W.e)(t),c=Object(m.a)(n,2),l=c[0],o=c[1],r=Object(W.g)(),s=r.setFieldTouched,u=r.setFieldValue,d=o.error,b=o.touched;return i.a.createElement("div",{className:Object(k.a)(b&&d&&"is-invalid")},i.a.createElement(Ie,Object.assign({value:l.value,onChange:function(e){u(l.name,e)},onClick:function(){s(l.name)}},a)),b&&d&&i.a.createElement("div",{className:"invalid-feedback d-block"},d))},Le=function(e){var t=e.name,a=e.showLabel,n=void 0===a||a,c=(Object(Z.a)(e,["name","showLabel"]),Object(W.e)(t)),l=Object(m.a)(c,2),o=l[0],r=l[1],s=Object(W.g)(),u=s.setFieldValue,d=s.values,v=r.error,f=r.touched,h=Object(b.a)(),p=Object(m.a)(h,1)[0];return"user"===(null===d||void 0===d?void 0:d.objectable_type)?i.a.createElement(Ve,{onChange:function(e){u(o.name,e)},name:o.name}):i.a.createElement("div",{className:Object(k.a)(f&&v&&"is-invalid")},i.a.createElement("div",{className:"select-customer"},i.a.createElement("div",{className:"form-group"},n&&i.a.createElement("label",{htmlFor:""},p("warehouse.order.owner_type.order")),i.a.createElement("input",Object.assign({},o,{className:"form-control"})))),f&&v&&i.a.createElement("div",{className:"invalid-feedback d-block"},v))},Ae=function(e){var t=e.onSubmit,a=e.initialValues,n=void 0===a?{objectable_type:"user",objectable_id:"",quantity:1}:a,c=Object(b.a)(),l=Object(m.a)(c,1)[0],o=X.d().shape({objectable_id:X.f().required(l("validation.message.required")),objectable_type:X.f().required(l("validation.message.required")),quantity:X.c().required(l("validation.message.required")).min(1,l("validation.message.min",{min:1}))});return i.a.createElement(W.d,{enableReinitialize:!0,initialValues:n,onSubmit:t,validationSchema:o},(function(e){var t=e.handleSubmit;return i.a.createElement(W.c,{className:"form-add-order row"},i.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12"},i.a.createElement(Pe,{name:"objectable_type"})),i.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12"},i.a.createElement(Le,{name:"objectable_id"})),i.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-12"},i.a.createElement(W.b,{name:"quantity",label:l("common.quantity"),component:f.i,type:"number",min:1})),i.a.createElement($,null),i.a.createElement("div",{className:"action-submit text-right mt-3 w-100"},i.a.createElement(de,{type:"primary",onClick:t,need:["owning-boxes.create"]},l("common.add"))))}))},Ye=(a(1384),function(e){var t=e.onSuccess,a=Object(o.e)((function(e){return e.warehouse.box.detail.data})),c=Object(b.a)(),l=Object(m.a)(c,1)[0];return i.a.createElement("div",{className:"add-order"},i.a.createElement(Ae,{onSubmit:function(e,c){G.a.boxOwner.create(Object(E.a)(Object(E.a)({},e),{},{box_id:null===a||void 0===a?void 0:a.id})).then((function(e){n.b.success(l("warehouse.sku.owner.create.success")),t&&t(e),c.resetForm()})).catch((function(e){n.b.error(l("warehouse.sku.owner.create.failure")),J(e,c)}))}}))}),He=(a(1385),a(1386),function(e){var t=e.onChange,a=Object(o.e)((function(e){return e.warehouse.sfa.detail.data})),n=Object(o.e)((function(e){return e.warehouse.box.detail.data})),c=Object(l.useMemo)((function(){var e;return(null===a||void 0===a||null===(e=a.boxes)||void 0===e?void 0:e.length)?a.boxes.map((function(e){return{value:e.id,label:e.id}})):[]}),[a]);return i.a.createElement(Me,{className:"select-box",value:null===n||void 0===n?void 0:n.id,options:c,onChange:function(e){t&&t(e)}})}),Ue=function(e){e.f5DataSFA;var t=Object(o.e)((function(e){return e.warehouse.box.detail.data})),a=Object(o.e)((function(e){return e.warehouse.box.detail.loading})),n=Object(o.d)(),c=Object(r.j)(),s=Object(r.h)(),u=Object(b.a)(),d=Object(m.a)(u,1)[0];Object(l.useEffect)((function(){(null===c||void 0===c?void 0:c.box_id)&&v()}),[null===c||void 0===c?void 0:c.box_id]);var v=function(){return n(Object(ve.c)({id:null===c||void 0===c?void 0:c.box_id,with:"owners",appends:"owners.object"}))},h=function(e){s.push("/warehouse/classify-box/".concat(null===c||void 0===c?void 0:c.sfa_id,"/").concat(e.id))};return i.a.createElement(p,{title:"".concat(d("MENU.WAREHOUSE.ASSIGN_BOXES")," - SFA: ").concat(null===c||void 0===c?void 0:c.sfa_id)},i.a.createElement("div",{className:"row classify-box"},i.a.createElement("div",{className:"col-lg-9 col-md-12 col-sm-12",style:{height:"100%"}},i.a.createElement(f.c,{className:"mb-0 position-relative"},a&&i.a.createElement(x.a,{local:!0}),i.a.createElement(f.d,null,i.a.createElement("div",{className:"ipad-shown select-box-mobile"},i.a.createElement("label",{htmlFor:""},d("warehouse.sku.title")),i.a.createElement(He,{onChange:function(e){e&&h({id:e.value})}})),i.a.createElement(Ye,{onSuccess:v}),i.a.createElement(De,{onRefresh:v,data:(null===t||void 0===t?void 0:t.owners)||[]})))),i.a.createElement("div",{className:"col-lg-3 col-md-12 col-sm-12 ipad-hidden"},i.a.createElement(Ee,{onSelectBox:h,showQuantity:function(e){return e.duplicate},showTotalItems:!0,showRelative:!0}))))},Ke=function(e){var t,a=Object(o.e)((function(e){return e.warehouse.sfa.detail.data})),n=Object(o.e)((function(e){return e.warehouse.box.detail.loading})),c=Object(o.d)(),s=Object(r.j)(),u=Object(r.h)(),d=Object(r.k)(),v=Object(b.a)(),f=Object(m.a)(v,1)[0];Object(l.useEffect)((function(){(null===s||void 0===s?void 0:s.sfa_id)&&h().then((function(e){var t,a,n,c,l,i;(null===(t=e.payload)||void 0===t||null===(a=t.boxes)||void 0===a?void 0:a.length)&&!(null===s||void 0===s?void 0:s.box_id)?u.replace("".concat(d.url,"/").concat(null===(l=e.payload)||void 0===l||null===(i=l.boxes)||void 0===i?void 0:i[0].id)):(null===(n=e.payload)||void 0===n||null===(c=n.boxes)||void 0===c?void 0:c.length)||u.push("".concat(d.url,"/create-new-box"))}))}),[]);var h=function(){return c(Object(g.b)({id:s.sfa_id,with:"boxes.childs.items;boxes.items"}))},E=function(e){var t;t=e,u.push("/warehouse/classify-box/".concat(null===s||void 0===s?void 0:s.sfa_id,"/").concat(t.id)),h()};return n||(null===a||void 0===a||null===(t=a.boxes)||void 0===t?void 0:t.length)?i.a.createElement(r.c,{path:"".concat(d.path,"/:box_id")},i.a.createElement(Ue,{f5DataSFA:h})):i.a.createElement(p,{title:"".concat(f("MENU.WAREHOUSE.ASSIGN_BOXES")," - SFA: ").concat(null===s||void 0===s?void 0:s.sfa_id)},i.a.createElement(U,{focusModalCreateBox:function(){u.push("".concat(d.url,"/create-new-box"))}}),i.a.createElement(r.c,{path:"".concat(d.path,"/create-new-box")},(function(e){var t=e.match;return i.a.createElement(be,{show:null!==t,onSuccess:E})})))},ze=function(e){var t=Object(r.k)();return i.a.createElement(r.e,null,i.a.createElement(r.b,{exact:!0,from:"/warehouse/classify-box",to:"/warehouse/classify-box/list"}),i.a.createElement(r.c,{path:"".concat(t.path,"/list")},i.a.createElement(H,null)),i.a.createElement(r.c,{path:"".concat(t.path,"/:sfa_id")},i.a.createElement(Ke,null)))},Qe=a(1),Ge=a(434),Je=a(403),We=a.n(Je),Xe=(a(1387),function(e){var t=e.onChange,a=e.value,n=e.showLabel,c=void 0===n||n,r=Object(Z.a)(e,["onChange","value","showLabel"]),s=Object(o.e)((function(e){return e.warehouse.sfa.list.data})),u=Object(o.e)((function(e){return e.warehouse.sfa.list.loading})),d=Object(o.d)(),v=Object(b.a)(),f=Object(m.a)(v,1)[0],h=Object(l.useCallback)((function(e){return{value:e.id,label:f("warehouse.sfa.x_id",{x:e.id})}}),[f]),p=null===s||void 0===s?void 0:s.map((function(e){return h(e)}));return i.a.createElement(Me,Object.assign({className:"select-sfa",value:a,label:c&&f("warehouse.sfa.title"),placeholder:f("warehouse.sfa.find"),options:p,onChange:function(e){t&&t(e.value)},loading:u,onFetchData:function(e){d(Object(g.c)(e))}},r))}),$e=(a(1388),function(e){var t=e.onChange,a=e.value,n=e.showLabel,c=void 0===n||n,l=Object(Z.a)(e,["onChange","value","showLabel"]),r=Object(o.e)((function(e){return e.warehouse.sfa.list})),s=r.loading,u=r.data,d=Object(o.d)(),v=Object(b.a)(),f=Object(m.a)(v,1)[0],h=null===u||void 0===u?void 0:u.map((function(e){return{value:(t=e).tracking,label:t.tracking};var t}));return i.a.createElement(Me,Object.assign({value:a,label:c&&f("warehouse.tracking.title"),className:"select-tracking",placeholder:f("warehouse.tracking.find"),options:h,onChange:function(e){t&&t(e.value)},loading:s,onFetchData:function(e){d(Object(g.c)(e))},typeSearch:"tracking"},l))}),Ze=a(395),et=(a(1389),function(e){var t=e.onChange,a=e.value,n=e.showLabel,c=void 0===n||n,r=Object(Z.a)(e,["onChange","value","showLabel"]),s=Object(o.e)((function(e){return e.warehouse.ladingBill.list.data})),u=Object(o.e)((function(e){return e.warehouse.ladingBill.list.loading})),d=Object(o.d)(),v=Object(b.a)(),f=Object(m.a)(v,1)[0],h=Object(l.useCallback)((function(e){return{value:e.id,label:f("warehouse.lading_bill.option_label",{id:e.id,customerId:e.customer_id||"---",createdAt:e.created_at||"---"})}}),[f]),p=null===s||void 0===s?void 0:s.map((function(e){return h(e)}));return i.a.createElement(Me,Object.assign({value:a,label:c&&f("warehouse.lading_bill.title"),className:"select-lading-bill",placeholder:f("warehouse.lading_bill.find"),options:p,onChange:function(e){t&&t(e.value)},loading:u,onFetchData:function(e){d(Object(Ze.c)(e))},typeSearch:void 0},r))}),tt=a(404),at=(a(1390),function(e){var t=e.onChange,a=e.value,n=e.showLabel,c=void 0===n||n,r=Object(Z.a)(e,["onChange","value","showLabel"]),s=Object(o.e)((function(e){return e.warehouse.invoice.list.data})),u=Object(o.e)((function(e){return e.warehouse.invoice.list.loading})),d=Object(o.d)(),v=Object(b.a)(),f=Object(m.a)(v,1)[0],h=Object(l.useCallback)((function(e){return{value:e.id,label:f("warehouse.invoice.option_label",{id:e.id,created_at:e.created_at||"---"})}}),[f]),p=null===s||void 0===s?void 0:s.map((function(e){return h(e)}));return i.a.createElement(Me,Object.assign({value:a,label:c&&f("warehouse.invoice.title"),className:"select-invoice",placeholder:f("warehouse.invoice.find"),options:p,onChange:function(e){t&&t(e.value)},loading:u,onFetchData:function(e){d(Object(tt.c)(e))}},r))}),nt=a(408),ct=a.n(nt),lt=(a(1391),"YYYY-MM-DD"),it=function(e){var t,a,n,c,s,u,d,v,h=Object(o.e)((function(e){return e.warehouse.dashboard.loading})),p=Object(o.e)((function(e){return e.warehouse.dashboard.filter})),g=Object(o.d)(),j=Object(r.i)(),w=Object(r.h)(),y=Object(r.k)(),N=Object(b.a)(),x=Object(m.a)(N,1)[0];Object(l.useEffect)((function(){if(j.search){var e=We.a.parse(j.search),t=e;(e.startDate||e.endDate)&&(t=Object(E.a)(Object(E.a)({},O.a.omit(e,["startDate","endDate"])),{},{date:{startDate:e.startDate,endDate:e.endDate}})),g(Ge.a.changeFilter(t))}g(Object(Ge.c)())}),[]);var k=function(e,t){g(Ge.a.changeFilter(Object(Qe.a)({},e,t)))},C=function(e,t){var a=Object(E.a)({},null===p||void 0===p?void 0:p.date);a[e]=_()(t).format("YYYY-MM-DD"),g(Ge.a.changeFilter({date:a}))};return i.a.createElement(f.c,{className:"dashboard-filter"},i.a.createElement(f.d,null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-3 col-md-6 col-sm-12"},i.a.createElement(Xe,{value:p.sfa_id,onChange:function(e){return k("sfa_id",e)}})),i.a.createElement("div",{className:"col-lg-3 col-md-6 col-sm-12"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:""},x("warehouse.sku.title")),i.a.createElement("input",{value:p.id||"",onChange:function(e){return k("id",e.target.value)},className:"form-control",placeholder:x("warehouse.sku.title")}))),i.a.createElement("div",{className:"col-lg-3 col-md-6 col-sm-12"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:""},x("warehouse.jancode.title")),i.a.createElement("input",{value:p["items.product_id"]||"",onChange:function(e){return k("items.product_id",e.target.value)},className:"form-control",placeholder:x("warehouse.jancode.title")}))),i.a.createElement("div",{className:"col-lg-3 col-md-6 col-sm-12"},i.a.createElement($e,{value:p["sfa.tracking"],onChange:function(e){return k("sfa.tracking",e)}})),i.a.createElement("div",{className:"col-lg-3 col-md-6 col-sm-12"},i.a.createElement(Ie,{value:p["owners.objectable_id"],onChange:function(e){return k("owners.objectable_id",e)}})),i.a.createElement("div",{className:"col-lg-3 col-md-6 col-sm-12"},i.a.createElement(et,{value:p["owners.pivotLadingBills.ladingBill.id"],onChange:function(e){return k("owners.pivotLadingBills.ladingBill.id",e)}})),i.a.createElement("div",{className:"col-lg-3 col-md-6 col-sm-12"},i.a.createElement(at,{value:p["owners.pivotLadingBills.ladingBill.containers.id"],onChange:function(e){return k("owners.pivotLadingBills.ladingBill.containers.id",e)}})),i.a.createElement("div",{className:"col-lg-3 col-md-6 col-sm-12"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:""},x("common.start_date")),i.a.createElement(ct.a,{selected:(null===p||void 0===p||null===(t=p.date)||void 0===t?void 0:t.startDate)?_()(null===p||void 0===p||null===(a=p.date)||void 0===a?void 0:a.startDate,lt).toDate():void 0,maxDate:(null===p||void 0===p||null===(n=p.date)||void 0===n?void 0:n.endDate)?_()(null===p||void 0===p||null===(c=p.date)||void 0===c?void 0:c.endDate,lt).toDate():null,onChange:function(e){return C("startDate",e)},dateFormat:"yyyy-MM-dd",className:"form-control"}))),i.a.createElement("div",{className:"col-lg-3 col-md-6 col-sm-12"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:""},x("common.end_date")),i.a.createElement(ct.a,{selected:(null===p||void 0===p||null===(s=p.date)||void 0===s?void 0:s.endDate)?_()(null===p||void 0===p||null===(u=p.date)||void 0===u?void 0:u.endDate,lt).toDate():void 0,minDate:(null===p||void 0===p||null===(d=p.date)||void 0===d?void 0:d.startDate)?_()(null===p||void 0===p||null===(v=p.date)||void 0===v?void 0:v.startDate,lt).toDate():null,onChange:function(e){return C("endDate",e)},dateFormat:"yyyy-MM-dd",className:"form-control"})))),i.a.createElement("div",{className:"text-right"},i.a.createElement(de,{type:"secondary",loading:h,onClick:function(){p!=={}&&(w.replace(y.url),g(Ge.a.resetFilter()),g(Object(Ge.c)()))}},x("common.reset_filter")),i.a.createElement(de,{className:"ml-3",type:"primary",loading:h,onClick:function(){g(Ge.a.resetBoxes()),g(Object(Ge.c)());var e=p;p.date&&(e=Object(E.a)(Object(E.a)({},O.a.omit(p,"date")),{},{startDate:p.date.startDate,endDate:p.date.endDate})),w.replace("".concat(y.url,"?").concat(We.a.stringify(e)))}},x("common.filter")))))};var ot=a(1258),rt=a(1392),st=(a(1394),Object(ge.a)((function(e){return{root:{},pagination:{display:"flex",marginTop:e.spacing(2),marginBottom:e.spacing(2),justifyContent:"flex-end"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})));function ut(e){var t=e.columns,a=e.rows,n=e.page,c=e.lastpage,o=e.onPageChange,r=e.onDelete,s=e.onViewEdit,u=e.additionalActions,d=void 0===u?[]:u,b=e.onSort,v=void 0===b?null:b,f=e.rowKey,h=e.className,p=e.noSTT,E=e.loading,g=void 0!==E&&E,j=st(),w=i.a.useState("asc"),_=Object(m.a)(w,2),y=_[0],N=_[1],k=Object(l.useState)(""),S=Object(m.a)(k,2),R=S[0],F=S[1],D=Object(l.useMemo)((function(){return f||t[0].id}),[t,f]),B=Object(l.useMemo)((function(){return!!s||!!r||!!d.length}),[s,r,d]);return i.a.createElement("div",{className:"tmn-waypoint-table position-relative"},i.a.createElement("div",{className:"tmn-waypoint-table__wrapper"},i.a.createElement(Oe.a,{className:h},i.a.createElement(we.a,null,i.a.createElement(_e.a,null,!p&&i.a.createElement(ye.a,null,i.a.createElement("span",null,"STT")),t.map((function(e){return i.a.createElement(ye.a,{key:e.id},e.isSort?i.a.createElement(ot.a,{active:R===e.id,direction:R===e.id?y:"asc",onClick:function(){return function(e){var t=R===e&&"asc"===y?"desc":"asc";N(t),F(e),v&&v(e,t)}(e.id)}},e.title,R===e.id&&e.disablePadding?i.a.createElement("span",{className:j.visuallyHidden},"desc"===y?"sorted descending":"sorted ascending"):null):e.title)})),B&&i.a.createElement(ye.a,{className:"text-center"},i.a.createElement("span",{className:j.title},"#")))),i.a.createElement(Ne.a,null,a.map((function(e,a){return i.a.createElement(_e.a,{hover:!0,key:a},!p&&i.a.createElement(ye.a,null,a+1),t.map((function(t){return i.a.createElement(ye.a,{key:t.id},function(e,t){return t.render?t.render(O.a.get(e,t.id),e):O.a.get(e,t.id)}(e,t))})),B&&i.a.createElement(ye.a,{style:{width:"12%"}},d.map((function(t,a){return i.a.createElement(i.a.Fragment,{key:"action-item-".concat(a)},t(e))})),!!s&&i.a.createElement("button",{className:"btn btn-icon btn-light btn-hover-primary btn-sm mx-3",onClick:function(){return function(e,t){s&&s(e,t)}(e[D],e)}},i.a.createElement("span",{className:"svg-icon svg-icon-md svg-icon-primary"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Communication/Write.svg")}))),!!r&&i.a.createElement("button",{className:"btn btn-icon btn-light btn-hover-danger btn-sm",onClick:function(){return t=e[D],void(r&&r(t));var t}},i.a.createElement("span",{className:"svg-icon svg-icon-md svg-icon-danger"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/General/Trash.svg")})))))}))))),!g&&n<c&&i.a.createElement(rt.a,{onEnter:function(){n>=c||o(n+1)}}),g&&i.a.createElement(x.a,{absolute:!1,hideLoadingText:!0}))}ut.defaultProps={className:"",columns:[],rows:[],onPageChange:null,onDelete:null,onViewEdit:null,page:1,lastpage:1,isPagination:!0,isAction:!0,isDelete:!0,isViewEdit:!0,additionalActions:[],rowKey:void 0,noSTT:!1};var dt=ut,mt=(a(1395),function(e){var t=Object(o.e)((function(e){return e.warehouse.dashboard.boxes})),a=Object(o.e)((function(e){return e.warehouse.dashboard.loading})),n=Object(o.e)((function(e){return e.warehouse.dashboard.pagination})),c=function(){var e=Object(o.e)((function(e){return e.warehouse.dashboard.columns})),t=Object(r.i)(),a=Object(b.a)(),n=Object(m.a)(a,1)[0],c=Object(l.useMemo)((function(){return We.a.parse(t.search)}),[t]),s=[{id:"id",key:"sku",title:n("warehouse.sku.title"),render:function(e,t){var a;return i.a.createElement("div",{className:"sku-info"},i.a.createElement("div",{className:"font-weight-bold sku cursor-pointer",onClick:function(){return f(t)}},e),i.a.createElement("div",{className:"sku-duplicate"},n("warehouse.quantity.total"),":"," ",i.a.createElement("span",{className:"font-weight-bold"},Object(he.a)(t.duplicate))),i.a.createElement("div",{className:"sku-duplicate"},n("warehouse.quantity.in_stock"),":"," ",i.a.createElement("span",{className:"font-weight-bold"},Object(he.a)(u(t)))),i.a.createElement("div",{className:"sku-info__extra-content"},i.a.createElement("div",{className:"sfa-id"},n("warehouse.sfa.title"),":"," ",i.a.createElement("span",{className:"font-weight-bold"},t.sfa_id)),i.a.createElement("div",{className:"tracking"},n("warehouse.tracking.title"),":"," ",i.a.createElement("span",{className:"font-weight-bold"},null===(a=t.sfa)||void 0===a?void 0:a.tracking)),i.a.createElement("div",{className:"created_date"},n("common.created_at"),":"," ",i.a.createElement("span",{className:"font-weight-bold"},t.created_at||"---")),c["items.product_id"]&&i.a.createElement("div",{className:"search-jancode"},n("warehouse.jancode.title")," [",c["items.product_id"],"]:"," ",i.a.createElement("span",{className:"font-weight-bold"},Object(he.a)(d(t).inWH),"/",Object(he.a)(d(t).total)))))}},{id:"pivot_pallets",key:"pallets",title:n("common.storage"),render:function(e){return(null===e||void 0===e?void 0:e.length)?e.map((function(e,t){var a,c,l,o,r,s,u,d,m,b;return i.a.createElement("div",{className:"pallet-wrapper split-with-other-vertical",key:"pallet-".concat(t)},i.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},i.a.createElement("div",{className:"pallet-id"},n("warehouse.pallet.id"),":"," ",i.a.createElement("span",{className:"font-weight-bold"},e.pallet.id)),i.a.createElement("div",{className:"pallet-position"},(null===(a=e.pallet)||void 0===a||null===(c=a.location)||void 0===c?void 0:c.floor)?"F".concat(null===(l=e.pallet)||void 0===l||null===(o=l.location)||void 0===o?void 0:o.floor," x R").concat(null===(r=e.pallet)||void 0===r||null===(s=r.location)||void 0===s?void 0:s.row," x C").concat(null===(u=e.pallet)||void 0===u||null===(d=u.location)||void 0===d?void 0:d.column):"---")),i.a.createElement("div",{className:"d-flex align-items-center justify-content-between mt-3"},i.a.createElement("div",{className:"pallet-quantity"},n("warehouse.quantity.on_pallet.shorthand"),":"," ",i.a.createElement("span",{className:"font-weight-bold"},Object(he.a)(e.current_quantity))),i.a.createElement("div",{className:"shelve-id"},n("warehouse.shelve.title"),":"," ",i.a.createElement("span",{className:"font-weight-bold"},(null===e||void 0===e||null===(m=e.pallet)||void 0===m||null===(b=m.location)||void 0===b?void 0:b.shelve_id)||"---"))))})):i.a.createElement("span",{className:"empty-text"},n("warehouse.sku.not_storage"))}},{id:"owners",key:"order",title:n("common.the_order"),render:function(e){return(null===e||void 0===e?void 0:e.length)?e.map((function(e,t){return i.a.createElement("div",{className:"owner-wrapper split-with-other-vertical",key:"owner-".concat(t)},i.a.createElement("div",{className:"owner-type"},"user"===e.objectable_type?"".concat(n("common.customer")):"".concat(n("common.the_order"),":"),i.a.createElement("span",{className:"font-weight-bold ml-5"},e.objectable_id)),i.a.createElement("div",{className:"owner-quantity"},n("common.quantity"),":"," ",i.a.createElement("span",{className:"font-weight-bold"},Object(he.a)(e.quantity))))})):i.a.createElement("span",{className:"empty-text"},n("warehouse.sku.inventory_crate"))}},{id:"box_lading_bills",key:"lading_bills",title:n("warehouse.lading_bill.title"),render:function(e,t){var a=t.owners.reduce((function(e,t){var a;if(!(null===t||void 0===t||null===(a=t.box_lading_bills)||void 0===a?void 0:a.length))return e;var n=t.box_lading_bills.map((function(e){return Object(E.a)(Object(E.a)({},e.lading_bill),{},{quantity:e.quantity})}));return[].concat(Object(fe.a)(e),Object(fe.a)(n))}),[]);return(null===a||void 0===a?void 0:a.length)?a.map((function(e,t){return i.a.createElement("div",{className:"lading-bill-wrapper split-with-other-vertical",key:"lading-bill-".concat(t)},i.a.createElement("div",{className:"lading-bill-info"},i.a.createElement("div",{className:"lading-bill-id cursor-pointer",onClick:function(){return h(e)}},n("warehouse.lading_bill.id"),":"," ",i.a.createElement("span",{className:"font-weight-bold text-primary"},e.id)),i.a.createElement("div",{className:"lading-bill-quantity"},"SL:"," ",i.a.createElement("span",{className:"font-weight-bold"},Object(he.a)(e.quantity)))),i.a.createElement("div",{className:"container-list mt-3"},e.containers.map((function(e,t){return i.a.createElement("div",{className:"container-wrapper",key:"container-".concat(t)},i.a.createElement("div",{className:"container-id cursor-pointer",onClick:function(){return p(e)}},n("warehouse.invoice.title"),":"," ",i.a.createElement("span",{className:"font-weight-bold text-primary"},e.id)),i.a.createElement("div",{className:"container-shipping_date"},e.shipping_date?"Ng\xe0y giao h\xe0ng: ".concat(e.shipping_date):"---"))}))))})):i.a.createElement("span",{className:"empty-text"},n("warehouse.sku.not_have.lading_bill"))}}],u=Object(l.useCallback)((function(e){return e.quantity_inventory}),[]),d=Object(l.useCallback)((function(e){var t,a,n=0;return(null===e||void 0===e||null===(t=e.items)||void 0===t?void 0:t.length)&&(n=(null===(a=Object(j.find)(e.items,["product_id",c["items.product_id"]]))||void 0===a?void 0:a.quantity)||0),{total:n*e.duplicate,inWH:u(e)*n}}),[u,c]),v=Object(l.useMemo)((function(){return e.filter((function(e){return e.show})).map((function(e){return O.a.find(s,["key",e.id])}))}),[e,s]),f=function(e){window.open("/warehouse/inbound/step-2/".concat(e.sfa_id,"/").concat(e.id),"_blank")},h=function(e){window.open("/warehouse/lading-bills/".concat(e.id),"_blank")},p=function(e){window.open("/warehouse/container/detail/".concat(e.id),"_blank")};return[v]}(),s=Object(m.a)(c,1)[0],u=Object(o.d)();return i.a.createElement(f.c,{className:"table-dashboard-sku-section position-relative"},i.a.createElement(f.d,null,i.a.createElement(dt,{rows:t,columns:s,rowKey:"id",page:n.page,lastpage:n.lastPage,onPageChange:function(e){u(Ge.a.changePage(e)),u(Object(Ge.c)())},loading:a,noSTT:!0})))}),bt=a(93),vt=(a(1396),function(e){var t,a,n=Object(l.useState)(),c=Object(m.a)(n,2),s=c[0],u=c[1],d=Object(l.useState)(!1),b=Object(m.a)(d,2),v=b[0],h=b[1],p=Object(r.i)(),E=Object(l.useMemo)((function(){return We.a.parse(p.search)}),[p]);Object(l.useEffect)((function(){(null===E||void 0===E?void 0:E["items.product_id"])&&(h(!0),bt.a.fetchProductById({id:null===E||void 0===E?void 0:E["items.product_id"]}).then((function(e){u(e)})).finally((function(){h(!1)})))}),[E]);var g=Object(o.e)((function(e){return e.warehouse.dashboard.boxes})),j=Object(l.useMemo)((function(){var e=E["items.product_id"];return g.reduce((function(t,a){var n=O.a.find(a.items,["product_id",e]);return n?t+n.quantity*a.duplicate:t}),0)}),[E,g]),w=Object(l.useCallback)((function(e){var t,a=0;return(null===e||void 0===e||null===(t=e.owners)||void 0===t?void 0:t.length)&&(a=O.a.reduce(null===e||void 0===e?void 0:e.owners,(function(e,t){var a;return(null===t||void 0===t||null===(a=t.box_lading_bills)||void 0===a?void 0:a.length)?e+O.a.reduce(null===t||void 0===t?void 0:t.box_lading_bills,(function(e,t){return e+t.quantity}),0):e}),0)),e.duplicate-a}),[]),_=Object(l.useMemo)((function(){var e=E["items.product_id"];return g.reduce((function(t,a){var n=O.a.find(a.items,["product_id",e]);return n?t+n.quantity*w(a):t}),0)}),[E,g,w]);return i.a.createElement(f.c,{className:"filter-jancode-extra-data"},i.a.createElement(f.d,{className:"position-relative"},v&&i.a.createElement(x.a,{local:!0}),!v&&!s&&i.a.createElement(Re.a,null),s&&i.a.createElement("div",{className:"d-flex"},i.a.createElement("div",{className:"product-identify"},i.a.createElement("div",{className:"product-id"},s.id),(null===s||void 0===s||null===(t=s.images)||void 0===t?void 0:t.url)&&i.a.createElement("div",{className:"image-section"},i.a.createElement("img",{src:null===s||void 0===s||null===(a=s.images)||void 0===a?void 0:a.url,alt:"Search product"}))),i.a.createElement("div",{className:"product-content"},i.a.createElement("div",{className:"product-name"},null===s||void 0===s?void 0:s.name),i.a.createElement("div",{className:"product-price"},"Gi\xe1: ",Object(he.a)(null===s||void 0===s?void 0:s.price)),i.a.createElement("div",{className:"product-ingredients"},"Th\xe0nh ph\u1ea7n: ",null===s||void 0===s?void 0:s.ingredients)))),i.a.createElement("div",{className:"card-footer position-relative"},v&&i.a.createElement(x.a,{local:!0}),i.a.createElement("div",null,"T\u1ed5ng s\u1ed1 l\u01b0\u1ee3ng s\u1ea3n ph\u1ea9m: ",Object(he.a)(j)),i.a.createElement("div",null,"S\u1ed1 l\u01b0\u1ee3ng s\u1ea3n ph\u1ea9m hi\u1ec7n t\u1ea1i trong kho: ",Object(he.a)(_))))}),ft=(a(1397),function(e){var t=Object(r.i)();return Object(l.useMemo)((function(){return We.a.parse(t.search)}),[t])["items.product_id"]?i.a.createElement(vt,null):i.a.createElement(i.a.Fragment,null)}),ht=function(e){var t=Object(l.useState)(0),a=Object(m.a)(t,2),n=a[0],c=a[1],o=Object(l.useState)(!1),r=Object(m.a)(o,2),s=r[0],u=r[1];Object(l.useEffect)((function(){d()}),[]);var d=Object(l.useCallback)((function(){return u(!0),G.a.SFA.fetchSFAs({search:"created_at:".concat(_()().format("YYYY-MM-DD")),searchFields:"created_at:like"}).then((function(e){c(e.total)})).finally((function(){u(!1)}))}),[]);return i.a.createElement(f.c,{className:"sfa-created-today dashboard-info-box wave wave-animate wave-primary"},i.a.createElement(f.d,null,s&&i.a.createElement(x.a,{local:!0}),i.a.createElement("div",{className:"title"},"SFA \u0111\xe3 t\u1ea1o h\xf4m nay"),i.a.createElement("div",{className:"total"},n)))},pt=function(e){var t=Object(l.useState)(0),a=Object(m.a)(t,2),n=a[0],c=a[1],o=Object(l.useState)(!1),r=Object(m.a)(o,2),s=r[0],u=r[1];Object(l.useEffect)((function(){d()}),[]);var d=Object(l.useCallback)((function(){return u(!0),G.a.box.fetchBoxs({search:"created_at:".concat(_()().format("YYYY-MM-DD")),searchFields:"created_at:like"}).then((function(e){c(e.total)})).finally((function(){u(!1)}))}),[]);return i.a.createElement(f.c,{className:"box-created-today dashboard-info-box wave wave-animate wave-success"},i.a.createElement(f.d,null,s&&i.a.createElement(x.a,{local:!0}),i.a.createElement("div",{className:"title"},"Th\xf9ng \u0111\xe3 t\u1ea1o h\xf4m nay"),i.a.createElement("div",{className:"total"},n)))},Et=a(180),gt=function(e){var t=Object(l.useState)(0),a=Object(m.a)(t,2),n=a[0],c=a[1],o=Object(l.useState)(!1),r=Object(m.a)(o,2),s=r[0],u=r[1];Object(l.useEffect)((function(){d()}),[]);var d=Object(l.useCallback)((function(){return u(!0),Et.a.fetchTracking({search:"expected_delivery:".concat(_()().format("YYYY-MM-DD"))}).then((function(e){c(e.total)})).finally((function(){u(!1)}))}),[]);return i.a.createElement(f.c,{className:"tracking-will-coming-today dashboard-info-box wave wave-animate-slow wave-warning"},i.a.createElement(f.d,null,s&&i.a.createElement(x.a,{local:!0}),i.a.createElement("div",{className:"title"},"Tracking s\u1ebd \u0111\u1ebfn h\xf4m nay"),i.a.createElement("div",{className:"total"},n)))},jt=function(e){return i.a.createElement(f.c,null,i.a.createElement(f.e,{title:"Y\xeau c\u1ea7u g\u1ed9p th\xf9ng"}),i.a.createElement(f.d,null))},Ot=function(e){return i.a.createElement(f.c,null,i.a.createElement(f.e,{title:"Danh s\xe1ch vi\u1ec7c c\u1ea7n l\xe0m"}),i.a.createElement(f.d,null))},wt=(a(1398),function(e){return i.a.createElement("div",{className:"p-4 wh-dashboard"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-4 com-sm-12"},i.a.createElement(ht,null)),i.a.createElement("div",{className:"col-lg-4 com-sm-12"},i.a.createElement(pt,null)),i.a.createElement("div",{className:"col-lg-4 com-sm-12"},i.a.createElement(gt,null))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-6 col-sm-12"},i.a.createElement(jt,null)),i.a.createElement("div",{className:"col-lg-6 col-sm-12"},i.a.createElement(Ot,null))),i.a.createElement(it,null),i.a.createElement(ft,null),i.a.createElement(mt,null))}),_t=a(411),yt=(0,a(257).createSelector)([function(e){return e.warehouse.downContainer.currentContainer},function(e){return e.warehouse.downContainer.listInvoices.data}],(function(e,t){return t[e]})),Nt=(0,a(257).createSelector)([yt],(function(e){var t={};return e?(e.lading_bills.forEach((function(e){t=e.box_lading_bills.reduce((function(e,t){return e[t.owning_box.box_id]?e[t.owning_box.box_id].quantity+=t.quantity:e[t.owning_box.box_id]={quantity:t.quantity,count:0,out:0},e}),Object(E.a)({},t))})),t=e.in_pickers.reduce((function(e,t){return e[t.box_id]?e[t.box_id].count+=t.quantity:e[t.box_id]={count:t.quantity,quantity:0,out:0},e}),Object(E.a)({},t)),t=e.out_pickers.reduce((function(e,t){return e[t.box_id]?e[t.box_id].out+=t.quantity:e[t.box_id]={out:t.quantity},e}),Object(E.a)({},t))):t})),xt=function(e){var t=Object(o.d)();return i.a.createElement(at,{onChange:function(e){t(Object(_t.a)({id:e}))},showLabel:!1})},kt=(a(1399),["#f5222d","#fa541c","#fa8c16","#faad14","#d4b106","#a0d911","#52c41a","#13c2c2","#1890ff","#2f54eb","#722ed1","#eb2f96","#bfbfbf"]),Ct=function(e){var t=e.targetBoxes,a=void 0===t?{}:t,n=e.currentContainer,c=e.countRendering,o=void 0===c?function(e){return"".concat(Object(he.a)(e.count||0)," / ").concat(Object(he.a)(e.quantity))}:c,r=e.labelPrefix,s=void 0===r?"Invoice":r,u=e.onRemoveTarget,d=Object(l.useMemo)((function(){return O.a.shuffle(kt)}),[]);return n?i.a.createElement("div",{className:"target-boxes shadow-sm"},i.a.createElement("div",{className:"invoice-item",style:{background:function(e){var t=e%kt.length;return function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?"rgba(".concat(parseInt(t[1],16),", ").concat(parseInt(t[2],16),", ").concat(parseInt(t[3],16),", .5)"):null}(d[t])||d[t]}(n.id)}},i.a.createElement("div",{className:"invoice-item-head"},"- ",s," ",n.id," -",u&&i.a.createElement("span",{"aria-hidden":"true",className:"remove-btn",onClick:function(){return e=n,void(u&&u(e));var e}},"\xd7")),i.a.createElement("div",{className:"list-boxes"},Object.entries(a).map((function(e,t){var a=Object(m.a)(e,2),n=a[0],c=a[1];return i.a.createElement("div",{className:Object(k.a)("box-data",!c.quantity&&"warning"),key:"box-data-".concat(t)},i.a.createElement("div",{className:"box-id"},n),i.a.createElement("div",{className:"count"},o(c)))}))))):i.a.createElement(i.a.Fragment,null)},St=(a(1400),function(e){var t=Object(o.e)(Nt),a=Object(o.e)(yt),n=Object(o.d)();return i.a.createElement(f.c,{className:"target-section"},i.a.createElement(xt,null),i.a.createElement(Ct,{targetBoxes:t,currentContainer:a,onRemoveTarget:function(e){n(_t.c.removeInvoiceByIdx(e))},countRendering:function(e){return"".concat(Object(he.a)(e.out||0)," / ").concat(Object(he.a)(e.count||0)," / ").concat(Object(he.a)(e.quantity))}}))}),qt=(0,a(257).createSelector)([yt,function(e){return e.warehouse.downContainer.process.message}],(function(e,t){return e&&t.length?t.filter((function(t){return t.container.id===e.id})):[]})),Rt=a(398),Ft=(0,a(257).createSelector)([function(e){return e.warehouse.downContainer.currentPallet},function(e){return e.warehouse.downContainer.listPallets.data}],(function(e,t){return t[e]})),Dt=a(394),Bt={type:"",pageSize:"2990",palletId:"undefined",tracking:"undefined",jancode:"undefined",sfaId:"undefined",quantity:"1",region:"Tokyo",sku:"undefined",map:"undefined",startIndex:"1",locationId:"undefined",floor:"undefined",row:"undefined",column:"undefined",createdDate:"undefined",itemQuantity:"undefined",sfaQuantity:"undefined"},Pt=function(e,t){return console.log(Object(E.a)(Object(E.a)({},Tt(t)),{},{type:e}),"templateData"),JSON.stringify(Object(E.a)(Object(E.a)({},Tt(t)),{},{type:e}))},Tt=function(e){var t=Object(E.a)({},Bt);return Object.entries(e).forEach((function(e){var a=Object(m.a)(e,2),n=a[0],c=a[1];t[n]&&void 0!==c&&null!==c&&(t[n]=c.toString())})),t},Mt=a(419);a(1401);var It=function(e){var t=Object(l.useRef)(),a=Object(o.e)(yt),c=Object(b.a)(),r=Object(m.a)(c,1)[0],s=Object(se.a)(["out-container-pickers.create"]),u=function(){var e=Object(o.e)((function(e){return e.warehouse.palletType.list.data})),t=Object(o.e)(Ft),a=Object(o.e)(yt),c=Object(b.a)(),i=Object(m.a)(c,1)[0],r=Object(o.d)();Object(l.useEffect)((function(){(null===e||void 0===e?void 0:e.length)||r(Object(Mt.b)())}),[]);var s=function(e){G.a.pallet.fetchPallet(e,{with:"location.shelve.area;pivotBoxes"}).then((function(e){r(_t.c.addPallet(e)),n.b.success(i("warehouse.pallet.select.success"))})).catch((function(){n.b.error(i("warehouse.pallet.add.failure"))}))};return{loadBox:function(e){a?t?r(Object(_t.d)({id:e,pallet_id:t.id})).then((function(t){t.type.includes("fulfilled")||n.b.error(i("warehouse.container.add_box.failure",{data:e}))})):n.b.warning(i("warehouse.container.warning.less_pallet")):n.b.warning(i("warehouse.container.warning.less_invoice"))},addPallet:s,addNewPallet:function(t){var a;t&&t.target.blur(),G.a.pallet.create({type_id:null===e||void 0===e||null===(a=e[0])||void 0===a?void 0:a.id}).then((function(e){Object(Dt.b)(Pt("PALLET",Object(E.a)(Object(E.a)({},e),{},{palletId:e.id,quantity:2}))),n.b.success(i("warehouse.pallet.select.success")),s(e.id)})).catch((function(){n.b.error(i("warehouse.pallet.add.empty_pallet.failure"))}))}}}(),d=u.loadBox,v=u.addPallet,f=u.addNewPallet;Object(Rt.d)({condition:function(){return s},onEnter:function(e){return h(e)}});var h=function(e){setTimeout((function(){t.current.value=""}),100),e&&(null===e||void 0===e?void 0:e.length)&&(Object(Rt.c)(e)?d(e):Object(Rt.b)(e)&&v(e))},p=Object(l.useMemo)((function(){return!a||!s}),[a,s]);return i.a.createElement("div",{className:"input-add-data"},i.a.createElement("input",{className:"form-control",placeholder:r("warehouse.container.input.barcode"),ref:t,onKeyPress:function(e){13===e.charCode&&h(e.target.value)},disabled:p}),!!a&&i.a.createElement("div",{className:"d-flex align-items-center justify-content-end"},r("warehouse.pallet.empty"),"?",i.a.createElement(de,{type:"link",onClick:f,need:["pallets.create"]},r("warehouse.pallet.create.title"))))},Vt=a(567),Lt=a(435),At=(a(1402),function(e){var t=e.onChange,a=e.value,n=e.showLabel,c=void 0===n||n,r=e.defaultQuery,s=void 0===r?{}:r,u=Object(Z.a)(e,["onChange","value","showLabel","defaultQuery"]),d=Object(o.e)((function(e){return e.warehouse.location.list.data})),v=Object(o.e)((function(e){return e.warehouse.location.list.loading})),f=Object(o.d)(),h=Object(b.a)(),p=Object(m.a)(h,1)[0],g=Object(l.useCallback)((function(e){var t,a,n,c;return{value:null===e||void 0===e?void 0:e.id,label:p("warehouse.location.option_label",{id:null===e||void 0===e?void 0:e.id,shelve_info:(null===e||void 0===e||null===(t=e.shelve)||void 0===t?void 0:t.id)?"".concat(null===e||void 0===e||null===(a=e.shelve)||void 0===a?void 0:a.id," (F").concat(null===e||void 0===e?void 0:e.floor," . R").concat(null===e||void 0===e?void 0:e.row," . C").concat(null===e||void 0===e?void 0:e.column,")"):"---",area_name:(null===e||void 0===e||null===(n=e.shelve)||void 0===n||null===(c=n.area)||void 0===c?void 0:c.name)||"---"})}}),[p]),j=null===d||void 0===d?void 0:d.map((function(e){return g(e)}));Object(Rt.d)({condition:Rt.a,onEnter:function(e){t(e)}});var O=Object(l.useCallback)((function(e){var t=Object(E.a)({},s);return Object.entries(e).forEach((function(e){var a=Object(m.a)(e,2),n=a[0],c=a[1];t[n]?t[n]+=";".concat(c):t[n]=c})),t}),[s]);return i.a.createElement(Me,Object.assign({value:a,label:c&&p("warehouse.location.title"),className:"select-location",placeholder:p("warehouse.location.find"),options:j,onChange:function(e){t&&t(e.value)},loading:v,onFetchData:function(e){f(Object(Lt.b)(O(Object(E.a)(Object(E.a)({},e),{},{with:"shelve.area"}))))}},u))}),Yt=function(e){var t=e.name,a=Object(Z.a)(e,["name"]),n=Object(W.e)(t),c=Object(m.a)(n,2),l=c[0],o=c[1],r=Object(W.g)(),s=r.setFieldTouched,u=r.setFieldValue,d=o.error,b=o.touched;return i.a.createElement("div",{className:Object(k.a)(b&&d&&"is-invalid")},i.a.createElement(At,Object.assign({value:l.value,onChange:function(e){u(t,e)},onClick:function(){s(l.name)}},a)),b&&d&&i.a.createElement("div",{className:"invalid-feedback d-block"},d))},Ht=X.d().shape({location_id:X.f().required("Required")}),Ut=function(e,t){var a=e.setLoading,n=e.closeModal,c=e.onSuccess,l=e.id,o=e.toggleFormSelected,r=Object(b.a)(),s=Object(m.a)(r,1)[0];return i.a.createElement(W.d,{initialValues:{location_id:""},enableReinitialize:!0,validationSchema:Ht,onSubmit:function(e,t){a(!0),G.a.pallet.update(l,e).then((function(e){c&&c(e),n()})).catch((function(e){J(e,t)})).finally((function(){a(!1)}))},innerRef:t},(function(e){var t=e.handleSubmit;return i.a.createElement("div",{className:"modal-save-pallet"},i.a.createElement(re.a.Body,null,i.a.createElement(W.c,null,i.a.createElement(Yt,{name:"location_id",defaultQuery:{criteria:"PalletEmpty"}}),i.a.createElement("small",null,s("warehouse.location.no_have_position")," ? ",i.a.createElement("button",{className:"btn btn-link",onClick:o},s("warehouse.location.create.title"))))),i.a.createElement(re.a.Footer,null,i.a.createElement(Vt.a,{variant:"secondary",onClick:n,className:"btn-large"},s("common.cancel")),i.a.createElement(Vt.a,{variant:"primary",onClick:t,className:"btn-large"},s("common.save"))))}))},Kt=i.a.forwardRef(Ut),zt=a(422),Qt=a(417),Gt=(a(1403),function(e){var t=e.label,a=Object(Z.a)(e,["label"]),n=Object(l.useState)(""),c=Object(m.a)(n,2),r=c[0],s=c[1],u=Object(W.e)(a),d=Object(m.a)(u,2),b=d[0],v=d[1],f=Object(W.g)(),h=f.values,p=f.setFieldValue,E=Object(o.e)((function(e){return e.warehouse.shelve.list})).data,g=Object(o.d)();Object(l.useEffect)((function(){if(h.area_id){var e={search:"area_id:".concat(h.area_id),searchJoin:"and",searchField:"area_id:="};r&&(e.search+=";id:".concat(r),e.searchField+=";id:like"),g(Object(Qt.b)(e))}}),[h.area_id,r]);var j=Object(l.useMemo)((function(){return E.map((function(e){return{value:e.id,label:e.id}}))}),[E]),w=Object(l.useCallback)(O.a.debounce((function(e){s(e)}),700),[]),_=Object(l.useMemo)((function(){if(h[b.name])return{value:h[b.name],label:h[b.name]}}),[h,b]);return i.a.createElement("div",{className:"w-100 custom-shelve-select"},i.a.createElement("label",{className:Object(k.a)(v.error&&"is-invalid","w-100")},t,i.a.createElement(Be.a,{className:"react-cm-select",value:_,options:j,onInputChange:function(e){w(e)},onChange:function(e){p(b.name,e.value)}})),v.error?i.a.createElement("div",{className:"invalid-feedback"},v.error):null)}),Jt=(a(1404),function(e,t){var a=e.onSubmit,n=e.initialValues,c=void 0===n?{area_id:"",shelve_id:"",floor:1,row:1,column:1}:n,r=Object(o.e)((function(e){return e.warehouse.area.list})),s=Object(o.d)(),u=Object(b.a)(),d=Object(m.a)(u,1)[0],v=X.d().shape({shelve_id:X.f().required(d("validation.message.required")),floor:X.c().min(1,d("validation.message.min",{min:1})),row:X.c().min(1,d("validation.message.min",{min:1})),column:X.c().min(1,d("validation.message.min",{min:1}))});Object(l.useEffect)((function(){r.length||s(Object(zt.b)())}),[]);return i.a.createElement(W.d,{initialValues:c,enableReinitialize:!0,validationSchema:v,onSubmit:function(e,t){a&&a(O.a.omit(e,"area_id"),t)},innerRef:t},i.a.createElement(W.c,{className:"form-add-location"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-6 col-sm-12"},i.a.createElement(f.k,{name:"area_id",placeholder:d("warehouse.area.title"),label:d("warehouse.area.title")},r.map((function(e,t){return i.a.createElement("option",{value:e.id,key:"select-option-".concat(t)},e.name)})))),i.a.createElement("div",{className:"col-lg-6 col-sm-12"},i.a.createElement(Gt,{name:"shelve_id",label:d("warehouse.shelve.title")}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-4 col-sm-12"},i.a.createElement(W.b,{name:"floor",label:d("common.floor"),component:f.i,type:"number"})),i.a.createElement("div",{className:"col-lg-4 col-sm-12"},i.a.createElement(W.b,{name:"row",label:d("common.row"),component:f.i,type:"number"})),i.a.createElement("div",{className:"col-lg-4 col-sm-12"},i.a.createElement(W.b,{name:"column",label:d("common.column"),component:f.i,type:"number"}))),i.a.createElement($,null)))}),Wt=i.a.forwardRef(Jt),Xt=function(e){var t,a=e.setLoading,n=e.onSuccess,c=e.toggleFormSelected,r=Object(o.e)((function(e){return e.warehouse.area.list})),s=Object(o.d)(),u=Object(l.useRef)(),d=Object(b.a)(),v=Object(m.a)(d,1)[0];return i.a.createElement("div",{className:"modal-create-location"},i.a.createElement(re.a.Body,null,i.a.createElement(Wt,{initialValues:{area_id:null===r||void 0===r||null===(t=r[0])||void 0===t?void 0:t.id,shelve_id:"",floor:1,row:1,column:1},onSubmit:function(e,t){a(!0),G.a.location.create(e).then((function(e){Object(Dt.b)(Pt("LOCATION",{locationId:e.id,floor:e.floor,row:e.row,column:e.column,quantity:2})),s(Object(Lt.b)({with:"shelve.area",orderBy:"updated_at",sortedBy:"asc"})).then((function(){n&&n(e)}))})).catch((function(e){J(e,t)})).finally((function(){a(!1)}))},ref:u})),i.a.createElement(re.a.Footer,null,i.a.createElement(Vt.a,{variant:"secondary",onClick:c,className:"btn-large"},v("common.back")),i.a.createElement(Vt.a,{variant:"primary",onClick:function(){u.current.submitForm()},className:"btn-large"},v("common.save"))))},$t=(a(1405),function(e){var t=e.show,a=e.onSuccess,n=e.id,c=e.onHide,o=Object(l.useState)("select-location"),s=Object(m.a)(o,2),u=s[0],d=s[1],v=Object(l.useState)(!1),f=Object(m.a)(v,2),h=f[0],p=f[1],E=Object(r.h)(),g=Object(l.useRef)(),j=Object(b.a)(),O=Object(m.a)(j,1)[0],w=function(e){e&&e.preventDefault(),d("select-location"===u?"create-location":"select-location")},_=function(){d("select-location"),c?c():E.goBack()};return i.a.createElement(oe.a,{show:t,onHide:_,title:O("warehouse.pallet.save.title"),actionsLoading:h},i.a.createElement("div",{className:Object(k.a)("select-location"!==u&&"d-none")},i.a.createElement(Kt,{setLoading:p,onSuccess:a,closeModal:_,id:n,toggleFormSelected:w,ref:g})),i.a.createElement("div",{className:Object(k.a)("select-location"===u&&"d-none")},i.a.createElement(Xt,{setLoading:p,onSuccess:function(e){g.current.setValues({location_id:e.id}),w()},toggleFormSelected:w})))}),Zt=(a(1406),function(e){var t=e.onChange,a=e.value,n=e.showLabel,c=void 0===n||n,r=Object(Z.a)(e,["onChange","value","showLabel"]),s=Object(o.e)((function(e){return e.warehouse.palletType.list.data})),u=Object(o.e)((function(e){return e.warehouse.palletType.list.loading})),d=Object(o.d)(),v=Object(b.a)(),f=Object(m.a)(v,1)[0],h=Object(l.useCallback)((function(e){return{value:e.id,label:f("warehouse.pallet_type.option_label",{id:e.id,max_volume:e.max_volume,max_weight:e.max_weight})}}),[f]),p=null===s||void 0===s?void 0:s.map((function(e){return h(e)}));return i.a.createElement(Me,Object.assign({value:a,label:c&&f("warehouse.pallet_type.title"),className:"select-pallet-type",placeholder:f("common.select_here"),options:p,onChange:function(e){t&&t(e.value)},loading:u,onFetchData:function(e){d(Object(Mt.b)(e))},typeSearch:"name"},r))}),ea=a(1190),ta=(a(1407),function(e){var t=Object(l.useState)({show:!1,id:""}),a=Object(m.a)(t,2),c=a[0],r=a[1],s=Object(o.e)((function(e){return e.warehouse.downContainer.listPallets.data})),u=Object(o.e)(Ft),d=Object(o.e)(yt),v=Object(b.a)(),f=Object(m.a)(v,1)[0],h=Object(o.d)();return d&&s.length?i.a.createElement("div",{className:"container-load-down-pallets"},i.a.createElement($t,Object.assign({},c,{onHide:function(){r({show:!1,id:""})}})),i.a.createElement("div",{className:"list-pallet"},s.map((function(e){var t,a;return i.a.createElement("div",{className:Object(k.a)("pallet-item",(null===u||void 0===u?void 0:u.id)===e.id&&"selected"),key:"pallet-item-".concat(e.id)},i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement("span",{onClick:function(){return t=e.id,void r({show:!0,id:t});var t},className:"save-location-icon"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Navigation/Route.svg")})),i.a.createElement("div",{className:"pallet-item--info"},i.a.createElement("div",{className:"pallet-item--id"},e.id),i.a.createElement("div",{className:"pallet-item--quantity_box"},f("warehouse.sku.quantity"),": ",e.quantity_boxes||0)),i.a.createElement(Zt,{showLabel:!1,value:null===e||void 0===e?void 0:e.type_id,onChange:function(t){return function(e,t){G.a.pallet.update(t.id,{type_id:e}).then((function(){return n.b.success(f("warehouse.pallet.update.success")),G.a.pallet.fetchPallet(t.id,{with:"location.shelve.area;pivotBoxes"})})).then((function(e){h(_t.c.addPallet(e))})).catch((function(e){console.error(e),n.b.error(f("warehouse.pallet.update.failure"))}))}(t,e)}})),i.a.createElement("div",{className:"progress-pallet"},i.a.createElement("div",{className:"progress-pallet--item"},i.a.createElement("span",{className:"text-success"},"V: "),i.a.createElement(ea.a,{variant:"success",now:null===e||void 0===e?void 0:e.boxes_volume,max:null===e||void 0===e||null===(t=e.type)||void 0===t?void 0:t.max_volume})),i.a.createElement("div",{className:"progress-pallet--item"},i.a.createElement("span",{className:"text-primary"},"W: "),i.a.createElement(ea.a,{variant:"info",now:null===e||void 0===e?void 0:e.boxes_weight,max:null===e||void 0===e||null===(a=e.type)||void 0===a?void 0:a.max_weight}))))})))):i.a.createElement(i.a.Fragment,null)}),aa=function(e){var t=e.message,a=Object(b.a)(),n=Object(m.a)(a,1)[0],c=Object(l.useMemo)((function(){return"error"===t.status?i.a.createElement("div",{className:"message-string error"},n("warehouse.container.add_pallet.failure",{data:t.pallet_id||""})):i.a.createElement("div",{className:"message-string success have-submess"},i.a.createElement("div",{className:"submess"},n("warehouse.container.add_pallet.success",{data:t.pallet_id})))}),[t,n]);return i.a.createElement("div",{className:"message-type-pallet message-wrapper"},i.a.createElement("div",{className:"time"},"[",t.time,"] ",!!t.container&&"[Cont - ".concat(t.container.id,"]")),c)},na=(a(1408),function(e){var t=e.value,a=e.onChange,n=e.text,c=e.suffix,o=Object(Z.a)(e,["value","onChange","text","suffix"]),r=Object(l.useState)(!1),s=Object(m.a)(r,2),u=s[0],d=s[1],b=Object(l.useRef)();Object(l.useEffect)((function(){(null===b||void 0===b?void 0:b.current)&&b.current.focus()}),[b,u]);var v=function(){return d(!u)};return u?i.a.createElement("span",{className:Object(k.a)("editable-input",c&&"has-suffix")},i.a.createElement("input",Object.assign({defaultValue:t||"",className:"form-control ediable-text-input",onKeyPress:function(e){13===e.charCode&&(e.target.value!==t&&a&&a(e.target.value),v())},ref:b},o)),!!c&&i.a.createElement("span",{className:"suffix"},c)):i.a.createElement("span",{className:"ediable-text"},n||t,i.a.createElement("span",{className:"svg-icon svg-icon-md svg-icon-primary cursor-pointer",onClick:v},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Communication/Write.svg")})))}),ca=function(e){var t=e.message,a=e.onRemove,n=e.onEdit,c=e.isCanUpdate,l=e.isCanDelete,o=Object(b.a)(),r=Object(m.a)(o,1)[0];return i.a.createElement("div",{className:"message-type-notify message-wrapper"},i.a.createElement("div",{className:"time"},"[",t.time,"] ",!!t.container&&"[Cont - ".concat(t.container.id,"]")),i.a.createElement("div",{className:"message-string warning"},r(t.transObj.id,t.transObj.value)),t.id&&i.a.createElement(i.a.Fragment,null,c&&i.a.createElement(na,{value:t.quantity,onChange:function(e){e!==t.quantity&&n&&n(Object(E.a)(Object(E.a)({},t),{},{newQuantity:e}))},text:" ",type:"number",min:1}),l&&i.a.createElement("div",{className:"delete-message svg-icon svg-icon-danger",onClick:function(){a&&a(t)}},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/General/Trash.svg")}))))},la=function(e){var t=e.message,a=e.onRemove,n=e.onEdit,c=e.isCanUpdate,o=e.isCanDelete,r=Object(b.a)(),s=Object(m.a)(r,1)[0],u=Object(l.useMemo)((function(){return"error"===t.status?i.a.createElement("div",{className:"message-string error"},s("warehouse.container.add_box.failure",{data:t.box_id||""})):i.a.createElement("div",{className:"message-string success"},s("warehouse.container.add_box.success",{quantity:(null===t||void 0===t?void 0:t.quantity)||1,box_id:t.box_id}))}),[t,s]);return i.a.createElement("div",{className:"message-type-box message-wrapper"},i.a.createElement("div",{className:"time"},"[",t.time,"] ",!!t.container&&"[Cont - ".concat(t.container.id,"]")," ",t.palletId&&"[Pallet - ".concat(t.palletId,"]")),u,t.id&&i.a.createElement(i.a.Fragment,null,!!n&&c&&i.a.createElement(na,{value:t.quantity,onChange:function(e){e!==t.quantity&&n&&n(Object(E.a)(Object(E.a)({},t),{},{newQuantity:e}))},text:" ",type:"number",min:1}),!!a&&o&&i.a.createElement("div",{className:"delete-message svg-icon svg-icon-danger",onClick:function(){a&&a(t)}},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/General/Trash.svg")}))))},ia=(a(1409),function(e){var t=e.messages,a=void 0===t?[]:t,n=e.onDelete,c=e.onEdit,o=e.permissions,r=Object(se.a)(o.update),s=Object(se.a)(o.delete),u=Object(l.useMemo)((function(){return a.map((function(e,t){return i.a.createElement("div",{className:"message",key:"message-".concat(t)},"PALLET"===e.type&&i.a.createElement(aa,{message:e}),"NOTIFY"===e.type&&i.a.createElement(ca,{message:e,onRemove:n,isCanUpdate:r,isCanDelete:s,onEdit:c}),"BOX"===e.type&&i.a.createElement(la,{message:e,onRemove:n,isCanUpdate:r,isCanDelete:s,onEdit:c}))}))}),[a,n,c,r,s]);return i.a.createElement("div",{className:"io-message-wrapper"},i.a.createElement("div",{className:"io-message-box shadow-sm"},u))}),oa=(a(1410),function(e){var t=Object(o.e)(qt),a=Object(o.e)(yt),c=Object(o.d)(),l=Object(b.a)(),r=Object(m.a)(l,1)[0];return i.a.createElement(f.c,{className:"process-section"},i.a.createElement(It,null),i.a.createElement(ta,null),i.a.createElement(ia,{messages:t,messageKey:null===a||void 0===a?void 0:a.id,onDelete:function(e){G.a.outContainerPicker.delete(e.id).then((function(){n.b.success(r("warehouse.io.delete.success")),c(_t.c.removeBoxByPickerId(e.id))})).catch((function(){n.b.error(r("warehouse.io.delete.failure"))}))},onEdit:function(e){var t=e.newQuantity,a=Object(Z.a)(e,["newQuantity"]);Number(t)>0&&G.a.outContainerPicker.update(a.id,{quantity:Number(t)}).then((function(){n.b.success(r("warehouse.io.update.success")),c(_t.c.updateBoxQuantity(Object(E.a)({newQuantity:Number(t)},a)))})).catch((function(){n.b.error(r("warehouse.io.update.failure"))}))},permissions:{update:["out-container-pickers.update"],delete:["out-container-pickers.delete"]}}))}),ra=(a(1411),function(e){return{value:e.id,label:"Invoice ".concat(e.id)}}),sa=function(e){var t,a,n,c,r=Object(o.e)((function(e){return e.warehouse.downContainer.listInvoices.data})),s=Object(o.e)((function(e){return e.warehouse.downContainer.listPallets.data})),u=Object(o.e)(yt),d=Object(o.d)(),v=Object(b.a)(),h=Object(m.a)(v,1)[0];Object(l.useEffect)((function(){r.length&&!u&&d(_t.c.setCurrentContainer(r[0]))}),[r,u]);var p=Object(l.useMemo)((function(){return u?u.in_pickers.reduce((function(e,t){return e+t.volume||0}),0):0}),[u]),g=Object(l.useMemo)((function(){return u?u.in_pickers.reduce((function(e,t){var a;return e+((null===t||void 0===t||null===(a=t.box)||void 0===a?void 0:a.weight_per_box)||0)*t.quantity}),0):0}),[u]),j=Object(l.useMemo)((function(){if(!u)return 0;var e=u.out_pickers.reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.volume)||0}),0);return p-e}),[u,p]),w=Object(l.useMemo)((function(){if(!u)return 0;var e=u.out_pickers.reduce((function(e,t){var a;return e+((null===t||void 0===t||null===(a=t.box)||void 0===a?void 0:a.weight_per_box)||0)*t.quantity}),0);return g-e}),[u,g]),_=Object(l.useMemo)((function(){return u?ra(u):""}),[u]),y=Object(l.useCallback)((function(e){e.target.style.display="none",s.forEach((function(e){e.pivot_boxes.forEach((function(t){t.id?N(t):x(Object(E.a)(Object(E.a)({},t),{},{pallet_id:e.id}))}))}))}),[s]),N=function(e){G.a.palletBoxes.update(e.id,{quantity:e.quantity})},x=function(e){G.a.palletBoxes.create(e)};return r.length?i.a.createElement(f.c,{className:"container-status"},i.a.createElement("div",{className:"container-status-head card-header"},i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement("div",{className:"select-current-container"},i.a.createElement(Be.a,{value:_,options:r.map((function(e){return ra(e)})),onChange:function(e){var t=e.value,a=O.a.find(r,["id",t]);a&&d(_t.c.setCurrentContainer(a))}})),i.a.createElement(de,{type:"primary",className:"ml-3",need:["out-container-pickers.create","out-container-pickers.update"],permissionJoin:"and",onClick:y},h("warehouse.container.close_container"))),i.a.createElement("button",{className:"btn btn-link",onClick:function(){d(_t.c.resetSlice())}},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Media/Shuffle.svg"),className:"mr-3"}),h("warehouse.container.reset_data"))),i.a.createElement(f.d,null,i.a.createElement("div",{className:"point-data d-flex"},i.a.createElement("div",{className:"invoice-data"},i.a.createElement("div",{className:"d-flex"},i.a.createElement("div",{className:"progress-section-title"},h("warehouse.container.theoretical_volume"),": "),i.a.createElement("div",{className:"invoice-volume invoice-value"},Object(he.a)(null===u||void 0===u?void 0:u.volume))),i.a.createElement("div",{className:"d-flex"},i.a.createElement("div",{className:"progress-section-title"},h("warehouse.container.theoretical_weight"),": "),i.a.createElement("div",{className:"invoice-weight invoice-value"},Object(he.a)(null===u||void 0===u?void 0:u.weight)))),i.a.createElement("div",{className:"load-up-cont-data"},i.a.createElement("div",{className:"d-flex"},i.a.createElement("div",{className:"progress-section-title"},h("warehouse.container.cut_off_volume"),": "),i.a.createElement("div",{className:"invoice-volume invoice-value"},Object(he.a)(p))),i.a.createElement("div",{className:"d-flex"},i.a.createElement("div",{className:"progress-section-title"},h("warehouse.container.cut_off_weight"),": "),i.a.createElement("div",{className:"invoice-weight invoice-value"},Object(he.a)(g))))),i.a.createElement("div",{className:"container-status-progress"},i.a.createElement("div",{className:"progress-section"},i.a.createElement("div",{className:"progress-section-title mt-5"},h("warehouse.container.current_volume"),": "),i.a.createElement("div",{className:"status-percent"},i.a.createElement(ea.a,{animated:!0,max:1*(null===u||void 0===u||null===(t=u.type)||void 0===t?void 0:t.volume),now:j,label:i.a.createElement("div",{className:"progress-lable"},Object(he.a)(j)," / ",Object(he.a)(1*(null===u||void 0===u||null===(a=u.type)||void 0===a?void 0:a.volume))),variant:"primary"}))),i.a.createElement("div",{className:"progress-section"},i.a.createElement("div",{className:"progress-section-title mt-5"},h("warehouse.container.current_weight"),": "),i.a.createElement("div",{className:"status-percent"},i.a.createElement(ea.a,{animated:!0,max:1e3*(null===u||void 0===u||null===(n=u.type)||void 0===n?void 0:n.weight),now:w,label:i.a.createElement("div",{className:"progress-lable"},Object(he.a)(w)," / ",Object(he.a)(1e3*(null===u||void 0===u||null===(c=u.type)||void 0===c?void 0:c.weight))),variant:"primary"})))))):i.a.createElement(i.a.Fragment,null)},ua=function(e){var t=Object(b.a)(),a=Object(m.a)(t,1)[0];return i.a.createElement(p,{title:a("MENU.WAREHOUSE.DOWN_CONTAINER")},i.a.createElement("div",{className:"down-container"},i.a.createElement(sa,null),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-4 col-md-5 col-sm-12"},i.a.createElement(St,null)),i.a.createElement("div",{className:"col-lg-8 col-md-7 col-sm-12"},i.a.createElement(oa,null)))))},da=a(418);function ma(){var e=Object(o.d)(),t=Object(r.j)();return function(a){e(Object(da.c)(Object(E.a)({id:null===t||void 0===t?void 0:t.id,with:"pivotBoxes.boxLadingBill.owningBox"},a)))}}var ba=function(e){var t=e.isEdit,a=e.onSubmit,n=e.onEdit,c=e.onCancel,l=Object(b.a)(),o=Object(m.a)(l,1)[0];return i.a.createElement("div",null,t?i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{className:"btn btn-secondary",onClick:c},o("common.cancel")),i.a.createElement("button",{className:"btn btn-primary ml-3",onClick:a},o("common.save"))):i.a.createElement("button",{className:"btn btn-primary",onClick:n},o("common.edit")))},va=(a(1412),a(424)),fa=(a(1413),function(e){var t=e.onChange,a=e.value,n=e.showLabel,c=void 0===n||n,r=Object(Z.a)(e,["onChange","value","showLabel"]),s=Object(o.e)((function(e){return e.warehouse.deliveryPartner.list.data})),u=Object(o.e)((function(e){return e.warehouse.deliveryPartner.list.loading})),d=Object(o.d)(),v=Object(b.a)(),f=Object(m.a)(v,1)[0],h=Object(l.useCallback)((function(e){return{value:e.id,label:e.name}}),[]),p=null===s||void 0===s?void 0:s.map((function(e){return h(e)}));return i.a.createElement(Me,Object.assign({value:a,label:c&&f("warehouse.delivery_partner.title"),placeholder:f("warehouse.delivery_partner.find"),options:p,onChange:function(e){t&&t(e.value)},loading:u,onFetchData:function(e){d(Object(va.c)(e))},className:"select-delivery-partner",typeSearch:"name"},r))}),ha=function(e){var t=e.name,a=Object(Z.a)(e,["name"]),n=Object(W.e)(t),c=Object(m.a)(n,2),l=c[0],o=c[1],r=Object(W.g)(),s=r.setFieldTouched,u=r.setFieldValue,d=o.error,b=o.touched;return i.a.createElement("div",{className:Object(k.a)(b&&d&&"is-invalid")},i.a.createElement(fa,Object.assign({value:l.value,onChange:function(e){u(t,e)},onClick:function(){s(l.name)}},a)),b&&d&&i.a.createElement("div",{className:"invalid-feedback d-block"},d))},pa=a(557),Ea=(a(1414),function(e){var t=e.onChange,a=e.value,n=e.showLabel,c=void 0===n||n,r=Object(Z.a)(e,["onChange","value","showLabel"]),s=Object(o.e)((function(e){return e.warehouse.goodsDeliveryStatus.list.data})),u=Object(o.e)((function(e){return e.warehouse.goodsDeliveryStatus.list.loading})),d=Object(o.d)(),v=Object(b.a)(),f=Object(m.a)(v,1)[0],h=Object(l.useCallback)((function(e){return{value:e.id,label:e.name}}),[]),p=null===s||void 0===s?void 0:s.map((function(e){return h(e)}));return i.a.createElement(Me,Object.assign({value:a,label:c&&f("warehouse.goods_delivery_status.title"),className:"select-delivery-partner",placeholder:f("warehouse.goods_delivery_status.find"),options:p,onChange:function(e){t&&t(e.value)},loading:u,onFetchData:function(e){d(Object(pa.b)(e))},typeSearch:"name"},r))}),ga=function(e){var t=e.name,a=Object(Z.a)(e,["name"]),n=Object(W.e)(t),c=Object(m.a)(n,2),l=c[0],o=c[1],r=Object(W.g)(),s=r.setFieldTouched,u=r.setFieldValue,d=o.error,b=o.touched;return i.a.createElement("div",{className:Object(k.a)(b&&d&&"is-invalid")},i.a.createElement(Ea,Object.assign({value:l.value,onChange:function(e){u(t,e)},onClick:function(){s(l.name)}},a)),b&&d&&i.a.createElement("div",{className:"invalid-feedback d-block"},d))},ja=a(397),Oa=(a(1415),function(e){var t=e.onChange,a=e.value,n=(e.customer_id,Object(Z.a)(e,["onChange","value","customer_id"])),c=Object(o.e)((function(e){return e.order.shipmentInfo.shipmentInfoList})),r=Object(o.e)((function(e){return e.order.shipmentInfo.isLoading})),s=Object(o.d)(),u=Object(b.a)(),d=Object(m.a)(u,1)[0],v=Object(l.useMemo)((function(){return c.map((function(e){return function(e){return{value:e.id,label:"".concat(e.consignee," - ").concat(e.address)}}(e)}))}),[c]);return i.a.createElement(Me,Object.assign({value:a,label:d("warehouse.shipment_info.title"),className:"select-shipment-info",placeholder:d("common.select_here"),options:v,onChange:function(e){t&&t(e.value)},loading:r,onFetchData:function(e){s(Object(ja.b)(e))},typeSearch:"consignee"},n))}),wa=function(e){e.value;var t=e.isDisabled,a=e.customer_id,n=Object(Z.a)(e,["value","isDisabled","customer_id"]),c=Object(W.e)(n),l=Object(m.a)(c,3),o=l[0],r=l[1],s=l[2],u=Object(W.g)().setFieldTouched,d=r.error,b=r.touched;return i.a.createElement("div",{className:Object(k.a)(b&&d&&"is-invalid")},i.a.createElement(Oa,{value:o.value,onChange:function(e){s.setValue(e)},isDisabled:t,customer_id:a,onClick:function(){u(o.name)}}),b&&d&&i.a.createElement("div",{className:"invalid-feedback d-block"},d))},_a=function(e,t){var a=e.onSubmit,n=e.initialValues,c=void 0===n?{partner_id:"",status_id:"",shipping_cost:0,shipment_info_id:""}:n,l=e.isEdit,o=void 0===l||l,r=e.formItemClassName,s=void 0===r?"col-lg-6 col-sm-12":r,u=e.showStatus,d=void 0===u||u,v=Object(b.a)(),h=Object(m.a)(v,1)[0],p=X.d().shape({status_id:X.f().required(h("validation.message.required")),shipping_cost:X.c().required(h("validation.message.required")),shipment_info_id:X.f().required(h("validation.message.required"))});return i.a.createElement(W.d,{enableReinitialize:!0,initialValues:c,validationSchema:p,onSubmit:a,innerRef:t},i.a.createElement(W.c,{className:"form form-add-goods-delivery row"},i.a.createElement("div",{className:s},i.a.createElement(ha,{name:"partner_id",isDisabled:!o})),d&&i.a.createElement("div",{className:s},i.a.createElement(ga,{name:"status_id",isDisabled:!o})),i.a.createElement("div",{className:s},i.a.createElement(wa,{name:"shipment_info_id",isDisabled:!o})),i.a.createElement("div",{className:s},i.a.createElement(W.b,{name:"shipping_cost",component:f.i,placeholder:h("warehouse.cost.shipping"),type:"number",label:h("warehouse.cost.shipping"),shouldUpdate:function(){return!0},disabled:!o}))))},ya=i.a.forwardRef(_a),Na=function(e){var t=Object(o.e)((function(e){return e.warehouse.goodsDelivery.detail})),a=t.data,c=t.loading,r=Object(l.useState)(!1),s=Object(m.a)(r,2),u=s[0],d=s[1],v=Object(b.a)(),h=Object(m.a)(v,1)[0],p=Object(l.useRef)(),E=ma();return i.a.createElement(f.c,{className:"goods-delivery-info"},i.a.createElement(f.e,{title:h("warehouse.goods_delivery.info.title")},i.a.createElement(V.a,{need:["goods-deliveries.update"]},i.a.createElement(f.f,null,i.a.createElement(ba,{isEdit:u,onEdit:function(){d(!0)},onSubmit:function(){p.current.submitForm()},onCancel:function(){d(!1),p.current.resetForm()}})))),i.a.createElement(f.d,{className:"position-relative"},c&&i.a.createElement(x.a,{local:!0}),i.a.createElement(ya,{ref:p,onSubmit:function(e,t){G.a.goodsDelivery.update(a.id,O.a.pick(e,["partner_id","status_id","shipping_cost"])).then((function(){n.b.success(h("warehouse.goods_delivery.update.success")),d(!1),E()})).catch((function(e){console.error(e),J(e,t),n.b.error(h("warehouse.goods_delivery.update.failure"))}))},initialValues:a,isEdit:u,formItemClassName:"col-lg-4 col-sm-12"})))},xa=(a(1416),function(e){return i.a.createElement(f.c,{className:"not-found"},i.a.createElement(f.d,null,i.a.createElement("div",{className:"not-found-text"},"No - content - founded")))}),ka=(a(1417),Object(ge.a)((function(e){return{root:{},pagination:{display:"flex",marginTop:e.spacing(2),marginBottom:e.spacing(2),justifyContent:"flex-end"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})));function Ca(e){var t=e.columns,a=e.rows,n=e.page,c=e.lastpage,o=e.onPageChange,r=e.onDelete,s=e.onViewEdit,u=e.isPagination,d=e.isAction,b=e.isDelete,v=e.isViewEdit,f=e.additionalActions,h=e.onSort,p=void 0===h?null:h,E=e.rowKey,g=e.className,j=e.noSTT,w=e.permissions,_=ka(),y=i.a.useState("asc"),N=Object(m.a)(y,2),x=N[0],k=N[1],S=Object(l.useState)(""),R=Object(m.a)(S,2),F=R[0],D=R[1],B=Object(l.useMemo)((function(){return E||t[0].id}),[t,E]);return i.a.createElement("div",{className:"tmn-custom-table"},i.a.createElement("div",{className:"tmn-custom-table__wrapper"},i.a.createElement(je.a,{minWidth:1050},i.a.createElement(Oe.a,{className:g},i.a.createElement(we.a,null,i.a.createElement(_e.a,null,!j&&i.a.createElement(ye.a,null,i.a.createElement("span",null,"STT")),t.map((function(e){return i.a.createElement(ye.a,{key:e.id},e.isSort?i.a.createElement(ot.a,{active:F===e.id,direction:F===e.id?x:"asc",onClick:function(){return function(e){var t=F===e&&"asc"===x?"desc":"asc";k(t),D(e),p&&p(e,t)}(e.id)}},e.title,F===e.id&&e.disablePadding?i.a.createElement("span",{className:_.visuallyHidden},"desc"===x?"sorted descending":"sorted ascending"):null):e.title)})),d&&i.a.createElement(ye.a,{className:"text-center"},i.a.createElement("span",{className:_.title},"#")))),i.a.createElement(Ne.a,null,a.map((function(e,a){return i.a.createElement(_e.a,{hover:!0,key:a},!j&&i.a.createElement(ye.a,null,a+1),t.map((function(t){return i.a.createElement(ye.a,{key:t.id},function(e,t){return t.render?t.render(O.a.get(e,t.id),e):O.a.get(e,t.id)}(e,t))})),d&&i.a.createElement(ye.a,{style:{width:"12%"}},f.map((function(t,a){return i.a.createElement(i.a.Fragment,{key:"action-item-".concat(a)},t(e))})),v&&i.a.createElement(V.a,{need:null===w||void 0===w?void 0:w.update},i.a.createElement("button",{className:"btn btn-icon btn-light btn-hover-primary btn-sm mx-3",onClick:function(){return function(e,t){s&&s(e,t)}(e[B],e)}},i.a.createElement("span",{className:"svg-icon svg-icon-md svg-icon-primary"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Communication/Write.svg")})))),b&&i.a.createElement(V.a,{need:null===w||void 0===w?void 0:w.delete},i.a.createElement("button",{className:"btn btn-icon btn-light btn-hover-danger btn-sm",onClick:function(){return t=e[B],void(r&&r(t));var t}},i.a.createElement("span",{className:"svg-icon svg-icon-md svg-icon-danger"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/General/Trash.svg")}))))))})))))),u&&i.a.createElement(I.a,{className:_.pagination,count:c,page:n,shape:"rounded",onChange:function(e,t){o&&o(t)}}))}Ca.defaultProps={className:"",columns:[],rows:[],onPageChange:null,onDelete:null,onViewEdit:null,page:1,lastpage:1,isPagination:!0,isAction:!0,isDelete:!0,isViewEdit:!0,additionalActions:[],rowKey:void 0,noSTT:!1,permissions:{}};var Sa=Ca,qa=function(e,t){var a=e.onHide,n=e.onOk,c=Object(Z.a)(e,["onHide","onOk"]),o=Object(l.useState)(!1),r=Object(m.a)(o,2),s=r[0],u=r[1],d=Object(l.useState)(),v=Object(m.a)(d,2),f=v[0],h=v[1],p=Object(b.a)(),E=Object(m.a)(p,1)[0],g=Object(l.useState)(E("common.confirm")),j=Object(m.a)(g,2),O=j[0],w=j[1];Object(l.useImperativeHandle)(t,(function(){return{open:function(e){var t=e.title,a=Object(Z.a)(e,["title"]);u(!0),h(a),w(t)}}}));var _=function(){u(!1),a&&a(f)};return i.a.createElement(re.a,Object.assign({show:s,onHide:_,"aria-labelledby":"example-modal-sizes-title-lg"},c),i.a.createElement(re.a.Header,{closeButton:!0},i.a.createElement(re.a.Title,{id:"example-modal-sizes-title-lg"},O)),i.a.createElement(re.a.Footer,null,i.a.createElement("div",null,i.a.createElement("button",{type:"button",onClick:_,className:"btn btn-light btn-elevate"},E("common.skip")),i.a.createElement(i.a.Fragment,null," "),i.a.createElement("button",{type:"button",onClick:function(){u(!1),n&&n(f)},className:"btn btn-primary btn-elevate"},E("common.confirm")))))},Ra=i.a.forwardRef(qa);function Fa(e){var t=e.onRefresh,a=Object(o.e)((function(e){var t;return null===(t=e.warehouse.goodsDelivery.detail.data)||void 0===t?void 0:t.pivot_boxes})),c=Object(r.j)(),s=Object(l.useRef)(),u=Object(l.useRef)([]),d=Object(b.a)(),v=Object(m.a)(d,1)[0];Object(l.useEffect)((function(){(null===a||void 0===a?void 0:a.length)&&a.forEach((function(e){u.current[e.id]&&(u.current[e.id].value=null===e||void 0===e?void 0:e.quantity)}))}),[a]);var f=Object(l.useCallback)(O.a.debounce((function(e,a){if(null===c||void 0===c?void 0:c.id){var l,i=a.quantity+a.box_lading_bill.quantity_avaliable_in_goods_delivery;if(e>i)return n.b.warning(v("validation.message.max_sku_quantity_available",{max:i})),void((null===u||void 0===u||null===(l=u.current)||void 0===l?void 0:l[a.id])&&(u.current[a.id].value=a.quantity));G.a.goodsDeliveryBoxes.update(null===a||void 0===a?void 0:a.id,{quantity:e}).then((function(){t&&t(),n.b.success(v("warehouse.sku.pivot.lading_bill.update_quantity.success"))})).catch((function(e){var t,a,c,l=v("warehouse.sku.pivot.lading_bill.update_quantity.failure");(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a||null===(c=a.errors)||void 0===c?void 0:c.message)&&(l=e.response.data.errors.message),n.b.error(l)}))}}),700),[]);return[Object(l.useMemo)((function(){return[{id:["box_lading_bill","owning_box","box_id"],title:v("warehouse.sku.title")},{id:["box_lading_bill","owning_box","objectable_id"],title:v("warehouse.sku.owner.title"),render:function(e,t){var a=t.box_lading_bill;return i.a.createElement("div",{className:"owner-object"},i.a.createElement("span",{className:"object-type"},"user"===a.owning_box.objectable_type?v("common.customer"):v("common.the_order")),i.a.createElement("span",null," - "),i.a.createElement("span",{className:"object-id"},v("common.code"),": ",e))}},{id:["quantity"],title:v("common.quantity"),render:function(e,t){return i.a.createElement(V.a,{need:["goods-deliveries.update"],fallback:e},i.a.createElement("input",{name:t.id,ref:function(e){return u.current[t.id]=e},className:"form-control",type:"number",onKeyPress:function(e){return function(e,t){13===e.charCode&&f(e.target.value,t)}(e,t)}}))}},{id:"id",render:function(e,t){return i.a.createElement(V.a,{need:["goods-deliveries.update"]},i.a.createElement("button",{className:"btn btn-icon btn-light btn-hover-danger btn-sm",onClick:function(){return function(e){s.current.open(Object(E.a)({title:"".concat(v("warehouse.sku.pivot.lading_bill.update_quantity.title"),"?")},e))}(t)}},i.a.createElement("span",{className:"svg-icon svg-icon-md svg-icon-danger"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/General/Trash.svg")}))))}}]}),[]),s]}a(1418);var Da=function(e){var t=e.onRefresh,a=Object(o.e)((function(e){var t;return null===(t=e.warehouse.goodsDelivery.detail.data)||void 0===t?void 0:t.pivot_boxes})),c=Object(b.a)(),l=Object(m.a)(c,1)[0],r=Fa({onRefresh:t}),s=Object(m.a)(r,2),u=s[0],d=s[1];return(null===a||void 0===a?void 0:a.length)?i.a.createElement("div",null,i.a.createElement(Ra,{ref:d,onOk:function(e){var a=e.id;G.a.goodsDeliveryBoxes.delete(a).then((function(){t&&t(),n.b.success(l("warehouse.goods_delivery.pivot.box_lading_bill.delete.success"))})).catch((function(){n.b.error(l("warehouse.goods_delivery.pivot.box_lading_bill.delete.failure"))}))}}),i.a.createElement(Sa,{columns:u,rows:a,isViewEdit:!1,isDelete:!1,isAction:!1,className:"table-list-box-in-goods-delivery"})):i.a.createElement(Re.a,{emptyText:l("warehouse.goods_delivery.pivot.box_lading_bill.empty")})},Ba=function(e){var t=e.name,a=Object(Z.a)(e,["name"]),n=Object(W.e)(t),c=Object(m.a)(n,2),l=c[0],o=c[1],r=Object(W.g)(),s=r.setFieldTouched,u=r.setFieldValue,d=o.error,b=o.touched;return i.a.createElement("div",{className:Object(k.a)(b&&d&&"is-invalid")},i.a.createElement(et,Object.assign({value:l.value,onChange:function(e){u(t,e)},onClick:function(){s(l.name)}},a)),b&&d&&i.a.createElement("div",{className:"invalid-feedback d-block"},d))},Pa=a(1246),Ta=a(1259),Ma=a(1605),Ia=a(1617),Va=(a(1419),function(e){var t=e.boxes,a=void 0===t?[]:t,n=e.pagination,c=e.onChangePage,o=e.loading,r=Object(W.g)(),s=r.values,u=r.setFieldValue,d=Object(b.a)(),v=Object(m.a)(d,1)[0],f=Object(l.useCallback)((function(e){return O.a.findIndex(s.boxes,(function(t){return t.id==e.id}))}),[s.boxes]),h=function(e){var t=f({id:e.target.name}),a=Object(fe.a)(s.boxes);a[t]=Object(E.a)(Object(E.a)({},a[t]),{},{quantity:e.target.value}),u("boxes",a)};return a.length?i.a.createElement("div",{className:"list-box-for-form-add-goods-delivery-boxes"},i.a.createElement("div",{className:"position-relative boxes-list"},o&&i.a.createElement(x.a,{local:!0}),i.a.createElement(Pa.a,{className:"row list-items"},a.map((function(e){var t,a,n="checkbox-list-label-".concat(e.id);return i.a.createElement("div",{className:"col-lg-6 col-sm-12",key:e.id},i.a.createElement(Ta.a,{role:void 0,dense:!0,button:!0,onClick:(a=e,function(){var e=f(a),t=Object(fe.a)(s.boxes);-1===e?t.push(Object(E.a)(Object(E.a)({},a),{},{quantity:(null===a||void 0===a?void 0:a.quantity)||1})):t.splice(e,1),u("boxes",t)})},i.a.createElement(Ma.a,null,i.a.createElement(Ia.a,{edge:"start",checked:-1!==f(e),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":n}})),i.a.createElement("div",{className:"item-box"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Shopping/Box4.svg")})," ",i.a.createElement("span",{className:"item-box-id"},null===e||void 0===e||null===(t=e.owning_box)||void 0===t?void 0:t.box_id))),i.a.createElement("div",{className:Object(k.a)("item-quantity",-1!==f(e)?"":"d-none")},v("common.quantity"),": ",i.a.createElement("input",{name:e.id,className:"ml-3 form-control",defaultValue:(null===e||void 0===e?void 0:e.quantity)||1,min:1,type:"number",max:null===e||void 0===e?void 0:e.quantity,onChange:h})))})))),n&&i.a.createElement(I.a,{className:"mt-3",count:n.lastPage,page:n.page,shape:"rounded",onChange:function(e,t){c&&c(t)}})):i.a.createElement(Re.a,null)});var La=function(e){var t=function(e){var t=Object(l.useState)([]),a=Object(m.a)(t,2),c=a[0],i=a[1],o=Object(l.useState)({page:1,lastPage:0}),r=Object(m.a)(o,2),s=r[0],u=r[1],d=Object(l.useState)(!1),v=Object(m.a)(d,2),f=v[0],h=v[1],p=Object(b.a)(),g=Object(m.a)(p,1)[0];Object(l.useEffect)((function(){e&&j()}),[e,s.page]);var j=function(){h(!0),G.a.boxLadingBill.fetchBoxLadingBills({search:"lading_bill_id:".concat(e),searchFields:"lading_bill_id:=",page:s.page,with:"owningBox"}).then((function(e){i(e.data),u({page:1,lastPage:e.last_page})})).catch((function(e){console.error(e),i([]),n.b.error(g("common.fetch.failure"))})).finally((function(){h(!1)}))};return{boxes:c,pagination:s,loading:f,setPage:function(e){u(Object(E.a)(Object(E.a)({},s),{},{page:e}))}}}(Object(W.g)().values.lading_bill_id),a=t.pagination,c=t.loading,o=t.boxes,r=t.setPage;return i.a.createElement(W.c,{className:"form form-add-box-to-lading-bill"},i.a.createElement(Ba,{name:"lading_bill_id"}),i.a.createElement(Va,{boxes:o,loading:c,pagination:a,onChangePage:r}))},Aa=function(e,t){var a=e.onSubmit,n=e.initialValues,c=void 0===n?{lading_bill_id:"",boxes:[]}:n;return i.a.createElement(W.d,{onSubmit:a,initialValues:c,innerRef:t},i.a.createElement(La,null))},Ya=i.a.forwardRef(Aa),Ha=function(e){var t=e.onSuccess,a=e.show,c=Object(l.useState)(!1),o=Object(m.a)(c,2),s=o[0],u=o[1],d=Object(r.h)(),v=Object(b.a)(),f=Object(m.a)(v,1)[0],h=Object(l.useRef)(),p=Object(r.j)(),E=function(){d.goBack()};return i.a.createElement(oe.a,{show:a,title:f("warehouse.goods_delivery.pivot.box_lading_bill.create.title"),onHide:E,actionsLoading:s},i.a.createElement(re.a.Body,null,i.a.createElement(Ya,{onSubmit:function(e){if(e.boxes.length)return u(!0),Promise.all(e.boxes.map((function(e){var t=e.id,a=e.quantity;return G.a.goodsDeliveryBoxes.create({goods_delivery_id:null===p||void 0===p?void 0:p.id,box_lading_bill_id:t,quantity:a})}))).then((function(e){n.b.success(f("warehouse.goods_delivery.pivot.box_lading_bill.create.success")),t&&t(),d.goBack()})).catch((function(e){console.error(e),n.b.error(f("warehouse.goods_delivery.pivot.box_lading_bill.create.failure"))})).finally((function(){u(!1)}))},ref:h})),i.a.createElement(re.a.Footer,null,i.a.createElement(de,{type:"secondary",loading:s,onClick:E},f("common.cancel")),i.a.createElement(de,{type:"primary",loading:s,onClick:function(){h.current.submitForm()}},f("common.save"))))},Ua=function(e){var t=Object(b.a)(),a=Object(m.a)(t,1)[0],n=ma(),c=Object(r.h)(),l=Object(r.k)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{need:["goods-deliveries.update"]},i.a.createElement(r.c,{path:"".concat(l.path,"/add-box-to-goods-delivery")},(function(e){var t=e.match;return i.a.createElement(Ha,{show:null!==t,onSuccess:n})}))),i.a.createElement(f.c,null,i.a.createElement(f.e,{title:a("warehouse.sku.list.title")},i.a.createElement(V.a,{need:["goods-deliveries.update"]},i.a.createElement(f.f,null,i.a.createElement("button",{className:"btn btn-primary",onClick:function(){c.push("".concat(l.url,"/add-box-to-goods-delivery"))}},a("warehouse.goods_delivery.pivot.box_lading_bill.create.title"))))),i.a.createElement(f.d,null,i.a.createElement(Da,{onRefresh:n}))))},Ka=function(e){var t=Object(o.e)((function(e){return e.warehouse.goodsDelivery.detail})),a=t.data,n=t.loading,c=Object(b.a)(),s=Object(m.a)(c,1)[0],u=Object(r.j)(),d=ma();return Object(l.useEffect)((function(){(null===u||void 0===u?void 0:u.id)&&d()}),[null===u||void 0===u?void 0:u.id]),a||n?i.a.createElement(p,{title:"".concat(s("warehouse.goods_delivery.title")," - ").concat(u.id)},i.a.createElement(Na,null),i.a.createElement(Ua,null)):i.a.createElement(xa,null)};a(1420);var za=function(e){var t=e.onRefresh,a=Object(o.e)((function(e){return e.warehouse.goodsDelivery.list})),c=a.data,l=a.pagination,s=function(){var e=Object(b.a)(),t=Object(m.a)(e,1)[0];return[{id:["delivery_partner","name"],title:t("warehouse.delivery_partner.title"),render:function(e){return e||"---"}},{id:["goods_delivery_status","name"],title:t("warehouse.goods_delivery_status.title")},{id:"shipping_cost",title:t("warehouse.cost.shipping"),render:function(e){return Object(he.a)(e)}},{id:"box_lading_bills",title:t("warehouse.sku.quantity"),render:function(e){return e&&e.reduce((function(e,t){var a;return e+((null===t||void 0===t||null===(a=t.pivot)||void 0===a?void 0:a.quantity)||0)}),0),Object(he.a)(0)}}]}(),u=Object(b.a)(),d=Object(m.a)(u,1)[0],v=Object(r.h)(),f=Object(r.k)(),h=Object(o.d)(),p=function(e){G.a.goodsDelivery.delete(e).then((function(){t&&t(),n.b.success(d("warehouse.goods_delivery.delete.success"))})).catch((function(e){console.error(e),n.b.error(d("warehouse.goods_delivery.delete.failure"))}))};return c.length?i.a.createElement("div",{className:"table-goods-deliveries"},i.a.createElement(r.c,{path:"".concat(f.path,"/delete-goods-delivery/:goods_delivery_id")},(function(e){e.history;var t,a=e.match;return i.a.createElement(qe,{id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.goods_delivery_id,show:null!=a,onConfirmed:p,title:d("warehouse.goods_delivery.delete.title")})})),i.a.createElement(Sa,{columns:s,rows:c,onDelete:function(e){v.push("".concat(f.url,"/delete-goods-delivery/").concat(e))},onViewEdit:function(e){v.push("/warehouse/goods-delivery/detail/".concat(e))},onPageChange:function(e){h(da.d.setPage(e))},page:l.page,lastpage:l.lastPage,rowKey:"id",permissions:{delete:["goods-deliveries.delete"]}})):i.a.createElement(Re.a,{emptyText:d("warehouse.goods_delivery.list.empty")})},Qa=function(e,t){var a,n=e.onSearch,c=e.searchAll,o=void 0===c||c,r=Object(b.a)(),s=Object(m.a)(r,1)[0],u=[{id:"partner_id",title:s("warehouse.delivery_partner.title")},{id:"status_id",title:s("warehouse.goods_delivery_status.title")}],d=Object(l.useState)(o?"":null===u||void 0===u||null===(a=u[0])||void 0===a?void 0:a.id),v=Object(m.a)(d,2),f=v[0],h=v[1],p=Object(l.useState)(""),E=Object(m.a)(p,2),g=E[0],j=E[1],w=Object(l.useCallback)(O.a.debounce((function(e,t){t.length&&e.length?n&&n({search:"".concat(t,":").concat(e),searchFields:"".concat(t,":like")}):n&&n({search:e})}),700),[]);Object(l.useImperativeHandle)(t,(function(){return{reset:function(){var e;j(""),h(o?"":null===u||void 0===u||null===(e=u[0])||void 0===e?void 0:e.id)}}}));var _=function(e){j(e.target.value),w(e.target.value,f)},y=function(e){j(e),w(e,f)},N=Object(l.useMemo)((function(){return"partner_id"===f?i.a.createElement(fa,{showLabel:!1,onChange:y,value:g}):"status_id"===f?i.a.createElement(Ea,{value:g,onChange:y,showLabel:!1}):i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search",onChange:_,value:g})}),[f,g]);return i.a.createElement("div",{className:"form-group row custom-filter-warehouse"},i.a.createElement("div",{className:"col-lg-4 col-md-4 col-sm-4 p-3"},i.a.createElement("select",{name:"searchField",id:"searchField",className:"form-control",onChange:function(e){h(e.target.value),g.length&&(j(""),w("",e.target.value))},value:f},o?i.a.createElement("option",{value:""},s("common.all")):"",(u||[]).map((function(e,t){return i.a.createElement("option",{value:e.id,key:"search-field-".concat(t)},e.title)})))),i.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-8 p-3"},N))},Ga=Object(l.forwardRef)(Qa),Ja=function(e){var t=e.onSuccess,a=e.show,c=Object(l.useState)(!1),o=Object(m.a)(c,2),s=o[0],u=o[1],d=Object(b.a)(),v=Object(m.a)(d,1)[0],f=Object(r.h)(),h=Object(l.useRef)(),p=function(){f.goBack()};return i.a.createElement(oe.a,{show:a,onHide:p,title:v("warehouse.goods_delivery.create.title"),actionsLoading:s},i.a.createElement(re.a.Body,null,i.a.createElement(ya,{onSubmit:function(e,a){u(!0),G.a.goodsDelivery.create(e).then((function(e){n.b.success(v("warehouse.goods_delivery.create.success")),t&&t(e)})).catch((function(e){console.error(e),J(e,a)})).finally((function(){u(!1)}))},ref:h,initialValues:{status_id:"waiting_shipment",partner_id:"",shipping_cost:0,shipment_info_id:""},showStatus:!1})),i.a.createElement(re.a.Footer,null,i.a.createElement(de,{type:"secondary",loading:s,onClick:p},v("common.cancel")),i.a.createElement(de,{type:"primary",loading:s,onClick:function(){h.current.submitForm()}},v("common.save"))))},Wa=function(e){var t=Object(o.e)((function(e){return e.warehouse.goodsDelivery.list})).loading,a=Object(b.a)(),n=Object(m.a)(a,1)[0],c=Object(l.useRef)(),s=function(){var e=Object(o.e)((function(e){return e.warehouse.goodsDelivery.list.pagination})),t=Object(o.d)();Object(l.useEffect)((function(){a()}),[e.page]);var a=function(a){t(Object(da.b)(Object(E.a)({page:e.page,with:"deliveryPartner;goodsDeliveryStatus"},a)))};return a}(),u=Object(r.h)(),d=Object(r.k)(),v=function(e){s(),u.push("/warehouse/goods-delivery/detail/".concat(e.id))};return i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{need:["goods-deliveries.create"]},i.a.createElement(r.c,{path:"".concat(d.path,"/create-goods-delivery")},(function(e){var t=e.match;return i.a.createElement(Ja,{show:null!==t,onSuccess:v})}))),i.a.createElement(f.c,null,i.a.createElement(f.e,{title:n("warehouse.goods_delivery.list.title")},i.a.createElement(V.a,{need:["goods-deliveries.create"]},i.a.createElement(f.f,null,i.a.createElement("button",{className:"btn btn-primary",onClick:function(){u.push("".concat(d.url,"/create-goods-delivery"))}},n("warehouse.goods_delivery.create.title"))))),i.a.createElement(f.d,{className:"position-relative"},t&&i.a.createElement(x.a,{local:!0}),i.a.createElement(Ga,{ref:c,onSearch:function(e){s(e)}}),i.a.createElement(za,{onRefresh:s}))))},Xa=a(1616),$a=a(1606),Za=(a(1421),function(e){var t=e.children,a=e.value,n=e.index,c=Object(Z.a)(e,["children","value","index"]);return i.a.createElement("div",Object.assign({style:a!==n?{display:"none"}:{},role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},c),t)});function en(e){var t=e.labels,a=void 0===t?[]:t,n=e.children,c=i.a.useState(0),o=Object(m.a)(c,2),r=o[0],s=o[1],u=Object(l.useMemo)((function(){return i.a.Children.map(n,(function(e,t){return i.a.cloneElement(e,Object(E.a)(Object(E.a)({},e.props),{},{value:r,index:t}))}))}),[n,r]);return i.a.createElement("div",{className:"simple-tabs"},i.a.createElement(Xa.a,{value:r,onChange:function(e,t){s(t)},"aria-label":"simple tabs example"},a.map((function(e){return i.a.createElement($a.a,Object.assign({label:e},{id:"simple-tab-".concat(t=0),"aria-controls":"simple-tabpanel-".concat(t)},{key:"tab-label-".concat(e)}));var t}))),u)}a(1422);var tn=function(e){var t=e.onRefresh,a=e.onViewEdit,c=Object(o.e)((function(e){return e.warehouse.deliveryPartner.list.data})),s=Object(o.e)((function(e){return e.warehouse.deliveryPartner.list.pagination})),u=function(){var e=Object(b.a)(),t=Object(m.a)(e,1)[0];return[{id:"id",title:t("warehouse.delivery_partner.id")},{id:"name",title:t("warehouse.delivery_partner.name")}]}(),d=Object(b.a)(),v=Object(m.a)(d,1)[0],f=Object(r.h)(),h=Object(r.k)(),p=Object(o.d)(),E=function(e){G.a.deliveryPartner.delete(e).then((function(){t&&t(),n.b.success(v("warehouse.delivery_partner.delete.success"))})).catch((function(e){console.error(e),n.b.error(v("warehouse.delivery_partner.delete.failure"))}))},g=Object(l.useCallback)((function(e){p(va.b.setPage(e))}),[p]);return c.length?i.a.createElement("div",{className:"table-delivery-partner"},i.a.createElement(r.c,{path:"".concat(h.path,"/delete-delivery-partner/:delivery_partner_id")},(function(e){var t,a=e.match;return i.a.createElement(qe,{id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.delivery_partner_id,show:null!=a,onConfirmed:E,title:v("warehouse.delivery_partner.delete.title")})})),i.a.createElement(Sa,{columns:u,rows:c,onDelete:function(e){f.push("".concat(h.url,"/delete-delivery-partner/").concat(e))},onViewEdit:a,page:s.page,lastpage:s.lastPage,onPageChange:g,rowKey:"id",noSTT:!0,permissions:{update:["delivery-partners.update"],delete:["delivery-partners.delete"]}})):i.a.createElement(Re.a,{emptyText:v("warehouse.delivery_partner.list.empty")})};a(1423);function an(e,t){var a=e.initialValues,n=void 0===a?{name:"",id:""}:a,c=e.onSubmit,l=Object(b.a)(),o=Object(m.a)(l,1)[0],r=X.d().shape({id:X.c().required(o("validation.message.required")),name:X.f().required(o("validation.message.required"))});return i.a.createElement(W.d,{enableReinitialize:!0,initialValues:n,onSubmit:c,innerRef:t,validationSchema:r},i.a.createElement(te,{className:"form form-label-right form-add-delivery-partner"},i.a.createElement("div",{className:"p-3"},i.a.createElement(W.b,{name:"id",component:f.i,label:o("warehouse.delivery_partner.id"),placeholder:o("warehouse.delivery_partner.id"),autoComplete:"off",type:"number"})),i.a.createElement("div",{className:"p-3"},i.a.createElement(W.b,{name:"name",component:f.i,label:o("warehouse.delivery_partner.name"),placeholder:o("warehouse.delivery_partner.name"),autoComplete:"off"})),i.a.createElement($,null)))}var nn=i.a.forwardRef(an),cn=function(e,t){var a=e.show,c=e.onHide,o=e.onSuccess,s=e.editMode,u=void 0!==s&&s,d=e.id,v=Object(l.useState)(),f=Object(m.a)(v,2),h=f[0],p=f[1],E=Object(l.useState)(),g=Object(m.a)(E,2),j=g[0],O=g[1],w=Object(b.a)(),_=Object(m.a)(w,1)[0],y=Object(r.h)(),N=Object(l.useRef)();Object(l.useImperativeHandle)(t,(function(){return{setInitialData:function(e){O(e)}}}));var x=function(){c?c():y.goBack()},k=function(e,t){p(!0),G.a.deliveryPartner.create(e).then((function(){n.b.success(_("warehouse.delivery_partner.create.success")),o&&o(),x()})).catch((function(e){n.b.error(_("warehouse.delivery_partner.create.failure")),J(e,t)})).finally((function(){p(!1)}))},C=function(e,t){p(!0),G.a.deliveryPartner.update(d,e).then((function(){n.b.success(_("warehouse.delivery_partner.update.success")),o&&o(),x()})).catch((function(e){n.b.error(_("warehouse.delivery_partner.update.failure")),J(e,t)})).finally((function(){p(!1)}))};return i.a.createElement(oe.a,{show:a,onHide:x,title:_(u?"warehouse.delivery_partner.update.title":"warehouse.delivery_partner.create.title"),actionsLoading:h},i.a.createElement(re.a.Body,null,i.a.createElement(nn,{formItemClass:"col-lg-4 col-md-6 col-sm-12",ref:N,onSubmit:function(e,t){u?C(e,t):k(e,t)},initialValues:j})),i.a.createElement(re.a.Footer,null,i.a.createElement(de,{type:"secondary",loading:h,onClick:x},_("common.cancel")),i.a.createElement(de,{type:"primary",loading:h,onClick:function(){N.current.submitForm()}},_("common.save"))))},ln=i.a.forwardRef(cn),on=function(e){var t=Object(b.a)(),a=Object(m.a)(t,1)[0],n=Object(r.h)(),c=Object(r.k)(),s=Object(o.d)(),u=Object(l.useRef)();Object(l.useEffect)((function(){h()}),[]);var d=Object(l.useCallback)((function(){n.push("".concat(c.url,"/create-delivery-partner"))}),[n,c.url]),v=Object(l.useCallback)((function(e,t){u.current.setInitialData(t),n.push("".concat(c.url,"/update-delivery-partner/").concat(e))}),[n,c.url]),h=Object(l.useCallback)((function(){s(Object(va.c)())}),[s]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{need:["delivery-partners.create"]},i.a.createElement(r.c,{path:"".concat(c.path,"/create-delivery-partner")},(function(e){var t=e.match;return i.a.createElement(ln,{show:null!==t,onSuccess:h})}))),i.a.createElement(V.a,{need:["delivery-partners.update"]},i.a.createElement(r.c,{path:"".concat(c.path,"/update-delivery-partner/:id")},(function(e){var t,a=e.match;return i.a.createElement(ln,{ref:u,id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.id,show:null!==a,onSuccess:h,editMode:!0})}))),i.a.createElement(f.c,{className:"delivery-partners"},i.a.createElement(f.e,{title:a("warehouse.delivery_partner.title")},i.a.createElement(V.a,{need:["delivery-partners.create"]},i.a.createElement(f.f,null,i.a.createElement(de,{type:"primary",onClick:d},a("warehouse.delivery_partner.create.title"))))),i.a.createElement(f.d,null,i.a.createElement(tn,{onRefresh:h,onViewEdit:v}))))},rn=function(e){var t=Object(b.a)(),a=Object(m.a)(t,1)[0];return i.a.createElement(p,{title:a("MENU.WAREHOUSE.GOODS_DELIVERY")},i.a.createElement(en,{labels:[a("MENU.WAREHOUSE.GOODS_DELIVERY"),a("warehouse.delivery_partner.title")]},i.a.createElement(Za,null,i.a.createElement(V.a,{need:["goods-deliveries.index"]},i.a.createElement(Wa,null))),i.a.createElement(Za,null,i.a.createElement(V.a,{need:["delivery-partners.index"]},i.a.createElement(on,null)))))},sn=function(e){var t=Object(r.k)();return i.a.createElement(r.e,null,i.a.createElement(r.b,{exact:!0,from:"/warehouse/goods-delivery",to:"/warehouse/goods-delivery/list"}),i.a.createElement(r.c,{path:"".concat(t.path,"/list")},i.a.createElement(rn,null)),i.a.createElement(V.a,{need:"goods-deliveries.update"},i.a.createElement(r.c,{path:"".concat(t.path,"/detail/:id")},i.a.createElement(Ka,null))))},un="\xa5",dn=(a(1424),[{id:"id",title:i.a.createElement("span",null,"Jancode")},{id:"quantity",title:i.a.createElement("span",null,"S\u1ed1 l\u01b0\u1ee3ng"),render:function(e){return Object(he.a)(e)}},{id:"order_id",title:i.a.createElement("span",null,"\bM\xe3 \u0111\u1eb7t h\xe0ng")},{id:"amount",title:i.a.createElement("span",null,"T\u1ed5ng ti\u1ec1n"),render:function(e){return"".concat(Object(he.a)(e)," ").concat(un)}},{id:"is_box",title:i.a.createElement("span",null,"\u0110\xf3ng g\xf3i"),render:function(e){return e?i.a.createElement("span",{className:"isbox-badge packbox"},"C\xf3"):i.a.createElement("span",{className:"isbox-badge unpackbox"},"Kh\xf4ng")}}]),mn=function(e){var t,a,n=e.data,c=Object(b.a)(),o=Object(m.a)(c,1)[0],r=Object(l.useMemo)((function(){return n.checked?"/media/svg/icons/Shopping/delivery-truck-shipped.svg":"/media/svg/icons/Shopping/delivery-truck.svg"}),[n.checked]);return(null===n||void 0===n?void 0:n.code)?i.a.createElement(f.c,{className:"inbound-plan-item position-relative"},i.a.createElement(f.d,null,i.a.createElement("div",{className:"info-section"},i.a.createElement("div",{className:"content-wrapper"},i.a.createElement("div",{className:Object(k.a)((null===n||void 0===n?void 0:n.checked)?"received":"pending","is-checked custom-box status-box")},(null===n||void 0===n?void 0:n.checked)?o("warehouse.inbound_plan.arive_status.arrived"):o("warehouse.inbound_plan.arive_status.not_yet")),i.a.createElement("div",{className:"code custom-box"},i.a.createElement("div",{className:"code-label"},o("warehouse.tracking.id")),i.a.createElement("div",{className:"code-value"},null===n||void 0===n?void 0:n.code))),i.a.createElement("div",{className:Object(k.a)("icon-wrapper",!(null===n||void 0===n?void 0:n.checked)&&"not_yet")},i.a.createElement(q.a,{src:Object(C.g)(r)}))),(null===n||void 0===n||null===(t=n.order_items)||void 0===t?void 0:t.length)?i.a.createElement(v.a,null):"",i.a.createElement("div",{className:"items-wrapper"},(null===n||void 0===n||null===(a=n.order_items)||void 0===a?void 0:a.length)?i.a.createElement(Sa,{columns:dn,rows:(null===n||void 0===n?void 0:n.order_items)||[],isAction:!1,className:"table-tracking-products",isPagination:!1}):""))):i.a.createElement(i.a.Fragment,null)},bn=(a(1425),function(e){var t=e.data,a=e.loading,n=Object(l.useMemo)((function(){return t.filter((function(e){return e.code}))}),[t]);return i.a.createElement("div",{className:"list-inbound-plan position-relative"},a&&i.a.createElement(x.a,{local:!0}),(null===t||void 0===t?void 0:t.length)?"":i.a.createElement(Re.a,null),n.map((function(e,t){return i.a.createElement("div",{className:"col-lg-6 col-sm-12",key:"tracking-item-".concat(t)},i.a.createElement(mn,{data:e}))})))}),vn=function(e){var t=Object(o.e)((function(e){return e.purchase.tracking})),a=t.isLoading,n=t.trackingList;return i.a.createElement(bn,{data:n,loading:a})},fn=a(401),hn=(a(1426),function(e){var t=Object(o.e)((function(e){return e.purchase.tracking})).pagination,a=Object(l.useState)(new Date),n=Object(m.a)(a,2),c=n[0],r=n[1],s=Object(l.useState)({page:1,search:"expected_delivery:".concat(_()().format("YYYY-MM-DD")),searchField:void 0,with:"orderItems;purchaseItems"}),u=Object(m.a)(s,2),d=u[0],v=u[1],h=Object(o.d)(),p=Object(b.a)(),g=Object(m.a)(p,1)[0];Object(l.useEffect)((function(){h(Object(fn.e)(d))}),[d]);return i.a.createElement(f.c,{className:"list-tracking-filter"},i.a.createElement(f.d,null,i.a.createElement("div",{className:"select-date"},i.a.createElement("label",{htmlFor:""},g("warehouse.inbound_plan.received_date")),i.a.createElement(ct.a,{className:"form-control",style:{width:"100%"},selected:c,onChange:function(e){r(e),v(Object(E.a)(Object(E.a)({},d),{},{search:"expected_delivery:".concat(_()(e).format("YYYY-MM-DD"))}))},popperPlacement:"bottom"})),i.a.createElement("div",{className:"pagination"},i.a.createElement(I.a,{count:t.lastPage,page:d.page,shape:"rounded",onChange:function(e,t){v(Object(E.a)(Object(E.a)({},d),{},{page:t}))}}))))}),pn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD",a={};return Object.entries(e).forEach((function(e){var n=Object(m.a)(e,2),c=n[0],l=n[1],i=l;(l instanceof Date||l instanceof _.a)&&(i=_()(l).format(t)),a[c]=i})),a},En=a(1251),gn=function(e){var t=Object(W.g)(),a=t.setFieldValue,c=t.values,l=i.a.useState(null),o=Object(m.a)(l,2),r=o[0],s=o[1],u=Boolean(r),d=Object(b.a)(),v=Object(m.a)(d,1)[0];return i.a.createElement("div",{className:"tracking-label"},v("ORDER.CODE_TRACKING"),i.a.createElement(Vt.a,{variant:"link",onClick:function(e){s(e.currentTarget)},className:"p-0"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Code/Info-circle.svg")})),i.a.createElement(En.a,{open:u,anchorEl:r,onClose:function(){s(null)},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"}},i.a.createElement("div",{className:"p-3"},v("warehouse.tracking.no_code")," ",i.a.createElement(Vt.a,{variant:"link",onClick:function(){Et.a.createTracking().then((function(e){n.b.success(v("warehouse.tracking.create.success")),a("tracking",e.id),Object(Dt.b)(Pt("TRACKING",{tracking:e.id,quantity:2,sfaQuantity:c.quantity})),s(null)})).catch((function(){n.b.error(v("warehouse.tracking.create.failure"))}))}},v("warehouse.tracking.create.title")))))},jn=(a(1427),/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/);function On(e,t){var a=e.formItemClass,n=void 0===a?"col-lg-12 col-md-12 col-sm-12":a,c=e.initialValues,l=void 0===c?{name:"",address:"",tel:""}:c,o=e.onSubmit,r=Object(b.a)(),s=Object(m.a)(r,1)[0],u=X.d().shape({name:X.f().required(s("validation.message.required")),address:X.f().required(s("validation.message.required")),tel:X.f().matches(jn,s("validation.message.invalid_phone_number")).required(s("validation.message.required"))});return i.a.createElement(W.d,{enableReinitialize:!0,initialValues:l,onSubmit:o,innerRef:t,validationSchema:u},i.a.createElement(te,{className:"form form-label-right form-add-agency"},i.a.createElement("div",{className:"form-group row"},i.a.createElement("div",{className:n},i.a.createElement(W.b,{name:"name",component:f.i,label:s("warehouse.agency.name"),placeholder:s("warehouse.agency.name"),autoComplete:"off"})),i.a.createElement("div",{className:n},i.a.createElement(W.b,{name:"address",component:f.i,label:s("warehouse.agency.address"),placeholder:s("warehouse.agency.address"),autoComplete:"off"})),i.a.createElement("div",{className:n},i.a.createElement(W.b,{name:"tel",component:f.i,label:s("warehouse.agency.tel"),placeholder:s("warehouse.agency.tel"),autoComplete:"off"}))),i.a.createElement($,null)))}var wn=i.a.forwardRef(On),_n=function(e){var t=Object(W.g)().setFieldValue,a=Object(l.useState)(null),c=Object(m.a)(a,2),r=c[0],s=c[1],d=Boolean(r),v=Object(l.useState)(!1),f=Object(m.a)(v,2),h=f[0],p=f[1],E=Object(l.useState)(!1),g=Object(m.a)(E,2),j=g[0],O=g[1],w=Object(l.useRef)(),_=Object(b.a)(),y=Object(m.a)(_,1)[0],N=Object(o.d)(),x=function(){p(!h)},k=function(){s(null)};return i.a.createElement("div",{className:"agency-label"},y("warehouse.agency.title"),i.a.createElement(de,{type:"link",onClick:function(e){s(e.currentTarget)},className:"p-0"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Code/Info-circle.svg")})),i.a.createElement(En.a,{open:d,anchorEl:r,onClose:k,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"}},i.a.createElement("div",{className:"p-3"},y("warehouse.agency.empty")," ",i.a.createElement(de,{type:"link",onClick:function(){x(),k()}},y("warehouse.agency.create.title")))),i.a.createElement(oe.a,{show:h,title:y("warehouse.agency.create.title"),onHide:x,actionsLoading:j},i.a.createElement(re.a.Body,null,i.a.createElement(wn,{ref:w,onSubmit:function(e,a){O(!0),G.a.agency.create(e).then((function(e){n.b.success(y("warehouse.agency.create.success")),t("agency_id",e.id),N(Object(u.b)()),s(null),x()})).catch((function(e){J(e,a),n.b.error(y("warehouse.agency.create.failure"))})).finally((function(){O(!1)}))}})),i.a.createElement(re.a.Footer,null,i.a.createElement(de,{type:"secondary",onClick:x},y("common.cancel")),i.a.createElement(de,{loading:j,type:"primary",onClick:function(){w.current.submitForm()}},y("common.save")))))},yn=function(e){var t=e.form,a=e.field,n=e.disabled,c=Object(l.useState)(!0),o=Object(m.a)(c,2),r=o[0],s=o[1],u=Object(b.a)(),d=Object(m.a)(u,1)[0],v=function(e){e.target.blur(),t.setFieldValue(a.name,""),s(!r)};return r?i.a.createElement("div",{className:"tracking-input barcode-input"},i.a.createElement(f.b,Object.assign({},e,{canTypeOnInput:!1})),i.a.createElement(de,{type:"primary",onClick:v,disabled:n},d("warehouse.tracking.type_tracking"))):i.a.createElement("div",{className:"tracking-input normal-input"},i.a.createElement(f.i,e),i.a.createElement(de,{type:"primary",onClick:v,disabled:n},d("warehouse.tracking.scan_tracking")))};a(1428);function Nn(e,t){var a=e.editMode,n=void 0!==a&&a,c=e.formItemClass,l=void 0===c?"col-lg-6 col-md-12":c,r=e.initialValues,s=void 0===r?{tracking:"",quantity:0,shipping_inside:0,arrival_date:new Date}:r,u=e.onSubmit,d=e.autoFocus,v=void 0===d||d,h=Object(o.e)((function(e){return e.warehouse.agency.list})),p=Object(b.a)(),E=Object(m.a)(p,1)[0],g=X.d().shape({tracking:X.f().required(E("validation.message.required")),quantity:X.c().min(1,E("validation.message.min",{min:1})).required(E("validation.message.required")),shipping_inside:X.c().min(0,E("validation.message.min",{min:0}))});return i.a.createElement(W.d,{enableReinitialize:!0,initialValues:s,onSubmit:u,innerRef:t,validationSchema:g},i.a.createElement(te,{className:"form form-label-right form-create-sfa"},i.a.createElement("div",{className:"form-group row"},i.a.createElement("div",{className:l},i.a.createElement(W.b,{name:"quantity",component:f.i,label:E("common.quantity"),placeholder:E("common.quantity"),type:"number",shouldUpdate:function(e,t){return!0},autoComplete:"off",autoFocus:v,min:0})),i.a.createElement("div",{className:l},i.a.createElement(W.b,{name:"tracking",component:yn,label:n?E("ORDER.CODE_TRACKING"):i.a.createElement(gn,null),placeholder:E("ORDER.CODE_TRACKING"),shouldUpdate:function(e,t){return!0},autoComplete:"off",disabled:n})),i.a.createElement("div",{className:l},i.a.createElement(W.b,{name:"shipping_inside",component:f.i,label:E("warehouse.cost.shipping_inside"),placeholder:E("warehouse.cost.shipping_inside"),type:"number",shouldUpdate:function(e,t){return!0},autoComplete:"off",min:0})),i.a.createElement("div",{className:l},i.a.createElement(W.b,{name:"coupon",component:f.i,label:E("common.coupon_code"),placeholder:E("common.coupon_code"),shouldUpdate:function(e,t){return!0},autoComplete:"off"})),i.a.createElement("div",{className:l},i.a.createElement(f.k,{name:"agency_id",label:i.a.createElement(_n,null),placeholder:E("common.agency")},h.map((function(e,t){return i.a.createElement("option",{value:e.id,key:"select-option-".concat(t)},e.name)})))),i.a.createElement("div",{className:l},i.a.createElement(f.g,{label:E("common.created_at"),name:"arrival_date"}))),i.a.createElement($,null)))}var xn=i.a.forwardRef(Nn),kn=(a(1429),function(e){var t=Object(l.useState)(!1),a=Object(m.a)(t,2),c=a[0],r=a[1],s=Object(o.e)((function(e){return e.purchase.tracking.trackingList})),u=Object(l.useState)(0),d=Object(m.a)(u,2),v=d[0],h=d[1],p=Object(b.a)(),g=Object(m.a)(p,1)[0],j=Object(l.useState)(),w=Object(m.a)(j,2),y=w[0],N=w[1],k=Object(l.useRef)(),C=Object(l.useRef)(""),S=Object(se.a)(["sfas.update"]),q=Object(se.a)(["sfas.create"]);Object(Rt.d)({condition:function(){return s.length},onEnter:function(e){return R(e)}});var R=function(e){C.current=e,y?y.tracking===e?(h(v+1),D(y,v+1)):(B(y,v),h(1),F(e,1)):(F(e,v+1),h(v+1))},F=function(e,t){r(!0),G.a.SFA.fetchSFAs({search:"tracking:".concat(e),searchFields:"tracking:="}).then((function(a){if(!a.data.length)return q?G.a.SFA.create({quantity:t,tracking:e}).then((function(e){N(e),n.b.success(g("warehouse.sfa.create.success"))})).catch((function(){n.b.error(g("warehouse.sfa.create.failure"))})):void n.b.error(g("warehouse.sfa.create.need_permission"));N(a.data[0]),h(a.data[0].quantity+1),D(a.data[0],a.data[0].quantity+1)})).finally((function(){r(!1)}))},D=Object(l.useCallback)(O.a.debounce((function(e,t){B(e,t)}),2e3),[]),B=function(e,t){S?(r(!0),G.a.SFA.update(e.id,{quantity:t}).then((function(e){e.tracking===C.current&&N(e),n.b.success(g("warehouse.sfa.update.success"))})).catch((function(){n.b.error(g("warehouse.sfa.update.failure"))})).finally((function(){r(!1)}))):n.b.error(g("warehouse.sfa.update.need_permission"))},P=Object(l.useMemo)((function(){if(y)return Object(E.a)(Object(E.a)({},y),{},{arrival_date:_()(y.arrival_date,"DD-MM-YYYY HH:mm").toDate()})}),[y]);return i.a.createElement("div",{className:"tracking-picked-section"},!!v&&i.a.createElement(f.c,null,i.a.createElement(f.d,null,i.a.createElement("div",{className:"d-flex tracking-picked-section--content"},i.a.createElement("div",{className:"picked-count"},i.a.createElement("div",{className:"picked-count--title"},C.current),i.a.createElement("div",{className:"picked-count--value"},v)),i.a.createElement("div",{className:"sfa-info position-relative"},i.a.createElement("div",{className:"sfa-info--title"},"SFA: ",null===y||void 0===y?void 0:y.id),c&&i.a.createElement(x.a,{local:!0}),i.a.createElement(xn,{editMode:!0,initialValues:P,autoFocus:!1,formItemClass:"col-lg-4 col-sm-6",ref:k,onSubmit:function(e,t){r(!0);var a=pn(e);G.a.SFA.update(e.id,a).then((function(e){N(e),h(e.quantity),n.b.success(g("warehouse.sfa.update.success"))})).catch((function(e){n.b.error(g("warehouse.sfa.update.failure")),J(e,t)})).finally((function(){r(!1)}))}}),i.a.createElement("div",{className:"actions text-right"},i.a.createElement(de,{type:"primary",loading:c,onClick:function(){k.submitForm()}},g("common.edit"))))))))}),Cn=function(e){var t=Object(b.a)(),a=Object(m.a)(t,1)[0];return i.a.createElement(p,{title:a("MENU.WAREHOUSE.SCHEDULE")},i.a.createElement(hn,null),i.a.createElement(V.a,{need:["sfas.create","sfas.update"]},i.a.createElement(kn,null)),i.a.createElement(vn,null))};a(1430);var Sn=function(e){var t=e.onRefresh,a=Object(o.e)((function(e){return e.warehouse.invoice.list})),c=a.data,l=a.pagination,s=Object(o.d)(),u=Object(r.h)(),d=Object(r.k)(),v=function(){var e=Object(b.a)(),t=Object(m.a)(e,1)[0];return[{id:"id",title:t("warehouse.container.id")},{id:"type",title:t("warehouse.container_type.title"),render:function(e,a){var n=a.shipment_method;return i.a.createElement("div",{className:"container-type sub-info"},i.a.createElement("div",{className:"sub-info__item"},i.a.createElement("div",{className:"sub-info__title"},t("common.code")),i.a.createElement("div",{className:"sub-info__value"},(null===e||void 0===e?void 0:e.id)||"---")),i.a.createElement("div",{className:"sub-info__item"},i.a.createElement("div",{className:"sub-info__title"},t("warehouse.shipment_method.title_shorthand")),i.a.createElement("div",{className:"sub-info__value"},(null===n||void 0===n?void 0:n.name)||"---")),i.a.createElement("div",{className:"sub-info__item"},i.a.createElement("div",{className:"sub-info__title"},t("common.volume")),i.a.createElement("div",{className:"sub-info__value"},(null===e||void 0===e?void 0:e.volume)||"---")),i.a.createElement("div",{className:"sub-info__item"},i.a.createElement("div",{className:"sub-info__title"},t("warehouse.invoice.shipping_date")),i.a.createElement("div",{className:"sub-info__value"},1===(null===e||void 0===e?void 0:e.day_of_week)?"Ch\u1ee7 nh\u1eadt":"Th\u1ee9 ".concat(null===e||void 0===e?void 0:e.day_of_week))))}},{id:"shipping_date",title:t("warehouse.invoice.shipping_date")},{id:"vanning_date",title:t("warehouse.invoice.sub_info"),render:function(e,a){var n=a.vanning_date,c=a.departure_date,l=a.cut_off_date,o=a.arrival_date;return i.a.createElement("div",{className:"sub-info"},i.a.createElement("div",{className:"sub-info__item"},i.a.createElement("div",{className:"sub-info__title"},t("warehouse.invoice.vanning_date")),i.a.createElement("div",{className:"sub-info__value"},n||"---")),i.a.createElement("div",{className:"sub-info__item"},i.a.createElement("div",{className:"sub-info__title"},t("warehouse.invoice.departure_date")),i.a.createElement("div",{className:"sub-info__value"},c||"---")),i.a.createElement("div",{className:"sub-info__item"},i.a.createElement("div",{className:"sub-info__title"},t("warehouse.invoice.cut_off_date")),i.a.createElement("div",{className:"sub-info__value"},l||"---")),i.a.createElement("div",{className:"sub-info__item"},i.a.createElement("div",{className:"sub-info__title"},t("warehouse.invoice.arrival_date")),i.a.createElement("div",{className:"sub-info__value"},o||"---")))}},{id:"shipping_cost",title:t("warehouse.cost.shipping"),render:function(e,a){var n=a.shipping_cost_per_unit;return i.a.createElement("div",{className:"cost-section"},i.a.createElement("div",{className:"cost-item"},i.a.createElement("div",{className:"cost-item__title"},t("warehouse.invoice.shipping_cost.title_shorthand")),i.a.createElement("div",{className:"cost-item__value"},Object(he.a)(e)," ",un)),i.a.createElement("div",{className:"cost-item"},i.a.createElement("div",{className:"cost-item__title"},t("warehouse.invoice.shipping_cost.per_unit")),i.a.createElement("div",{className:"cost-item__value"},Object(he.a)(n)," ",un)))}}]}(),f=Object(b.a)(),h=Object(m.a)(f,1)[0],p=function(e){G.a.invoice.delete(e).then((function(){t&&t(),n.b.success(h("warehouse.invoice.delete.success"))})).catch((function(){n.b.error(h("warehouse.invoice.delete.failure"))}))};return c.length?i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{need:"containers.delete"},i.a.createElement(r.c,{path:"".concat(d.path,"/delete-container/:invoice_id")},(function(e){e.history;var t,a=e.match;return i.a.createElement(qe,{id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.invoice_id,show:null!=a,onConfirmed:p,title:h("warehouse.invoice.delete.title")})}))),i.a.createElement(Sa,{columns:v,rows:c,page:l.page,lastpage:l.lastPage,onDelete:function(e){u.push("".concat(d.url,"/delete-container/").concat(e))},onViewEdit:function(e){u.push("/warehouse/container/detail/".concat(e))},onPageChange:function(e){s(tt.d.setPage(e))},rowKey:"id",className:"table-invoice-list",noSTT:!0,permissions:{delete:"containers.delete"}})):i.a.createElement(Re.a,{emptyText:h("warehouse.invoice.empty")})},qn=a(433),Rn=(a(1431),function(e){var t=e.onChange,a=e.value,n=e.showLabel,c=void 0===n||n,r=Object(Z.a)(e,["onChange","value","showLabel"]),s=Object(o.e)((function(e){return e.warehouse.containerType.list.data})),u=Object(o.e)((function(e){return e.warehouse.containerType.list.loading})),d=Object(o.d)(),v=Object(b.a)(),f=Object(m.a)(v,1)[0],h=Object(l.useCallback)((function(e){var t;return{value:e.id,label:f("warehouse.container_type.option_label",{id:e.id,shipment_method_name:(null===e||void 0===e||null===(t=e.shipment_method)||void 0===t?void 0:t.name)||"-",volume:e.volume||0,day_of_week:1===e.day_of_week?"Ch\u1ee7 nh\u1eadt":"Th\u1ee9 ".concat(e.day_of_week)})}}),[f]),p=null===s||void 0===s?void 0:s.map((function(e){return h(e)}));return i.a.createElement(Me,Object.assign({label:c&&f("warehouse.container_type.title"),value:a,placeholder:f("common.select_here"),options:p,onChange:function(e){t&&t(e.value)},loading:u,className:"select-container-type",onFetchData:function(e){d(Object(qn.b)(Object(E.a)({with:"shipmentMethod"},e)))}},r))}),Fn=function(e){var t=e.name,a=Object(Z.a)(e,["name"]),n=Object(W.e)(t),c=Object(m.a)(n,2),l=c[0],o=c[1],r=Object(W.g)(),s=r.setFieldTouched,u=r.setFieldValue,d=o.error,b=o.touched;return i.a.createElement("div",{className:Object(k.a)(b&&d&&"is-invalid")},i.a.createElement(Rn,Object.assign({value:l.value,onChange:function(e){u(t,e)},onClick:function(){s(l.name)}},a)),b&&d&&i.a.createElement("div",{className:"invalid-feedback d-block"},d))},Dn=(a(1432),function(e,t){var a=e.isEdit,n=void 0===a||a,c=e.isShowCutOff,l=void 0!==c&&c,o=e.initialValues,r=void 0===o?{shipping_date:new Date,type_id:""}:o,s=e.onSubmit,u=Object(b.a)(),d=Object(m.a)(u,1)[0],v=X.d().shape({type_id:X.f().required(d("validation.message.required")),shipping_date:X.b().required(d("validation.message.required"))});return i.a.createElement(W.d,{onSubmit:s,initialValues:r,validationSchema:v,enableReinitialize:!0,innerRef:t},i.a.createElement(W.c,{className:"form form-label-right form-add-invoce"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-6"},i.a.createElement(Fn,{name:"type_id",isDisabled:!n})),i.a.createElement("div",{className:"col-lg-6"},i.a.createElement(f.g,{name:"shipping_date",label:d("warehouse.invoice.shipping_date"),placeholder:d("warehouse.invoice.shipping_date"),disabled:!n})),i.a.createElement("div",{className:"col-lg-6"},i.a.createElement(f.g,{name:"vanning_date",label:d("warehouse.invoice.vanning_date"),placeholder:d("warehouse.invoice.vanning_date"),disabled:!n})),i.a.createElement("div",{className:"col-lg-6"},i.a.createElement(f.g,{name:"departure_date",label:d("warehouse.invoice.departure_date"),placeholder:d("warehouse.invoice.departure_date"),disabled:!n})),i.a.createElement("div",{className:"col-lg-6"},i.a.createElement(f.g,{name:"arrival_date",label:d("warehouse.invoice.arrival_date"),placeholder:d("warehouse.invoice.arrival_date"),disabled:!n})),l&&i.a.createElement("div",{className:"col-lg-6"},i.a.createElement(f.g,{name:"cut_off_date",label:d("warehouse.invoice.cut_off_date"),placeholder:d("warehouse.invoice.cut_off_date"),disabled:!0}))),i.a.createElement($,null)))}),Bn=i.a.forwardRef(Dn),Pn=function(e){var t,a=e.show,n=e.onSuccess,c=Object(l.useState)(!1),s=Object(m.a)(c,2),u=s[0],d=s[1],v=Object(r.h)(),f=Object(o.e)((function(e){return e.warehouse.containerType.list.data})),h=Object(l.useRef)(),p=Object(b.a)(),E=Object(m.a)(p,1)[0],g=function(){v.goBack()};return i.a.createElement(oe.a,{show:a,onHide:g,actionsLoading:u,title:E("warehouse.invoice.create.title")},i.a.createElement(re.a.Body,null,i.a.createElement(Bn,{onSubmit:function(e,t){d(!0),G.a.invoice.create(pn(e)).then((function(e){n&&n(e)})).catch((function(e){J(e,t)})).finally((function(){d(!1)}))},initialValues:{shipping_date:new Date,type_id:null===f||void 0===f||null===(t=f[0])||void 0===t?void 0:t.id},ref:h})),i.a.createElement(re.a.Footer,null,i.a.createElement(de,{type:"secondary",loading:u,onClick:g},E("common.cancel")),i.a.createElement(de,{type:"primary",loading:u,onClick:function(){h.current.submitForm()}},E("common.save"))))},Tn=function(e){var t=e.value,a=e.onChange,n=e.formater,c=Object(Z.a)(e,["value","onChange","formater"]);return i.a.createElement("div",null,i.a.createElement(ct.a,Object.assign({style:{width:"100%"},selected:t?new Date(t):null,onChange:function(e){a(n?_()(e).format(n):e)},className:"form-control w-100"},c)))},Mn=function(e,t){var a,n=e.onSearch,c=e.searchAll,r=void 0===c||c,s=Object(l.useState)(""),u=Object(m.a)(s,2),d=u[0],v=u[1],f=Object(b.a)(),h=Object(m.a)(f,1)[0],p=[{id:"shipment_method_id",title:h("warehouse.shipment_method.title")},{id:"shipping_date",title:h("warehouse.invoice.shipping_date")}],E=Object(l.useState)(r?"":null===p||void 0===p||null===(a=p[0])||void 0===a?void 0:a.id),g=Object(m.a)(E,2),j=g[0],w=g[1],_=Object(o.e)((function(e){return e.warehouse.shipmentMethod.list.data})),y=Object(l.useCallback)(O.a.debounce((function(e,t){t.length&&e.length?n&&n({search:"".concat(t,":").concat(e),searchFields:"".concat(t,":like")}):n&&n({search:e})}),700),[]);Object(l.useImperativeHandle)(t,(function(){return{reset:function(){var e;v(""),w(r?"":null===p||void 0===p||null===(e=p[0])||void 0===e?void 0:e.id)}}}));var N=function(e){v(e.target.value),y(e.target.value,j)},x=function(e){v(e),y(e,j)},k=Object(l.useMemo)((function(){return"shipment_method_id"===j?i.a.createElement("select",{onChange:N,className:"form-control"},i.a.createElement("option",{value:""},h("common.all")),_.map((function(e,t){return i.a.createElement("option",{value:e.id,key:"shipmentMethod-idx-".concat(t)},e.name)}))):"shipping_date"===j?i.a.createElement(Tn,{value:d,onChange:x,formater:"YYYY-MM-DD"}):i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search",onChange:N,value:d})}),[j,d,_]);return i.a.createElement("div",{className:"form-group row custom-filter-warehouse"},i.a.createElement("div",{className:"col-lg-4 col-md-4 col-sm-4 p-3"},i.a.createElement("select",{name:"searchField",id:"searchField",className:"form-control",onChange:function(e){w(e.target.value),d.length&&(v(""),y("",e.target.value))},value:j},r?i.a.createElement("option",{value:""},h("common.all")):"",(p||[]).map((function(e,t){return i.a.createElement("option",{value:e.id,key:"search-field-".concat(t)},e.title)})))),i.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-8 p-3"},k))},In=Object(l.forwardRef)(Mn),Vn=(a(1433),function(e){var t=Object(o.e)((function(e){return e.warehouse.invoice.list})),a=t.pagination,n=t.loading,c=Object(o.d)(),s=Object(r.k)(),u=Object(r.h)(),d=Object(l.useRef)(),v=Object(b.a)(),h=Object(m.a)(v,1)[0];Object(l.useEffect)((function(){g()}),[a.page]);var g=function(e){c(Object(tt.c)(Object(E.a)({page:a.page,with:"shipmentMethod;type"},e)))},j=function(e){g(),d.current&&d.current.reset(),u.push("/warehouse/container/detail/".concat(e.id))};return i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{need:"containers.create"},i.a.createElement(r.c,{path:"".concat(s.path,"/create-invoice")},(function(e){var t=e.match;return i.a.createElement(Pn,{show:null!==t,onSuccess:j})}))),i.a.createElement(p,{title:h("warehouse.invoice.title")},i.a.createElement(f.c,{className:"position-relative invoice-list-card"},i.a.createElement(f.e,{title:h("warehouse.invoice.list.title")},i.a.createElement(V.a,{need:"containers.create"},i.a.createElement(f.f,null,i.a.createElement("button",{className:"btn btn-primary",onClick:function(){return u.push("".concat(s.url,"/create-invoice"))}},h("warehouse.invoice.create.title"))))),i.a.createElement(f.d,null,n&&i.a.createElement(x.a,{local:!0}),i.a.createElement(V.a,{need:"containers.index"},i.a.createElement(In,{ref:d,onSearch:function(e){g(e)}}),i.a.createElement(Sn,{onRefresh:g}))))))}),Ln=function(e){var t=Object(l.useState)(!1),a=Object(m.a)(t,2),n=a[0],c=a[1],r=Object(o.e)((function(e){return e.warehouse.invoice.detail.data})),s=Object(o.e)((function(e){return e.warehouse.invoice.detail.loading})),u=Object(l.useRef)(),d=Object(o.d)(),v=Object(b.a)(),h=Object(m.a)(v,1)[0],p=Object(l.useMemo)((function(){if(!r)return{};var e={};return Object.entries(O.a.omit(r,["created_at","updated_at"])).forEach((function(t){var a=Object(m.a)(t,2),n=a[0],c=a[1],l=c;"string"===typeof c&&_()(c,"DD-MM-YYYY").isValid()&&(l=_()(c,"DD-MM-YYYY")),e[n]=l})),e}),[r]);return i.a.createElement(f.c,{className:"invoice-info"},i.a.createElement(f.e,{title:h("warehouse.invoice.info")},i.a.createElement(V.a,{need:"containers.update"},i.a.createElement(f.f,null,i.a.createElement(ba,{isEdit:n,onEdit:function(){return c(!0)},onSubmit:function(){return u.current.handleSubmit()},onCancel:function(){u.current.resetForm(),c(!1)}})))),i.a.createElement(f.d,null,s&&i.a.createElement(x.a,{local:!0}),i.a.createElement(Bn,{isEdit:n,isShowCutOff:!0,ref:u,initialValues:p,onSubmit:function(e,t){G.a.invoice.update(r.id,pn(e)).then((function(e){c(!1),d(Object(tt.b)({id:e.id}))})).catch((function(e){J(e,t)}))}})))},An=(a(1434),function(e,t){var a=e.isEdit,n=void 0===a||a,c=e.initialValues,l=e.onSubmit,o=Object(b.a)(),r=Object(m.a)(o,1)[0];return i.a.createElement(W.d,{innerRef:t,enableReinitialize:!0,initialValues:c,onSubmit:l},i.a.createElement(W.c,{className:"form form-label-right form-edit-invoice-cost"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-6"},i.a.createElement(W.b,{name:"shipping_cost",label:r("warehouse.cost.shipping"),placeholder:r("warehouse.cost.shipping"),component:f.i,disabled:!n,shouldUpdate:function(){return!0},type:"number"})),i.a.createElement("div",{className:"col-lg-6"},i.a.createElement(W.b,{name:"shipping_cost_per_unit",label:r("warehouse.cost.shipping_per_unit"),placeholder:r("warehouse.cost.shipping_per_unit"),component:f.i,disabled:!0,shouldUpdate:function(){return!0},type:"number"}))),i.a.createElement($,null)))}),Yn=i.a.forwardRef(An),Hn=function(e){var t=Object(l.useState)(!1),a=Object(m.a)(t,2),n=a[0],c=a[1],r=Object(o.e)((function(e){return e.warehouse.invoice.detail.data})),s=Object(o.e)((function(e){return e.warehouse.invoice.detail.loading})),u=Object(l.useRef)(),d=Object(o.d)(),v=Object(b.a)(),h=Object(m.a)(v,1)[0];return i.a.createElement(f.c,{className:"invoice-info"},i.a.createElement(f.e,{title:h("common.cost")},i.a.createElement(V.a,{need:"containers.update"},i.a.createElement(f.f,null,i.a.createElement(ba,{isEdit:n,onEdit:function(){return c(!0)},onSubmit:function(){return u.current.handleSubmit()},onCancel:function(){u.current.resetForm(),c(!1)}})))),i.a.createElement(f.d,null,s&&i.a.createElement(x.a,{local:!0}),i.a.createElement(Yn,{isEdit:n,initialValues:r,onSubmit:function(e,t){G.a.invoice.update(r.id,O.a.pick(e,["shipping_cost","shipping_cost_per_unit"])).then((function(e){c(!1),d(Object(tt.b)({id:e.id}))})).catch((function(e){J(e,t)}))},ref:u})))};a(1435);var Un=function(e){var t,a=e.onRefresh,c=Object(o.e)((function(e){return e.warehouse.invoice.detail})).data,l=Object(r.h)(),s=Object(r.k)(),u=function(){var e=Object(b.a)(),t=Object(m.a)(e,1)[0];return[{id:"customer_id",title:t("common.customer")},{id:"balance",title:t("warehouse.cost.shipping"),render:function(e,a){var n=a.shipping_inside_cost,c=a.additional_cost;return i.a.createElement("div",null,Object(he.a)(e,{round:2})," ",un,i.a.createElement("div",null,i.a.createElement("small",{className:"text-primary"},t("warehouse.cost.shipping_inside"),": ",Object(he.a)(n,{round:2})," ",un)),i.a.createElement("div",null,i.a.createElement("small",{className:"text-primary"},t("warehouse.cost.additional"),": ",Object(he.a)(c,{round:2})," ",un)))}},{id:"storage_cost",title:t("warehouse.cost.storage"),render:function(e,a){var n=a.quantity_boxes;return i.a.createElement("div",null,Object(he.a)(e,{round:2})," ",un,i.a.createElement("div",null,i.a.createElement("small",{className:"text-primary"},t("warehouse.sku.quantity"),": ",n)))}}]}(),d=Object(b.a)(),v=Object(m.a)(d,1)[0],f=function(e){var t;G.a.invoice.update(null===s||void 0===s||null===(t=s.params)||void 0===t?void 0:t.id,{action:"detach",params:JSON.stringify(["ladingBills",e])}).then((function(){a&&a(),n.b.success(v("warehouse.invoice.pivot.lading_bill.delete.success"))})).catch((function(){n.b.error(v("warehouse.invoice.pivot.lading_bill.delete.failure"))}))};return(null===c||void 0===c||null===(t=c.lading_bills)||void 0===t?void 0:t.length)?i.a.createElement("div",{className:"table-lading-bill"},i.a.createElement(V.a,{need:["containers.update","lading-bills.update"],permissionJoin:"and"},i.a.createElement(r.c,{path:"".concat(s.path,"/delete-lading-bill/:lb_id")},(function(e){var t,a=e.match;return i.a.createElement(qe,{id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.lb_id,show:null!=a,onConfirmed:f,title:v("warehouse.invoice.pivot.lading_bill.delete.title")})}))),i.a.createElement(Sa,{columns:u,rows:null===c||void 0===c?void 0:c.lading_bills,onDelete:function(e){l.push("".concat(s.url,"/delete-lading-bill/").concat(e))},onViewEdit:function(e){l.push("/warehouse/lading-bills/".concat(e))},rowKey:"id",permissions:{delete:["containers.update","lading-bills.update"]}})):i.a.createElement(Re.a,{emptyText:v("warehouse.invoice.pivot.lading_bill.empty")})},Kn=function(e){var t=e.show,a=e.onSuccess,c=Object(l.useState)(!1),o=Object(m.a)(c,2),s=o[0],u=o[1],d=Object(r.h)(),v=Object(r.j)(),f=Object(b.a)(),h=Object(m.a)(f,1)[0],p=X.d().shape({lading_bill_id:X.f().required(h("validation.message.required"))}),E=function(){d.goBack()};return i.a.createElement(oe.a,{title:h("warehouse.invoice.pivot.lading_bill.title"),show:t,onHide:E,actionsLoading:s},i.a.createElement(W.d,{initialValues:{lading_bill_id:""},validationSchema:p,onSubmit:function(e,t){u(!0),G.a.invoice.update(null===v||void 0===v?void 0:v.id,{action:"attach",params:JSON.stringify(["ladingBills",{lading_bill_id:e.lading_bill_id}])}).then((function(){E(),a&&a(),n.b.success(h("warehouse.invoice.pivot.lading_bill.create.success"))})).catch((function(e){J(e,t),n.b.success(h("warehouse.invoice.pivot.lading_bill.create.failure"))})).finally((function(){u(!1)}))}},(function(e){var t=e.handleSubmit;return i.a.createElement(i.a.Fragment,null,i.a.createElement(re.a.Body,null,i.a.createElement(W.c,null,i.a.createElement(Ba,{name:"lading_bill_id"})),i.a.createElement($,null)),i.a.createElement(re.a.Footer,null,i.a.createElement(de,{type:"secondary",loading:s,onClick:E},h("common.cancel")),i.a.createElement(de,{type:"primary",loading:s,onClick:t,htmlType:"submit"},h("common.save"))))})))},zn=function(e){var t=Object(o.e)((function(e){return e.warehouse.invoice.detail})).loading,a=Object(o.d)(),n=Object(r.j)(),c=Object(r.k)(),l=Object(r.h)(),s=Object(b.a)(),u=Object(m.a)(s,1)[0],d=function(){(null===n||void 0===n?void 0:n.id)&&a(Object(tt.b)({id:null===n||void 0===n?void 0:n.id}))};return i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{need:["containers.update","lading-bills.update"],permissionJoin:"and"},i.a.createElement(r.c,{path:"".concat(c.path,"/add-lading-bill")},(function(e){var t=e.match;return i.a.createElement(Kn,{show:null!==t,onSuccess:d})}))),i.a.createElement(f.c,{className:"lading-bill-list"},i.a.createElement(f.e,{title:u("warehouse.lading_bill.title")},i.a.createElement(V.a,{need:["containers.update","lading-bills.update"],permissionJoin:"and"},i.a.createElement(f.f,null,i.a.createElement("button",{className:"btn btn-primary",onClick:function(){l.push("".concat(c.url,"/add-lading-bill"))}},u("warehouse.lading_bill.create.title"))))),i.a.createElement(f.d,null,t&&i.a.createElement(x.a,{local:!0}),i.a.createElement(Un,{onRefresh:d}))))},Qn=function(e){var t=Object(o.e)((function(e){return e.warehouse.invoice.detail})),a=t.data,n=t.loading,c=Object(o.d)(),s=Object(r.j)(),u=Object(b.a)(),d=Object(m.a)(u,1)[0];return Object(l.useEffect)((function(){(null===s||void 0===s?void 0:s.id)&&c(Object(tt.b)({id:null===s||void 0===s?void 0:s.id}))}),[null===s||void 0===s?void 0:s.id]),a||n?i.a.createElement(p,{title:"".concat(d("warehouse.invoice.title")," ").concat(null===s||void 0===s?void 0:s.id)},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-6 col-md-12"},i.a.createElement(Ln,null)),i.a.createElement("div",{className:"col-lg-6 col-md-12"},i.a.createElement(Hn,null))),i.a.createElement(zn,null)):i.a.createElement(xa,null)},Gn=function(e){var t=Object(r.k)();return i.a.createElement(r.e,null,i.a.createElement(r.b,{exact:!0,from:t.url,to:"".concat(t.url,"/list")}),i.a.createElement(r.c,{path:"".concat(t.url,"/list"),component:Vn}),i.a.createElement(r.c,{path:"".concat(t.url,"/detail/:id"),component:Qn}))},Jn=a(142);a(1436);var Wn=function(e){var t=e.onRefresh,a=Object(o.e)((function(e){return e.warehouse.ladingBill.list})),c=a.data,l=a.pagination,s=Object(r.h)(),u=Object(r.k)(),d=Object(o.d)(),v=function(){var e=Object(b.a)(),t=Object(m.a)(e,1)[0];return[{id:"id",title:t("warehouse.lading_bill.id")},{id:"customer_id",title:t("common.customer")},{id:"containers",title:t("warehouse.lading_bill.pivot.container.title"),render:function(e){return i.a.createElement("div",{className:"text-center"},(null===e||void 0===e?void 0:e.length)?e.map((function(e){return i.a.createElement("div",{className:"container-info"},i.a.createElement("div",{className:"d-flex align-items-center justify-content-between",key:e.id},i.a.createElement("div",null,t("warehouse.container.id")," - ",i.a.createElement("span",{className:"text-primary font-weight-bold"},e.id)," -"),i.a.createElement("div",null,e.shipping_date||"---")),i.a.createElement("div",{className:Object(k.a)("container-type text-left font-weight-bold","sea"===e.type.shipment_method_id?"text-primary":"text-success")},e.type.shipment_method.name))})):"---")}},{id:"balance",title:t("warehouse.lading_bill.cost"),render:function(e,a){var n=a.shipping_inside_cost,c=a.additional_cost;return i.a.createElement("div",null,Object(he.a)(e,{round:2})," ",un,i.a.createElement("div",{className:"text-nowrap d-flex align-items-center justify-content-between"},i.a.createElement("small",{className:"text-primary"},t("warehouse.cost.shipping_inside"),": "),i.a.createElement("small",{className:"text-primary"},Object(he.a)(n,{round:2})," ",un)),i.a.createElement("div",{className:"text-nowrap d-flex align-items-center justify-content-between"},i.a.createElement("small",{className:"text-primary"},t("warehouse.cost.additional"),": "),i.a.createElement("small",{className:"text-primary"},Object(he.a)(c,{round:2})," ",un)))}},{id:"storage_cost",title:t("warehouse.cost.storage"),render:function(e,a){var n=a.quantity_boxes;return i.a.createElement("div",null,Object(he.a)(e,{round:2})," ",un,i.a.createElement("div",null,i.a.createElement("small",{className:"text-primary text-nowrap"},t("warehouse.sku.quantity"),": ",Object(he.a)(n))))}}]}(),f=Object(b.a)(),h=Object(m.a)(f,1)[0],p=function(e){G.a.ladingBill.delete(e).then((function(){t&&t(),n.b.success("Delete lading bill success!")})).catch((function(){n.b.error("Delete lading bill failure!")}))};return c.length?i.a.createElement("div",{className:"table-lading-bill"},i.a.createElement(r.c,{path:"".concat(u.path,"/delete-lading-bill/:lb_id")},(function(e){e.history;var t,a=e.match;return i.a.createElement(qe,{id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.lb_id,show:null!=a,onConfirmed:p,title:h("warehouse.lading_bill.delete.title")})})),i.a.createElement(Sa,{columns:v,rows:c,onDelete:function(e){s.push("".concat(u.url,"/delete-lading-bill/").concat(e))},onViewEdit:function(e){s.push("/warehouse/lading-bills/".concat(e))},page:l.page,lastpage:l.lastPage,onPageChange:function(e){d(Ze.d.setPage(e))},rowKey:"id",noSTT:!0,permissions:{update:"lading-bills.update",delete:"lading-bills.delete"}})):i.a.createElement(Re.a,{emptyText:h("warehouse.lading_bill.empty")})},Xn=(a(1437),a(423)),$n=a(392),Zn=(a(1438),function(e){var t=e.boxes,a=void 0===t?[]:t,n=e.onChange,c=e.pagination,r=e.onChangePage,s=e.loading,u=e.customer_id,d=Object(W.g)().values,v=Object(o.e)((function(e){return e.order.list.orderList})),f=Object(o.e)((function(e){return e.order.list.isLoading})),h=Object(l.useState)([]),p=Object(m.a)(h,2),g=p[0],j=p[1],w=Object(l.useState)(""),_=Object(m.a)(w,2),y=_[0],N=_[1],S=Object(o.d)(),R=Object(b.a)(),F=Object(m.a)(R,1)[0];Object(l.useEffect)((function(){return function(){N("")}}),[]),Object(l.useEffect)((function(){u&&(D({search:"customer_id:".concat(u)}),N("user"))}),[u]);var D=Object(l.useCallback)((function(e){S(Object($n.d)(e))}),[S]);Object(l.useEffect)((function(){y&&"user"===y?S(Object(Xn.c)({search:"objectable_id:".concat(u,";objectable_type:user"),searchJoin:"and",page:c.page})):y&&"user"!==y&&S(Object(Xn.c)({search:"objectable_id:".concat(y,";objectable_type:order"),searchJoin:"and",page:c.page}))}),[y,c.page,u]),Object(l.useEffect)((function(){n&&n(g)}),[g]);var B={value:"user",label:F("warehouse.sku.of_customer")},P=function(e){return{value:e.id,label:F("warehouse.order.option_title",{id:e.id,type_name:e.type.name,status_name:e.status.name})}},T=Object(l.useCallback)((function(e){return O.a.findIndex(g,(function(t){return t.id==e.id}))}),[g]),M=Object(l.useMemo)((function(){var e=v.map((function(e){return P(e)}));return[B].concat(Object(fe.a)(e))}),[v]),V=Object(l.useMemo)((function(){if(!y)return"";if("user"===y)return B;var e=O.a.find(v,["id",y]);return e?P(e):""}),[y,v]),L=function(e){var t=T({id:e.target.name}),a=Object(fe.a)(g);a[t]=Object(E.a)(Object(E.a)({},a[t]),{},{avalableQuantity:e.target.value}),j(a)},A=Object(l.useMemo)((function(){return(null===a||void 0===a?void 0:a.length)?a.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{avalableQuantity:e.quantity-Number(e.quantity_in_lading_bills)})})).filter((function(e){return e.avalableQuantity>0})):[]}),[a]),Y=Object(l.useCallback)(O.a.debounce((function(e){e&&D({search:"id:".concat(e),searchFields:"id:like"})}),700),[u]);return i.a.createElement("div",{className:"list-box-for-form w-100"},i.a.createElement("div",{className:"custom-header"},i.a.createElement("div",{className:"title"},F("warehouse.sku.of_customer")),i.a.createElement("div",{className:"toolbar"},i.a.createElement(Be.a,{isDisabled:!d.customer_id,isLoading:f,placeholder:F("warehouse.order.select_title"),options:M,onChange:function(e){N(e.value)},onInputChange:Y,value:V}))),i.a.createElement("div",{className:"position-relative"},y&&s&&i.a.createElement(x.a,{local:!0}),i.a.createElement(Pa.a,{className:"row list-items"},A.map((function(e){var t,a="checkbox-list-label-".concat(e.id);return i.a.createElement("div",{className:"col-lg-6 col-sm-12",key:e.id},i.a.createElement(Ta.a,{role:void 0,dense:!0,button:!0,onClick:(t=e,function(){var e=T(t),a=Object(fe.a)(g);-1===e?a.push(Object(E.a)(Object(E.a)({},t),{},{quantity:(null===t||void 0===t?void 0:t.quantity)||1})):a.splice(e,1),j(a)})},i.a.createElement(Ma.a,null,i.a.createElement(Ia.a,{edge:"start",checked:-1!==T(e),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":a}})),i.a.createElement("div",{className:"item-box"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Shopping/Box4.svg")})," ",i.a.createElement("span",{className:"item-box-id"},e.box_id))),i.a.createElement("div",{className:Object(k.a)("item-quantity",-1!==T(e)?"":"d-none")},F("common.quantity"),": ",i.a.createElement("input",{name:e.id,className:"ml-3 form-control",defaultValue:e.avalableQuantity,min:1,type:"number",max:null===e||void 0===e?void 0:e.avalableQuantity,onChange:L})))})))),c&&i.a.createElement(I.a,{className:"mt-3",count:c.lastPage,page:c.page,shape:"rounded",onChange:function(e,t){r&&r(t)}}))}),ec=function(e){var t=Object(W.g)(),a=t.values,n=t.setFieldValue,c=Object(o.e)((function(e){return e.warehouse.boxOwner.list})),r=c.data,s=c.pagination,u=c.loading,d=Object(o.d)();Object(l.useEffect)((function(){return function(){d(Xn.a.resetParams())}}),[]);var m=Object(l.useCallback)((function(e){n("boxes",e)}),[]);return i.a.createElement(W.c,{className:"form form-label-right form-add-lading-bill"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-6"},i.a.createElement(Fn,{name:"desired_container_type_id"})),i.a.createElement("div",{className:"col-lg-6"},i.a.createElement(Ve,{name:"customer_id"}))),i.a.createElement("div",{className:"row position-relative"},i.a.createElement(Zn,{customer_id:a.customer_id,loading:u,boxes:r,onChange:m,pagination:s,onChangePage:function(e){d(Xn.a.changePagination({page:e}))}})),i.a.createElement($,null))},tc=function(e,t){var a=e.onSubmit,n=e.initialValues,c=void 0===n?{desired_container_type_id:"",customer_id:"",boxes:[]}:n,l=Object(b.a)(),o=Object(m.a)(l,1)[0],r=X.d().shape({desired_container_type_id:X.f().required(o("validation.message.required")),customer_id:X.f().required(o("validation.message.required"))});return i.a.createElement(W.d,{enableReinitialize:!0,initialValues:c,validationSchema:r,onSubmit:a,innerRef:t},i.a.createElement(ec,null))},ac=i.a.forwardRef(tc),nc=function(e){var t,a=e.show,c=e.onSuccess,s=Object(o.e)((function(e){return e.warehouse.containerType.list.data})),u=Object(l.useState)(!1),d=Object(m.a)(u,2),v=d[0],f=d[1],h=Object(r.h)(),p=Object(l.useRef)(),E=Object(b.a)(),g=Object(m.a)(E,1)[0],j=function(){h.goBack(),p.current.resetForm()},w=function(){var e=Object(Q.a)(z.a.mark((function e(t,a){var l;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=pn(O.a.omit(t,["boxes"])),f(!0),G.a.ladingBill.create(l).then((function(e){return _(t.boxes,e).then((function(){return e}))})).then((function(e){n.b.success(g("warehouse.lading_bill.create.success")),c&&c(e)})).catch((function(e){n.b.error(g("warehouse.lading_bill.create.failure")),J(e,a)})).finally((function(){f(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),_=function(e,t){return(null===e||void 0===e?void 0:e.length)?Promise.all(e.map((function(e){return G.a.boxLadingBill.create({owning_box_id:e.id,quantity:e.avalableQuantity,lading_bill_id:t.id})}))):t};return i.a.createElement(oe.a,{show:a,onHide:j,title:g("warehouse.lading_bill.create.title"),actionsLoading:v},i.a.createElement(re.a.Body,null,i.a.createElement(ac,{onSubmit:w,initialValues:{desired_container_type_id:null===s||void 0===s||null===(t=s[0])||void 0===t?void 0:t.id,customer_id:"",boxes:[]},ref:p})),i.a.createElement(re.a.Footer,null,i.a.createElement(de,{type:"secondary",loading:v,onClick:j},g("common.cancel")),i.a.createElement(de,{type:"primary",loading:v,onClick:function(){p.current.submitForm()}},g("common.save"))))},cc=function(e,t){var a,n=e.onSearch,c=e.searchAll,r=void 0===c||c,s=Object(l.useState)(""),u=Object(m.a)(s,2),d=u[0],v=u[1],f=Object(b.a)(),h=Object(m.a)(f,1)[0],p=[{id:"shipment_method_id",title:h("warehouse.shipment_method.title")},{id:"customer_id",title:h("common.customer")},{id:"desired_date",title:h("warehouse.lading_bill.desired_date")}],E=Object(l.useState)(r?"":null===p||void 0===p||null===(a=p[0])||void 0===a?void 0:a.id),g=Object(m.a)(E,2),j=g[0],w=g[1],_=Object(o.e)((function(e){return e.warehouse.shipmentMethod.list.data})),y=Object(l.useCallback)(O.a.debounce((function(e,t){t.length&&e.length?n&&n({search:"".concat(t,":").concat(e),searchFields:"".concat(t,":like")}):n&&n({search:e})}),700),[]);Object(l.useImperativeHandle)(t,(function(){return{reset:function(){var e;v(""),w(r?"":null===p||void 0===p||null===(e=p[0])||void 0===e?void 0:e.id)}}}));var N=function(e){v(e.target.value),y(e.target.value,j)},x=function(e){v(e),y(e,j)},k=Object(l.useMemo)((function(){return"shipment_method_id"===j?i.a.createElement("select",{onChange:N,className:"form-control"},i.a.createElement("option",{value:""},h("common.all")),_.map((function(e,t){return i.a.createElement("option",{value:e.id,key:"shipmentMethod-idx-".concat(t)},e.name)}))):"customer_id"===j?i.a.createElement(Ie,{showLabel:!1,onChange:x,value:d}):"desired_date"===j?i.a.createElement(Tn,{value:d,onChange:x,formater:"YYYY-MM-DD"}):i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search",onChange:N,value:d})}),[j,d,_]);return i.a.createElement("div",{className:"form-group row custom-filter-warehouse"},i.a.createElement("div",{className:"col-lg-4 col-md-4 col-sm-4 p-3"},i.a.createElement("select",{name:"searchField",id:"searchField",className:"form-control",onChange:function(e){w(e.target.value),d.length&&(v(""),y("",e.target.value))},value:j},r?i.a.createElement("option",{value:""},h("common.all")):"",(p||[]).map((function(e,t){return i.a.createElement("option",{value:e.id,key:"search-field-".concat(t)},e.title)})))),i.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-8 p-3"},k))},lc=Object(l.forwardRef)(cc),ic=function(e){var t=Object(o.e)((function(e){return e.warehouse.ladingBill.list})),a=t.pagination,n=t.loading,c=Object(o.d)(),s=Object(r.h)(),u=Object(r.k)(),d=Object(l.useRef)(),v=Object(b.a)(),h=Object(m.a)(v,1)[0],g=function(e){c(Object(Ze.c)(Object(E.a)({page:a.page,with:"containers.type.shipmentMethod"},e)))};Object(l.useEffect)((function(){g()}),[a.page]);var j=function(e){g(),s.push("/warehouse/lading-bills/".concat(e.id))};return i.a.createElement(p,{title:h("warehouse.lading_bill.title")},i.a.createElement(V.a,{need:["lading-bills.create"]},i.a.createElement(r.c,{path:"".concat(u.path,"/create-lading-bill")},(function(e){var t=e.match;return i.a.createElement(nc,{show:null!==t,onSuccess:j})}))),i.a.createElement(f.c,null,i.a.createElement(f.e,{title:h("warehouse.lading_bill.list.title")},i.a.createElement(V.a,{need:["lading-bills.create"]},i.a.createElement(f.f,null,i.a.createElement("button",{className:"btn btn-primary",onClick:function(){return s.push("".concat(u.url,"/create-lading-bill"))}},h("warehouse.lading_bill.create.title"))))),i.a.createElement(f.d,{className:"position-relative"},n&&i.a.createElement(x.a,{local:!0}),i.a.createElement(V.a,{need:["lading-bills.index"]},i.a.createElement(lc,{ref:d,onSearch:function(e){g(e)}}),i.a.createElement(Wn,{onRefresh:function(){g(),d.current&&d.current.reset()}})))))},oc=(a(1331),function(e,t){var a=e.isEdit,n=e.initialValues,c=e.onSubmit,l=Object(b.a)(),o=Object(m.a)(l,1)[0],r=X.d().shape({desired_container_type_id:X.f().required(o("validation.message.required"))});return i.a.createElement(W.d,{initialValues:n,onSubmit:c,enableReinitialize:!0,validationSchema:r,innerRef:t},i.a.createElement(W.c,{className:"form form-label-right form-edit-lading-bill"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-12"},i.a.createElement(Fn,{name:"desired_container_type_id",isDisabled:!a})),i.a.createElement("div",{className:"col-lg-12"},i.a.createElement(Ve,{name:"customer_id",isDisabled:!a})),i.a.createElement("div",{className:"col-lg-12"},i.a.createElement(W.b,{name:"volume",component:f.i,label:o("common.volume"),placeholder:o("common.volume"),disabled:!0,shouldUpdate:function(){return!0}})),i.a.createElement("div",{className:"col-lg-12"},i.a.createElement(W.b,{name:"weight",component:f.i,label:o("common.weight"),placeholder:o("common.weight"),disabled:!0,shouldUpdate:function(){return!0}}))),i.a.createElement($,null)))}),rc=i.a.forwardRef(oc),sc=function(e){var t=Object(l.useState)(!1),a=Object(m.a)(t,2),n=a[0],c=a[1],r=Object(o.e)((function(e){return e.warehouse.ladingBill.detail.data})),s=Object(o.e)((function(e){return e.warehouse.ladingBill.detail.loading})),u=Object(l.useRef)(),d=Object(o.d)(),v=Object(b.a)(),h=Object(m.a)(v,1)[0],p=Object(l.useMemo)((function(){return(null===r||void 0===r?void 0:r.desired_date)?Object(E.a)(Object(E.a)({},r),{},{desired_date:_()(r.desired_date,"DD-MM-YYYY")}):r}),[r]);return i.a.createElement(f.c,{style:{height:"calc(100% - 25px)"}},i.a.createElement(f.e,{title:h("warehouse.lading_bill.info")},i.a.createElement(V.a,{need:"lading-bills.update"},i.a.createElement(f.f,null,i.a.createElement(ba,{isEdit:n,onEdit:function(){return c(!0)},onSubmit:function(){return u.current.handleSubmit()},onCancel:function(){u.current.resetForm(),c(!1)}})))),i.a.createElement(f.d,{className:"position-relative"},s&&i.a.createElement(x.a,null),i.a.createElement(rc,{isEdit:n,ref:u,initialValues:p,onSubmit:function(e,t){G.a.ladingBill.update(r.id,pn(e)).then((function(e){c(!1),d(Object(Ze.b)({id:e.id,with:"boxLadingBills.owningBox.box"}))})).catch((function(e){J(e,t)}))}})))},uc=function(e){var t=Object(W.g)(),a=t.values,n=t.setFieldValue,c=Object(o.e)((function(e){return e.warehouse.boxOwner.list})),r=c.data,s=c.pagination,u=c.loading,d=Object(o.e)((function(e){return e.warehouse.ladingBill.detail.data})),m=Object(o.d)();Object(l.useEffect)((function(){return function(){m(Xn.a.resetParams())}}),[]);var b=Object(l.useCallback)((function(e){n("boxes",e)}),[]),v=Object(l.useMemo)((function(){return(null===r||void 0===r?void 0:r.length)?r.filter((function(e){return-1===O.a.findIndex(d.owning_boxes,["id",e.id])})):[]}),[r,d]);return i.a.createElement(W.c,{className:"form form-label-right form-add-box-lading-bill"},i.a.createElement(Ve,{name:"customer_id"}),i.a.createElement("div",{className:"row position-relative"},i.a.createElement(Zn,{customer_id:a.customer_id,loading:u,boxes:v,onChange:b,pagination:s,onChangePage:function(e){m(Xn.a.changePagination({page:e}))}})),i.a.createElement($,null))},dc=(a(1439),function(e,t){var a=e.initialValues,n=void 0===a?{customer_id:"",boxes:[]}:a,c=e.onSubmit,l=Object(b.a)(),o=Object(m.a)(l,1)[0],r=X.d().shape({boxes:X.a().required(o("validation.message.required"))});return i.a.createElement(W.d,{initialValues:n,onSubmit:c,validationSchema:r,innerRef:t},i.a.createElement(uc,null))}),mc=i.a.forwardRef(dc),bc=function(e){var t=e.show,a=e.onSuccess,n=Object(o.e)((function(e){return e.warehouse.ladingBill.detail.data})),c=Object(l.useState)(!1),s=Object(m.a)(c,2),u=s[0],d=s[1],v=Object(r.h)(),f=Object(l.useRef)(),h=Object(b.a)(),p=Object(m.a)(h,1)[0],E=function(){v.goBack()};return i.a.createElement(oe.a,{show:t,title:p("warehouse.sku.pivot.lading_bill.create.title"),onHide:E,actionsLoading:u},i.a.createElement(re.a.Body,null,i.a.createElement(mc,{onSubmit:function(e,t){return d(!0),Promise.all(e.boxes.map((function(e){var t={lading_bill_id:n.id,owning_box_id:e.id,quantity:e.quantity};return G.a.boxLadingBill.create(t)}))).then((function(){E(),a&&a()})).catch((function(e){J(e,t)})).finally((function(){d(!1)}))},ref:f})),i.a.createElement(re.a.Footer,null,i.a.createElement(de,{type:"secondary",loading:u,onClick:E},p("common.cancel")),i.a.createElement(de,{type:"primary",loading:u,onClick:function(){f.current.submitForm()}},p("common.save"))))};function vc(e){var t=e.onRefresh,a=Object(o.e)((function(e){var t;return null===(t=e.warehouse.ladingBill.detail.data)||void 0===t?void 0:t.box_lading_bills})),c=Object(r.j)(),s=Object(l.useRef)(),u=Object(l.useRef)([]),d=Object(b.a)(),v=Object(m.a)(d,1)[0];Object(l.useEffect)((function(){(null===a||void 0===a?void 0:a.length)&&a.forEach((function(e){u.current[e.id]&&(u.current[e.id].value=null===e||void 0===e?void 0:e.quantity)}))}),[a]);var f=Object(l.useCallback)(O.a.debounce((function(e,a){if(null===c||void 0===c?void 0:c.id){var l,i=a.quantity+a.owning_box.box.quantity_avaliable_for_owners;if(e>i)return n.b.warning(v("validation.message.max_sku_quantity_available",{max:i})),void((null===u||void 0===u||null===(l=u.current)||void 0===l?void 0:l[a.id])&&(u.current[a.id].value=a.quantity));G.a.boxLadingBill.update(null===a||void 0===a?void 0:a.id,{quantity:e}).then((function(){t&&t(),n.b.success(v("warehouse.sku.pivot.lading_bill.update_quantity.success"))})).catch((function(e){var t,a,c,l=v("warehouse.sku.pivot.lading_bill.update_quantity.failure");(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a||null===(c=a.errors)||void 0===c?void 0:c.message)&&(l=e.response.data.errors.message),n.b.error(l)}))}}),700),[]);return[Object(l.useMemo)((function(){return[{id:["owning_box","box_id"],title:v("warehouse.sku.title")},{id:["owning_box","objectable_id"],title:v("warehouse.sku.owner.title"),render:function(e,t){var a=t.owning_box;return i.a.createElement("div",{className:"owner-object"},i.a.createElement("span",{className:"object-type"},"user"===a.objectable_type?v("common.customer"):v("common.the_order")),i.a.createElement("span",null," - "),i.a.createElement("span",{className:"object-id"},v("common.code"),": ",e))}},{id:["storage_cost"],title:v("warehouse.cost.storage"),render:function(e,a){return i.a.createElement("div",{className:"pivot-storage-cost"},i.a.createElement("div",{className:"d-flex align-items-end justify-content-center"},i.a.createElement(V.a,{need:"box-lading-bills.update",fallback:i.a.createElement("span",null,Object(he.a)(Number(e),{round:2})," ",un)},i.a.createElement(na,{text:"".concat(Object(he.a)(Number(e),{round:2})," ").concat(un),value:Number(e),type:"number",onChange:function(e){return function(e,a){G.a.boxLadingBill.update(a.id,{storage_cost:e}).then((function(){t&&t(),n.b.success(v("warehouse.sku.pivot.lading_bill.update_storage_cost.success"))})).catch((function(){n.b.error(v("warehouse.sku.pivot.lading_bill.update_storage_cost.failure"))}))}(e,a)}}))),i.a.createElement("div",null,i.a.createElement("small",{className:"text-primary d-flex align-items-end"},i.a.createElement(V.a,{need:"box-lading-bills.update",fallback:i.a.createElement("span",null,"($",v("warehouse.cost.additional"),": ",Object(he.a)(Number(a.additional_cost),{round:2})," ",un,")")},i.a.createElement(na,{text:"(".concat(v("warehouse.cost.additional"),": ").concat(Object(he.a)(Number(a.additional_cost),{round:2})," ").concat(un,")"),value:Number(a.additional_cost),type:"number",onChange:function(e){return function(e,a){G.a.boxLadingBill.update(a.id,{additional_cost:e}).then((function(){t&&t(),n.b.success(v("warehouse.sku.pivot.lading_bill.update_storage_cost.success"))})).catch((function(){n.b.error(v("warehouse.sku.pivot.lading_bill.update_storage_cost.failure"))}))}(e,a)}})))))}},{id:["quantity"],title:v("common.quantity"),render:function(e,t){return i.a.createElement(V.a,{need:"box-lading-bills.update",fallback:i.a.createElement("span",null,e)},i.a.createElement("input",{name:t.id,ref:function(e){return u.current[t.id]=e},className:"form-control",type:"number",onKeyPress:function(e){return function(e,t){13===e.charCode&&f(e.target.value,t)}(e,t)}}))}},{id:"id",render:function(e){return i.a.createElement(V.a,{need:["box-lading-bills.delete"]},i.a.createElement("button",{className:"btn btn-icon btn-light btn-hover-danger btn-sm",onClick:function(){return function(e){s.current.open({title:"".concat(v("warehouse.sku.pivot.lading_bill.update_quantity.title"),"?"),id:e})}(e)}},i.a.createElement("span",{className:"svg-icon svg-icon-md svg-icon-danger"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/General/Trash.svg")}))))}}]}),[]),s]}a(1440);var fc=function(e){var t=e.onRefresh,a=Object(o.e)((function(e){var t;return null===(t=e.warehouse.ladingBill.detail.data)||void 0===t?void 0:t.box_lading_bills})),c=Object(b.a)(),l=Object(m.a)(c,1)[0],r=vc({onRefresh:t}),s=Object(m.a)(r,2),u=s[0],d=s[1];return(null===a||void 0===a?void 0:a.length)?i.a.createElement("div",null,i.a.createElement(Ra,{ref:d,onOk:function(e){var a=e.id;G.a.boxLadingBill.delete(a).then((function(){t&&t(),n.b.success(l("warehouse.sku.pivot.lading_bill.delete.success"))})).catch((function(){n.b.error(l("warehouse.sku.pivot.lading_bill.delete.failure"))}))}}),i.a.createElement(V.a,{need:["box-lading-bills.index"]},i.a.createElement(Sa,{columns:u,rows:a,isViewEdit:!1,isDelete:!1,isAction:!1,className:"table-list-box-in-lading-bill"}))):i.a.createElement(Re.a,{emptyText:l("warehouse.sku.pivot.lading_bill.empty")})},hc=function(e){var t=e.onRefresh,a=Object(r.k)(),n=Object(r.h)(),c=Object(b.a)(),l=Object(m.a)(c,1)[0];return i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{need:["box-lading-bills.create"]},i.a.createElement(r.c,{path:"".concat(a.path,"/add-box-to-lading-bill")},(function(e){var a=e.match;return i.a.createElement(bc,{show:null!==a,onSuccess:t})}))),i.a.createElement(f.c,{className:"lading-bill-box"},i.a.createElement(f.e,{title:l("warehouse.sku.pivot.lading_bill.title")},i.a.createElement(V.a,{need:["box-lading-bills.create"]},i.a.createElement(f.f,null,i.a.createElement("button",{className:"btn btn-primary",onClick:function(){return n.push("".concat(a.url,"/add-box-to-lading-bill"))}},l("warehouse.sku.pivot.lading_bill.create.title"))))),i.a.createElement(f.d,{className:"position-relative"},i.a.createElement(fc,{onRefresh:t}))))},pc=function(e,t){var a=e.initialValues,n=e.onSubmit;return i.a.createElement(W.d,{enableReinitialize:!0,initialValues:a,onSubmit:n,innerRef:t},i.a.createElement(W.c,{className:"form form-label-right form-edit-lading-bill"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-12"},i.a.createElement(W.b,{name:"balance",component:f.i,label:"Ph\xed",placeholder:"Ph\xed",disabled:!0,shouldUpdate:function(){return!0},type:"number"})),i.a.createElement("div",{className:"col-lg-12"},i.a.createElement(W.b,{name:"additional_cost",component:f.i,label:"Ph\u1ee5 ph\xed",placeholder:"Ph\u1ee5 ph\xed",disabled:!0,shouldUpdate:function(){return!0}})),i.a.createElement("div",{className:"col-lg-12"},i.a.createElement(W.b,{name:"shipping_cost",component:f.i,label:"Ph\xed v\u1eadn chuy\u1ec3n",placeholder:"Ph\xed v\u1eadn chuy\u1ec3n",disabled:!0,shouldUpdate:function(){return!0}})),i.a.createElement("div",{className:"col-lg-12"},i.a.createElement(W.b,{name:"shipping_inside_cost",component:f.i,label:"\bPh\xed v\u1eadn chuy\u1ec3n n\u1ed9i \u0111\u1ecba",placeholder:"\bPh\xed v\u1eadn chuy\u1ec3n n\u1ed9i \u0111\u1ecba",disabled:!0,shouldUpdate:function(){return!0}})),i.a.createElement("div",{className:"col-lg-12"},i.a.createElement(W.b,{name:"storage_cost",component:f.i,label:"\bPh\xed l\u01b0u h\xe0ng",placeholder:"\bPh\xed l\u01b0u h\xe0ng",disabled:!0,shouldUpdate:function(){return!0}}))),i.a.createElement($,null)))},Ec=i.a.forwardRef(pc),gc=function(e){var t=Object(l.useState)(!1),a=Object(m.a)(t,2),n=a[0],c=a[1],r=Object(o.e)((function(e){return e.warehouse.ladingBill.detail.data})),s=Object(o.e)((function(e){return e.warehouse.ladingBill.detail.loading})),u=Object(l.useRef)(),d=Object(o.d)(),v=Object(b.a)(),h=Object(m.a)(v,1)[0],p=Object(l.useMemo)((function(){return(null===r||void 0===r?void 0:r.desired_date)?Object(E.a)(Object(E.a)({},r),{},{desired_date:_()(r.desired_date,"DD-MM-YYYY")}):r}),[r]);return i.a.createElement(f.c,null,i.a.createElement(f.e,{title:h("warehouse.lading_bill.cost")}),i.a.createElement(f.d,{className:"position-relative"},s&&i.a.createElement(x.a,null),i.a.createElement(Ec,{isEdit:n,initialValues:p,onSubmit:function(e,t){G.a.ladingBill.update(r.id,pn(e)).then((function(e){c(!1),d(Object(Ze.b)({id:e.id}))})).catch((function(e){J(e,t)}))},ref:u})))},jc=function(e){var t=Object(o.e)((function(e){return e.warehouse.ladingBill.detail})),a=t.loading,n=t.data,c=Object(b.a)(),s=Object(m.a)(c,1)[0],u=Object(r.j)(),d=Object(o.d)();Object(l.useEffect)((function(){(null===u||void 0===u?void 0:u.id)&&v()}),[null===u||void 0===u?void 0:u.id]);var v=function(){d(Object(Ze.b)({id:null===u||void 0===u?void 0:u.id,with:"boxLadingBills.owningBox.box"}))};return a||n?i.a.createElement(p,{className:"lading-bill-detail-page",title:"".concat(s("warehouse.lading_bill.title")," ").concat(null===u||void 0===u?void 0:u.id)},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-6"},i.a.createElement(sc,null)),i.a.createElement("div",{className:"col-lg-6"},i.a.createElement(gc,null))),i.a.createElement(hc,{onRefresh:v})):i.a.createElement(xa,null)},Oc=function(e){var t=Object(r.k)();return i.a.createElement(r.e,null,i.a.createElement(r.b,{exact:!0,from:t.url,to:"".concat(t.url,"/list")}),i.a.createElement(r.c,{path:"".concat(t.url,"/list"),component:ic}),i.a.createElement(r.c,{path:"".concat(t.url,"/:id"),component:jc}),i.a.createElement(r.c,{component:Jn.a}))},wc=a(410),_c=(0,a(257).createSelector)([function(e){return e.warehouse.loadUpContainer.currentContainer},function(e){return e.warehouse.loadUpContainer.listInvoices.data}],(function(e,t){return t[e]})),yc=(0,a(257).createSelector)([_c],(function(e){var t={};return e?(e.lading_bills.forEach((function(e){t=e.box_lading_bills.reduce((function(e,t){return e[t.owning_box.box_id]?e[t.owning_box.box_id].quantity+=t.quantity:e[t.owning_box.box_id]={quantity:t.quantity,count:0},e}),Object(E.a)({},t))})),t=e.in_pickers.reduce((function(e,t){return e[t.box_id]?e[t.box_id].count+=t.quantity:e[t.box_id]={count:t.quantity,quantity:0},e}),Object(E.a)({},t))):t})),Nc=function(e){var t=Object(o.e)((function(e){return e.warehouse.loadUpContainer.listInvoices.data})),a=Object(o.d)();return i.a.createElement(at,{onChange:function(e){var n=O.a.find(t,["id",e]);a(n?wc.d.setCurrentContainer(n):Object(wc.a)({id:e}))},showLabel:!1})},xc=(a(1441),function(e){var t=Object(o.e)(yc),a=Object(o.e)(_c),n=Object(o.d)();return i.a.createElement(f.c,{className:"target-section"},i.a.createElement(Nc,null),i.a.createElement(Ct,{targetBoxes:t,currentContainer:a,onRemoveTarget:function(e){n(wc.d.removeInvoiceByIdx(e))}}))});function kc(e){return!!(null===e||void 0===e?void 0:e.cut_off_date)&&_()(e.cut_off_date,"DD-MM-YYYY").isSameOrBefore(_()(),"day")}var Cc=(0,a(257).createSelector)([_c,function(e){return e.warehouse.loadUpContainer.process.message}],(function(e,t){return e&&t.length?t.filter((function(t){return t.container.id===e.id})):[]}));function Sc(e){var t=Object(o.e)((function(e){return e.warehouse.loadUpContainer.currentContainer})),a=Object(o.e)((function(e){return e.warehouse.loadUpContainer.listInvoices.data})),n=Object(o.d)();return{loadUpBox:function(c,l){G.a.inContainerPicker.create({container_id:a[t].id,box_id:c,pallet_id:l}).then((function(e){n(wc.d.loadUpBoxSuccess(e))})).catch((function(t){console.error(t),t.response.data.errors.pallet_id&&e.current.open({id:c})}))}}}var qc=a(555),Rc=function(e){var t=e.onChange,a=e.value,n=e.showLabel,c=void 0===n||n,r=e.defaultParams,s=void 0===r?{}:r,u=Object(Z.a)(e,["onChange","value","showLabel","defaultParams"]),d=Object(o.e)((function(e){return e.warehouse.pallet.list.data})),v=Object(o.e)((function(e){return e.warehouse.pallet.list.loading})),f=Object(o.d)(),h=Object(b.a)(),p=Object(m.a)(h,1)[0],g=Object(l.useCallback)((function(e){var t,a,n,c;return{value:e.id,label:p("warehouse.pallet.option_label",{id:e.id,pallet_info:(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.floor)?"(F".concat(null===e||void 0===e||null===(a=e.location)||void 0===a?void 0:a.floor," . R").concat(null===e||void 0===e||null===(n=e.location)||void 0===n?void 0:n.row," . C").concat(null===e||void 0===e||null===(c=e.location)||void 0===c?void 0:c.column,")"):""})}}),[p]),j=null===d||void 0===d?void 0:d.map((function(e){return g(e)})),O=Object(l.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e;Object.entries(s).forEach((function(e){var a=Object(m.a)(e,2),n=a[0],c=a[1];t[n]&&["search","searchFields"].includes(n)?t[n]+=";".concat(c):t[n]=c})),t.searchJoin="and",f(Object(qc.b)(Object(E.a)(Object(E.a)({},t),{},{with:"location"})))}),[f,s]);return i.a.createElement(Me,Object.assign({value:a,label:c&&p("warehouse.pallet.find"),className:"select-pallet",placeholder:p("warehouse.pallet.find"),options:j,onChange:function(e){t&&t(e.value)},loading:v,onFetchData:O},u))},Fc=function(e,t){var a=Object(l.useState)(),n=Object(m.a)(a,2),c=n[0],o=n[1],r=Object(l.useState)(),s=Object(m.a)(r,2),u=s[0],d=s[1],v=Object(b.a)(),f=Object(m.a)(v,1)[0],h=Sc(t).loadUpBox;Object(l.useImperativeHandle)(t,(function(){return{open:function(e){var t=e.id;o(!0),d(t)}}}));var p=function(){o(!1)};return i.a.createElement(oe.a,{show:c,onHide:p,title:f("warehouse.load_up_container.select.pallet.title")},i.a.createElement(re.a.Body,null,i.a.createElement(Rc,{onChange:function(e){p(),h(u,e)},defaultParams:{search:"pivotBoxes.box_id:".concat(u),searchFields:"pivotBoxes.box_id:="}}),i.a.createElement("div",{className:"mt-5 text-right"},i.a.createElement("button",{className:"btn btn-secondary",onClick:p},f("common.cancel")))))},Dc=i.a.forwardRef(Fc),Bc=(a(1442),function(e){var t=Object(o.e)(_c),a=Object(b.a)(),n=Object(m.a)(a,1)[0],c=Object(l.useRef)(),r=Object(l.useRef)(),s=Object(o.d)(),u=Sc(c).loadUpBox,d=Object(se.a)(["in-container-pickers.create"]);Object(Rt.d)({condition:function(e){return d},onEnter:function(e){return v(e)}});var v=function(e){setTimeout((function(){r.current.value=""}),100),e&&(null===e||void 0===e?void 0:e.length)&&t&&(kc(t)||(Object(Rt.b)(e)?s(Object(wc.e)({id:e})):u(e)))};return i.a.createElement(i.a.Fragment,null,i.a.createElement(Dc,{ref:c}),i.a.createElement("div",{className:"input-add-data"},i.a.createElement("input",{className:"form-control",placeholder:kc(t)?n("warehouse.container.closed_container"):n("warehouse.container.input.barcode"),ref:r,onKeyPress:function(e){13===e.charCode&&v(e.target.value)},disabled:kc(t)||!d})))}),Pc=(a(1443),function(e){var t=Object(o.e)(Cc),a=Object(o.e)(_c),c=Object(b.a)(),l=Object(m.a)(c,1)[0],r=Object(o.d)(),s=kc(a);return i.a.createElement(f.c,{className:"process-section"},i.a.createElement(Bc,null),i.a.createElement(ia,{messages:t,onDelete:s?void 0:function(e){G.a.inContainerPicker.delete(e.id).then((function(){n.b.success(l("warehouse.io.delete.success")),r(wc.d.removeBoxByPickerId(e))})).catch((function(){n.b.error(l("warehouse.io.delete.failure"))}))},onEdit:s?void 0:function(e){var t=e.newQuantity,a=Object(Z.a)(e,["newQuantity"]);Number(t)>0&&G.a.inContainerPicker.update(a.id,{quantity:Number(t)}).then((function(){n.b.success(l("warehouse.io.update.success")),r(wc.d.updateBoxQuantity(Object(E.a)({newQuantity:Number(t)},a)))})).catch((function(){n.b.error(l("warehouse.io.update.failure"))}))},permissions:{delete:["in-container-pickers.delete"],update:["in-container-pickers.update"]}}))}),Tc=(a(1444),function(e){return{value:e.id,label:"Invoice ".concat(e.id)}}),Mc=function(e){var t,a,n,c,r=Object(o.e)((function(e){return e.warehouse.loadUpContainer.listInvoices.data})),s=Object(o.e)(_c),u=Object(o.d)(),d=Object(b.a)(),v=Object(m.a)(d,1)[0];Object(l.useEffect)((function(){r.length&&!s&&u(wc.d.setCurrentContainer(r[0]))}),[r,s]);var h=Object(l.useMemo)((function(){return s?s.in_pickers.reduce((function(e,t){return e+t.volume||0}),0):0}),[s]),p=Object(l.useMemo)((function(){return s?s.in_pickers.reduce((function(e,t){var a;return e+((null===t||void 0===t||null===(a=t.box)||void 0===a?void 0:a.weight_per_box)||0)*t.quantity}),0):0}),[s]),E=Object(l.useMemo)((function(){return s?Tc(s):""}),[s]);return r.length?i.a.createElement(f.c,{className:"container-status"},i.a.createElement("div",{className:"container-status-head card-header"},i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement("div",{className:"select-current-container"},i.a.createElement(Be.a,{value:E,options:r.map((function(e){return Tc(e)})),onChange:function(e){var t=e.value,a=O.a.find(r,["id",t]);a&&u(wc.d.setCurrentContainer(a))}})),!kc(s)&&i.a.createElement(de,{type:"primary",className:"ml-3",need:["invoices.update"],onClick:function(){u(Object(wc.b)({id:s.id}))}},v("warehouse.container.close_container"))),i.a.createElement("button",{className:"btn btn-link",onClick:function(){u(wc.d.resetSlice())}},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Media/Shuffle.svg"),className:"mr-3"}),v("warehouse.container.reset_data"))),i.a.createElement(f.d,null,i.a.createElement("div",{className:"point-data"},i.a.createElement("div",{className:"invoice-data"},i.a.createElement("div",{className:"d-flex"},i.a.createElement("div",{className:"progress-section-title"},v("warehouse.container.theoretical_volume"),": "),i.a.createElement("div",{className:"invoice-volume invoice-value"},Object(he.a)(null===s||void 0===s?void 0:s.volume))),i.a.createElement("div",{className:"d-flex"},i.a.createElement("div",{className:"progress-section-title"},v("warehouse.container.theoretical_weight"),": "),i.a.createElement("div",{className:"invoice-weight invoice-value"},Object(he.a)(null===s||void 0===s?void 0:s.weight))))),i.a.createElement("div",{className:"container-status-progress"},i.a.createElement("div",{className:"progress-section"},i.a.createElement("div",{className:"progress-section-title mt-5"},v("warehouse.container.current_volume"),": "),i.a.createElement("div",{className:"status-percent"},i.a.createElement(ea.a,{animated:!0,max:1*(null===s||void 0===s||null===(t=s.type)||void 0===t?void 0:t.volume),now:h,label:i.a.createElement("div",{className:"progress-lable"},Object(he.a)(h)," / ",Object(he.a)(1*(null===s||void 0===s||null===(a=s.type)||void 0===a?void 0:a.volume))),variant:"primary"}))),i.a.createElement("div",{className:"progress-section"},i.a.createElement("div",{className:"progress-section-title mt-5"},v("warehouse.container.current_weight"),": "),i.a.createElement("div",{className:"status-percent"},i.a.createElement(ea.a,{animated:!0,max:1e3*(null===s||void 0===s||null===(n=s.type)||void 0===n?void 0:n.weight),now:p,label:i.a.createElement("div",{className:"progress-lable"},Object(he.a)(p)," / ",Object(he.a)(1e3*(null===s||void 0===s||null===(c=s.type)||void 0===c?void 0:c.weight))),variant:"primary"})))))):i.a.createElement(i.a.Fragment,null)},Ic=function(e){var t=Object(b.a)(),a=Object(m.a)(t,1)[0];return i.a.createElement(p,{title:a("warehouse.load_up_container.title")},i.a.createElement("div",{className:"load-up-container"},i.a.createElement(Mc,null),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-4 col-md-5 col-sm-12"},i.a.createElement(xc,null)),i.a.createElement("div",{className:"col-lg-8 col-md-7 col-sm-12"},i.a.createElement(Pc,null)))))},Vc=a(425),Lc=(a(1445),function(e){var t=Object(l.useRef)(),a=Object(o.d)(),n=Object(o.e)((function(e){return e.warehouse.outBoundPicker.goodsDelivery.data})),c=Object(b.a)(),r=Object(m.a)(c,1)[0],s=Object(se.a)(["outbound-pickers.create"]);Object(Rt.d)({condition:function(){return s},onEnter:function(e){return u(e)}});var u=function(e){setTimeout((function(){t.current.value=""}),100),e&&(null===e||void 0===e?void 0:e.length)&&n&&Object(Rt.c)(e)&&a(Object(Vc.c)(e))};return i.a.createElement("div",{className:"input-add-data"},i.a.createElement("input",{className:"form-control",placeholder:r("warehouse.sku.title"),ref:t,onKeyPress:function(e){13===e.charCode&&u(e.target.value)},disabled:!n||!s}))}),Ac=(a(1446),function(e){var t=Object(o.e)((function(e){return e.warehouse.outBoundPicker.process.message})),a=Object(o.d)(),c=Object(b.a)(),l=Object(m.a)(c,1)[0];return i.a.createElement(f.c,{className:"process-section"},i.a.createElement(Lc,null),i.a.createElement(ia,{messages:t,onDelete:function(e){G.a.outBoundPicker.delete(e.id).then((function(){n.b.success(l("warehouse.io.delete.success")),a(Vc.b.removeBoxByPickerId(e.id))})).catch((function(){n.b.error(l("warehouse.io.delete.failure"))}))},onEdit:function(e){var t=e.newQuantity,c=Object(Z.a)(e,["newQuantity"]);Number(t)>0&&G.a.outBoundPicker.update(c.id,{quantity:Number(t)}).then((function(){n.b.success(l("warehouse.io.update.success")),a(Vc.b.updateBoxQuantity(Object(E.a)({newQuantity:Number(t)},c)))})).catch((function(){n.b.error(l("warehouse.io.update.failure"))}))},permissions:{update:["outbound-pickers.update"],delete:["outbound-pickers.delete"]}}))}),Yc=(0,a(257).createSelector)([function(e){return e.warehouse.outBoundPicker.goodsDelivery.data}],(function(e){var t={};return e?(t=e.pivot_boxes.reduce((function(e,t){return e[t.box_lading_bill.owning_box.box_id]?e[t.box_lading_bill.owning_box.box_id].quantity+=t.quantity:e[t.box_lading_bill.owning_box.box_id]={quantity:t.quantity,count:0},e}),Object(E.a)({},t)),t=e.out_bound_pickers.reduce((function(e,t){return e[t.box_id]?e[t.box_id].count+=t.quantity:e[t.box_id]={count:t.quantity,quantity:0},e}),Object(E.a)({},t))):t})),Hc=(a(1447),function(e){var t=e.onChange,a=e.value,n=e.showLabel,c=void 0===n||n,r=Object(Z.a)(e,["onChange","value","showLabel"]),s=Object(o.e)((function(e){return e.warehouse.goodsDelivery.list.data})),u=Object(o.e)((function(e){return e.warehouse.goodsDelivery.list.loading})),d=Object(o.d)(),v=Object(b.a)(),f=Object(m.a)(v,1)[0],h=Object(l.useCallback)((function(e){return{value:e.id,label:f("warehouse.goods_delivery.id",{id:e.id})}}),[f]),p=null===s||void 0===s?void 0:s.map((function(e){return h(e)}));return i.a.createElement(Me,Object.assign({value:a,label:c&&f("warehouse.goods_delivery.title"),className:"select-goods-delivery",placeholder:f("warehouse.goods_delivery.find"),options:p,onChange:function(e){t&&t(e.value)},loading:u,onFetchData:function(e){d(Object(da.b)(e))}},r))}),Uc=function(e){var t=Object(o.d)();return i.a.createElement(Hc,{onChange:function(e){t(Object(Vc.d)({id:e}))},showLabel:!1})},Kc=(a(1448),function(e){var t=Object(o.e)(Yc),a=Object(o.e)((function(e){return e.warehouse.outBoundPicker.goodsDelivery.data})),n=Object(b.a)(),c=Object(m.a)(n,1)[0];return i.a.createElement(f.c,{className:"target-section"},i.a.createElement(Uc,null),i.a.createElement(Ct,{targetBoxes:t,currentContainer:a,labelPrefix:c("warehouse.goods_delivery.title")}))}),zc=function(e){var t=Object(b.a)(),a=Object(m.a)(t,1)[0];return i.a.createElement(p,{title:a("MENU.WAREHOUSE.OUTBOUND_PICKER")},i.a.createElement("div",{className:"outbound-picker"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-4 col-md-5 col-sm-12"},i.a.createElement(Kc,null)),i.a.createElement("div",{className:"col-lg-8 col-md-7 col-sm-12"},i.a.createElement(Ac,null)))))},Qc=function(e){var t=Object(r.h)();return i.a.createElement(L,{onViewEdit:function(e){t.push("/warehouse/inbound/step-4/".concat(e))},type:"box"})},Gc=function(e){return i.a.createElement(p,{title:"\u0110\xf3ng g\xf3i"},i.a.createElement(Qc,null))},Jc=a(1619),Wc=a(1607),Xc=a(1618),$c=function(e){var t=e.closeSection,a=Object(o.e)((function(e){return e.warehouse.sfa.detail})).data,c=Object(l.useState)(!1),r=Object(m.a)(c,2),s=r[0],u=r[1],d=Object(o.d)(),v=Object(b.a)(),f=Object(m.a)(v,1)[0],h=Object(l.useRef)(),p=Object(l.useMemo)((function(){if(a)return Object(E.a)(Object(E.a)({},a),{},{arrival_date:_()(a.arrival_date,"DD-MM-YYYY HH:mm").toDate()})}),[a]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(xn,{formItemClass:"col-lg-4 col-md-6 col-sm-12",editMode:!0,onSubmit:function(e,c){u(!0);var l=pn(e);G.a.SFA.update(a.id,l).then((function(e){n.b.success(f("warehouse.sfa.update.success")),t&&t(),d(Object(g.b)({id:e.id,with:"boxes;agency;receipts"}))})).catch((function(e){console.error(e,"err"),n.b.error(f("warehouse.sfa.update.failure")),J(e,c)})).finally((function(){u(!1)}))},initialValues:p,ref:h}),i.a.createElement("div",{className:"step-actions text-right"},i.a.createElement(de,{type:"secondary",onClick:t,loading:s,className:"btn-large"},f("common.cancel")),i.a.createElement(de,{type:"primary",onClick:function(){h.current.submitForm()},loading:s,className:"btn-large ml-3",htmlType:"submit",need:["sfas.update"]},f("common.save"))))},Zc=a(1247),el=function(e){var t=e.children,a=e.title,n=Object(Z.a)(e,["children","title"]);return i.a.createElement(Zc.a,Object.assign({className:"custom-dropdown"},n),i.a.createElement(Zc.a.Toggle,{as:"span",className:"custom-dropdown-toggle cursor-pointer"},a),i.a.createElement(Zc.a.Menu,null,t))};el.Item=Zc.a.Item;var tl=el;X.d().shape({file:X.d().required("Required")});var al=function(e){var t=e.initialValues,a=void 0===t?{file:""}:t,n=e.onSubmit,c=e.closeSection,l=Object(b.a)(),o=Object(m.a)(l,1)[0];return i.a.createElement(W.d,{initialValues:a,onSubmit:n},(function(e){var t,a=e.handleSubmit,n=e.setFieldValue,l=e.values;return i.a.createElement(i.a.Fragment,null,i.a.createElement(W.c,{className:"form form-label-right form-add-receipt"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:""},o("warehouse.receipt.file")),i.a.createElement("div",{className:"custom-file"},i.a.createElement("input",{name:"file",type:"file",className:"custom-file-input",id:"customFile",onChange:function(e){return n("file",e.currentTarget.files[0])}}),i.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},(null===l||void 0===l||null===(t=l.file)||void 0===t?void 0:t.name)||o("common.choose_file")))),i.a.createElement($,null)),i.a.createElement("div",{className:"form-actions"},i.a.createElement("button",{className:"btn btn-secondary",onClick:c},o("common.close")),i.a.createElement(de,{type:"primary",onClick:a,need:["receipts.create"],className:"ml-3"},o("common.save"))))}))},nl=(a(1449),function(e){var t,a=e.closeSection,c=Object(o.e)((function(e){return e.warehouse.sfa.detail.data})),r=Object(o.d)(),s=function(e){var t=e.onRefresh,a=Object(l.useState)(),c=Object(m.a)(a,2),i=c[0],o=c[1],r=Object(b.a)(),s=Object(m.a)(r,1)[0];return[i,function(e,a){var c=e.sfaId,l=e.file;o(!0);var i=new FormData;return i.set("file",l,l.name),G.a.receipt.create(c,i).then((function(e){return n.b.success(s("warehouse.receipt.create.success")),t&&t(),a.resetForm(),e})).catch((function(e){n.b.error(s("warehouse.receipt.create.failure")),J(e,a)})).finally((function(){o(!1)}))},function(e){return o(!0),G.a.receipt.delete(e).then((function(e){return n.b.success(s("warehouse.receipt.delete.success")),t&&t(),e})).catch((function(){n.b.error(s("warehouse.receipt.delete.failure"))})).finally((function(){o(!1)}))}]}({onRefresh:function(){r(Object(g.b)({id:c.id,with:"boxes;agency;receipts"}))}}),u=Object(m.a)(s,3),d=u[0],v=u[1],f=u[2],h=Object(l.useRef)(),p=Object(b.a)(),E=Object(m.a)(p,1)[0];return i.a.createElement("div",{className:"edit-receipt"},i.a.createElement(Ra,{ref:h,onOk:function(e){var t=e.receiptId;f(t)}}),i.a.createElement("div",{className:"d-flex"},i.a.createElement("div",{className:"form-edit-receipt position-relative"},d&&i.a.createElement(x.a,{local:!0}),i.a.createElement(al,{initialValues:{file:""},onSubmit:function(e,t){e.file&&v({sfaId:c.id,file:e.file},t)},closeSection:a})),i.a.createElement("div",{className:"receipt-list"},!(null===c||void 0===c||null===(t=c.receipts)||void 0===t?void 0:t.length)&&i.a.createElement(Re.a,{emptyText:"Kh\xf4ng c\xf3 receipt n\xe0o."}),c&&(c.receipts||[]).map((function(e,t){return i.a.createElement("div",{className:"receipt-item",key:"receipt-item-".concat(t)},i.a.createElement("div",{className:"receipt-info"},i.a.createElement("div",{className:"receipt-path"},E("common.file_path"),": ",i.a.createElement("span",{className:"font-weight-bold"},e.path_file)),i.a.createElement("div",{className:"receipt-time-create"},E("common.created_at"),": ",i.a.createElement("span",{className:"font-weight-bold"},e.created_at))),i.a.createElement("div",{className:"receipt-actions"},i.a.createElement(V.a,{need:["receipts.index"]},i.a.createElement(xe.a,{color:"primary",size:"small",onClick:function(){return function(e){window.open("".concat("http://warehouse.tomonisolution.com:82","/files/").concat(e.path_file),"_blank")}(e)}},E("common.download"))),i.a.createElement(V.a,{need:["receipts.delete"]},i.a.createElement(xe.a,{size:"small",onClick:function(){return function(e){h.current.open({title:E("warehouse.receipt.confirm_delete"),receiptId:e.id})}(e)}},E("warehouse.receipt.delete.title")))))})))))}),cl=a(1299),ll=a.n(cl),il=function(e){var t=e.closeSection,a=Object(o.e)((function(e){return e.warehouse.sfa.detail.data})),n=Object(b.a)(),c=Object(m.a)(n,1)[0];return i.a.createElement("div",{className:"show-tracking-barcode"},i.a.createElement("div",{className:"m-5 d-flex align-items-center justify-content-center"},i.a.createElement(ll.a,{value:(null===a||void 0===a?void 0:a.tracking)||"0",textPosition:"top",height:60})),i.a.createElement("div",{className:"mt-5 text-right"},i.a.createElement("button",{className:"btn btn-secondary",onClick:t},c("common.cancel"))))},ol=(a(1485),function(e){var t=Object(l.useState)(!1),a=Object(m.a)(t,2),n=a[0],c=a[1],s=Object(l.useState)(),u=Object(m.a)(s,2),d=u[0],v=u[1],f=Object(o.e)((function(e){return e.warehouse.sfa.detail})).data,h=Object(o.e)((function(e){return e.warehouse.agency.list})),p=Object(r.j)(),g=Object(b.a)(),j=Object(m.a)(g,1)[0],w=function(){v("form-edit"),n?"form-edit"===d&&c(!1):c(!0)},_=function(){v("receipt"),n?"receipt"===d&&c(!1):c(!0)},y=function(){v("tracking-barcode"),n?"tracking-barcode"===d&&c(!1):c(!0)};return(null===p||void 0===p?void 0:p.sfa_id)?i.a.createElement("div",{className:"current-sfa-container"},i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement("div",{className:"current-sfa position-relative"},i.a.createElement("div",{className:"current-sfa-id"},(null===f||void 0===f?void 0:f.id)?"".concat(j("warehouse.sfa.title"),": ").concat(null===f||void 0===f?void 0:f.id):""),i.a.createElement("div",{className:"current-sfa-tracking"},(null===f||void 0===f?void 0:f.tracking)?"".concat(j("warehouse.tracking.title"),": ").concat(null===f||void 0===f?void 0:f.tracking):""),i.a.createElement("div",{className:"current-sfa-quantity"},(null===f||void 0===f?void 0:f.quantity)?"".concat(j("common.quantity"),": ").concat(null===f||void 0===f?void 0:f.quantity):""),i.a.createElement("div",{className:"current-sfa-created-at"},(null===f||void 0===f?void 0:f.created_at)?"".concat(j("common.created_at"),": ").concat(null===f||void 0===f?void 0:f.created_at):"")),i.a.createElement("div",{className:"action-edit-sfa"},i.a.createElement(tl,{title:i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Text/Menu.svg")}),className:"svg-icon svg-icon-primary svg-icon-2x text-primary"},i.a.createElement(tl.Item,{onClick:y},i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement("span",{className:"svg-icon svg-icon-primary mr-3"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Shopping/Barcode.svg")})),i.a.createElement("span",null,j("warehouse.tracking.id")))),!!f&&i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{need:"sfas.update"},i.a.createElement(tl.Item,{onClick:w},i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement("span",{className:"svg-icon svg-icon-primary mr-3"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Design/Edit.svg")})),i.a.createElement("span",null,j("warehouse.sfa.edit_info"))))),i.a.createElement(V.a,{need:["receipts.create","receipts.update","receipts.delete","receipt.index"]},i.a.createElement(tl.Item,{onClick:_},i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement("span",{className:"svg-icon svg-icon-primary mr-3"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Files/Uploaded-file.svg")})),i.a.createElement("span",null,j("warehouse.receipt.save")))))),i.a.createElement(tl.Item,{onClick:function(){var e=O.a.find(h,(function(e){return e.id==f.agency_id}));Object(Dt.b)(Pt("SFA",Object(E.a)(Object(E.a)({},f),{},{sfaId:f.id,region:(null===e||void 0===e?void 0:e.name)||"Tokyo"})))}},i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement("span",{className:"svg-icon svg-icon-success mr-3"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Devices/Printer.svg")})),i.a.createElement("span",null,j("warehouse.sfa.print_label")))),i.a.createElement(tl.Item,{onClick:function(){Object(Dt.b)(Pt("TRACKING",{tracking:f.tracking,quantity:2,sfaQuantity:f.quantity}))}},i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement("span",{className:"svg-icon svg-icon-primary mr-3"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Devices/Printer.svg")})),i.a.createElement("span",null,j("warehouse.tracking.print_label"))))))),i.a.createElement("div",{className:Object(k.a)("form-edit-sfa-section",n?"show":"hide")},i.a.createElement("div",{className:"form-edit-sfa-wrapper"},"form-edit"===d&&i.a.createElement($c,{closeSection:w}),"receipt"===d&&i.a.createElement(nl,{closeSection:_}),"tracking-barcode"===d&&i.a.createElement(il,{closeSection:y})))):i.a.createElement(i.a.Fragment,null)}),rl=(a(1486),function(e){var t=Object(o.e)((function(e){return e.warehouse.performEntry.steps})),a=Object(r.i)(),n=Object(r.h)(),c=Object(r.j)(),s=Object(b.a)(),u=Object(m.a)(s,1)[0],d=Object(l.useMemo)((function(){var e=a.pathname.match(/step-(\d)/g);return e?Number(e[0].split("").pop())-1:0}),[a]);return i.a.createElement(f.c,{className:"perform-entry-steps"},i.a.createElement(f.e,{title:u("warehouse.warehouse")}),i.a.createElement(f.d,null,i.a.createElement(Jc.a,{alternativeLabel:!0,activeStep:d},t.map((function(e,t){return i.a.createElement(Wc.a,{key:e,onClick:function(){var e;(e=t+1)!==d+1&&e>1&&(null===c||void 0===c?void 0:c.sfa_id)&&n.push("/warehouse/inbound/step-".concat(e,"/").concat(null===c||void 0===c?void 0:c.sfa_id))}},i.a.createElement(Xc.a,null,u(e)))}))),i.a.createElement(ol,null)))}),sl=a(1364),ul=a(1608),dl=(a(1487),function(e){var t=Object(l.useState)(!1),a=Object(m.a)(t,2),c=a[0],s=a[1],u=Object(l.useState)(!1),d=Object(m.a)(u,2),v=d[0],h=d[1],p=Object(o.e)((function(e){return e.warehouse.agency.list})),g=Object(r.h)(),j=Object(b.a)(),w=Object(m.a)(j,1)[0],_=Object(l.useRef)(),y=function(){var e=Object(Q.a)(z.a.mark((function e(t,a){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,N(t,a);case 3:s(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),N=function(e,t){return G.a.SFA.create(pn(e)).then((function(e){n.b.success(w("warehouse.sfa.create.success")),v?C(e):k(e)})).catch((function(e){n.b.error(w("warehouse.sfa.create.failure")),J(e,t)}))},x=Object(l.useMemo)((function(){var e;return{tracking:"",quantity:1,shipping_inside:0,coupon:"",agency_id:null===p||void 0===p||null===(e=p[0])||void 0===e?void 0:e.id,arrival_date:new Date}}),[p]),k=function(e){g.push("/warehouse/inbound/step-2/".concat(e.id))},C=function(e){var t=e.agency_id,a=O.a.find(p,(function(e){return e.id==t}));Object(Dt.b)(Pt("SFA",Object(E.a)(Object(E.a)({},e),{},{sfaId:e.id,region:(null===a||void 0===a?void 0:a.name)||"Tokyo"}))),k(e)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(rl,null),i.a.createElement(f.c,{className:"perform-step-page step-1"},i.a.createElement(f.e,{title:w("warehouse.sfa.create.title")}),i.a.createElement(f.d,null,i.a.createElement("div",{className:"d-flex align-items-center justify-content-end"},i.a.createElement(ul.a,{control:i.a.createElement(sl.a,{checked:v,onChange:function(e){h(e.target.checked)},color:"primary",name:"checkedB",inputProps:{"aria-label":"primary checkbox"}}),label:w("warehouse.sfa.create.and_print_label")})),i.a.createElement("div",{className:"step-1-form"},i.a.createElement(xn,{formItemClass:"col-lg-4 col-md-6 col-sm-12",onSubmit:y,initialValues:x,ref:_}),i.a.createElement("div",{className:"step-actions text-right"},i.a.createElement(de,{type:"primary",onClick:function(){_.current.submitForm()},loading:c,className:"btn-large",htmlType:"submit",need:["sfas.create"]},w("common.create")))))))}),ml=(a(1488),function(){var e=Object(l.useState)(!1),t=Object(m.a)(e,2),a=t[0],n=t[1],c=Object(l.useState)({}),o=Object(m.a)(c,2),s=o[0],u=o[1],d=Object(b.a)(),v=Object(m.a)(d,1)[0],f=Object(r.h)(),h=Object(l.useCallback)((function(e){var t=e.detail,a=t.totalSku,c=t.quantity;n(!0),u({totalSku:a,quantity:c})}),[]);Object(l.useEffect)((function(){return window.addEventListener("checking-box-return-wrong-quantity",h),function(){window.removeEventListener("checking-box-return-wrong-quantity",h)}}),[h]);var p=function(){n(!a)};return i.a.createElement(oe.a,{show:a,onHide:p,title:v("warehouse.io.confirm.data.sfa_sku.wrong"),className:"modal-confirm-next-step"},i.a.createElement(re.a.Body,null,i.a.createElement("div",{className:"confirm-data"},i.a.createElement("span",{className:"text-danger"},null===s||void 0===s?void 0:s.totalSku)," / ",i.a.createElement("span",{className:"text-success"},null===s||void 0===s?void 0:s.quantity)),i.a.createElement("div",{className:"actions"},i.a.createElement(Vt.a,{variant:"secondary",onClick:p},v("common.continue")),i.a.createElement(Vt.a,{variant:"primary",onClick:function(){p(),f.goBack()}},v("common.back")))))}),bl=(a(1489),function(e){var t=Object(o.e)((function(e){return e.warehouse.box.detail.data})),a=Object(r.h)(),n=Object(r.k)(),c=Object(o.e)((function(e){return e.warehouse.agency.list})),s=Object(b.a)(),u=Object(m.a)(s,1)[0],d=Object(l.useMemo)((function(){var e;return t&&(null===t||void 0===t||null===(e=t.items)||void 0===e?void 0:e.length)?t.items.reduce((function(e,t){return e+t.quantity}),0):0}),[t]);return i.a.createElement(f.c,{className:"current-box-section"},i.a.createElement(f.d,null,i.a.createElement("div",{className:"current-box-section__content"},i.a.createElement("div",{className:"info-section"},i.a.createElement("div",{className:"icon-section"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Shopping/Box4.svg")}),i.a.createElement("div",{className:"bar-code"},i.a.createElement(ll.a,{value:(null===t||void 0===t?void 0:t.id)||"0",textPosition:"top",height:40}))),i.a.createElement("div",{className:"content-section"},i.a.createElement("div",{className:"box-info row"},i.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-6"},i.a.createElement("span",{className:"title"},u("common.width"),":")," ",Object(he.a)(null===t||void 0===t?void 0:t.width)),i.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-6"},i.a.createElement("span",{className:"title"},u("common.height"),":")," ",Object(he.a)(null===t||void 0===t?void 0:t.height)),i.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-6"},i.a.createElement("span",{className:"title"},u("common.length"),":")," ",Object(he.a)(null===t||void 0===t?void 0:t.length)),i.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-6"},i.a.createElement("span",{className:"title"},u("common.weight"),":")," ",Object(he.a)(null===t||void 0===t?void 0:t.weight_per_box)),i.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-6"},i.a.createElement("span",{className:"title"},u("common.volume"),":")," ",Object(he.a)(null===t||void 0===t?void 0:t.volume_per_box)),i.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-6"},i.a.createElement("span",{className:"title"},u("warehouse.box_item.quantity"),":")," ",Object(he.a)(d)),i.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-6"},i.a.createElement("span",{className:"title"},u("warehouse.sku.duplicate"),":")," ",Object(he.a)(null===t||void 0===t?void 0:t.duplicate))),i.a.createElement("div",{className:"action-section d-flex align-items-center justify-content-end mt-3"},i.a.createElement(Vt.a,{variant:"success",className:"btn-large",onClick:function(){var e,a,n,l=O.a.find(c,(function(e){var a;return e.id==(null===t||void 0===t||null===(a=t.sfa)||void 0===a?void 0:a.agency_id)})),i=d;Object(Dt.b)(Pt("SKU",Object(E.a)(Object(E.a)({},t),{},{sku:null===t||void 0===t?void 0:t.id,quantity:(null===t||void 0===t?void 0:t.duplicate)||1,tracking:null===t||void 0===t||null===(e=t.sfa)||void 0===e?void 0:e.tracking,sfaId:null===t||void 0===t||null===(a=t.sfa)||void 0===a?void 0:a.id,region:(null===l||void 0===l?void 0:l.name)||"Tokyo",itemQuantity:i,createdDate:null===t||void 0===t||null===(n=t.sfa)||void 0===n?void 0:n.created_at})))}},u("warehouse.sku.print_label")),i.a.createElement(V.a,{need:"boxes.update"},i.a.createElement(Vt.a,{variant:"primary",className:"ml-3 btn-large",onClick:function(){a.push("".concat(n.url,"/edit-box"))}},u("common.edit"))),i.a.createElement(V.a,{need:"boxes.create"},i.a.createElement(Vt.a,{variant:"success",className:"ml-3 btn-large",onClick:function(){a.push("".concat(n.url,"/create-box"))}},u("GLOBAL.BUTTON.CREATE")))))))))}),vl=a(402);function fl(e){new Audio(e).play()}function hl(e){var t=Object(o.e)((function(e){return e.warehouse.box.detail.data})),a=Object(o.e)((function(e){return e.warehouse.performEntry.checking_goods.box_items})),c=Object(o.d)(),i=Object(b.a)(),r=Object(m.a)(i,1)[0],s=Object(l.useState)(!1),u=Object(m.a)(s,2),d=u[0],v=u[1],f=Object(se.a)(["box-items"]),h=function(e,t){var a;fl("".concat("http://domain.com","/media/audio/worf.mp3")),a=e,c(vl.d.addBoxItem(a))};return{handleAddBoxItem:function(a,c){if(!f)return fl("".concat("http://domain.com","/media/audio/wrong-answer.mp3")),void n.b.error(r("warehouse.box_item.create.need_permission"));var l;(l=a.product_id,bt.a.fetchProductById({id:l,params:{with:"package"}}).catch((function(){n.b.error(r("warehouse.sku.box_item.not_found",{id:l})),fl("".concat("http://domain.com","/media/audio/wrong-answer.mp3"))}))).then((function(n){n&&(!function(e){var a,n=(null===e||void 0===e||null===(a=e.package)||void 0===a?void 0:a.volume)||0;return t.volume_per_box>n}(n)?(fl("".concat("http://domain.com","/media/audio/wrong-answer.mp3")),e.current.open({title:r("warehouse.sku.confirm_box_over_volume.item"),formData:Object(E.a)(Object(E.a)({},a),{},{box_id:t.id,product:n}),form:c})):h(Object(E.a)(Object(E.a)({},a),{},{box_id:t.id,product:n})))})),setTimeout((function(){c.resetForm()}),200)},continueAddProduct:function(e){var t=e.formData;e.form;h(t)},updateBoxItem:function(e,t,a){if(!f)return fl("".concat("http://domain.com","/media/audio/wrong-answer.mp3")),void n.b.error(r("warehouse.box_item.update.need_permission"));switch(e){case"quantity":c(vl.d.updateQuantityBoxItem({rowIdx:t,quantity:a}));break;case"expiry_date":c(vl.d.updateExpiryDateBoxItem({rowIdx:t,expiry_date:a}));break;default:return}},deleteBoxItem:function(e,t){if(!f)return fl("".concat("http://domain.com","/media/audio/wrong-answer.mp3")),void n.b.error(r("warehouse.box_item.delete.need_permission"));c(vl.d.deleteBoxIem({rowIdx:t,isRespectRedux:!e.id})),e.id&&G.a.boxItem.delete(e.id).then((function(){n.b.success(r("warehouse.box_item.delete.success"))})).catch((function(){n.b.error(r("warehouse.box_item.delete.failure")),c(vl.d.addBoxItem(e))}))},loading:d,closeBoxItems:function(){if(!f)return fl("".concat("http://domain.com","/media/audio/wrong-answer.mp3")),void n.b.error(r("warehouse.box_item.need_permission"));var e=Object(fe.a)(a).reduce((function(e,t){if(e[t.product_id]){var a=e[t.product_id].expiry_date||t.expiry_date;a&&_()(a,"DD-MM-YYYY",!0).isValid()&&(a=_()(a,"DD-MM-YYYY").format("YYYY-MM-DD")),e[t.product_id]=Object(E.a)(Object(E.a)({},e[t.product_id]),{},{id:e[t.product_id].id||t.id,quantity:e[t.product_id].quantity+Number(t.quantity),expiry_date:a})}else e[t.product_id]=Object(E.a)(Object(E.a)({},t),{},{quantity:Number(t.quantity),expiry_date:t.expiry_date?_()(t.expiry_date,"DD-MM-YYYY").format("YYYY-MM-DD"):null});return e}),{});v(!0),Promise.all(Object.values(e).map((function(e){return e.id?G.a.boxItem.update(e.id,O.a.pick(e,["product_id","box_id","quantity","expiry_date"])):G.a.boxItem.create(O.a.pick(e,["quantity","box_id","product_id","expiry_date"]))}))).then((function(){n.b.success(r("warehouse.sku.box_item.close.success")),c(Object(vl.b)())})).catch((function(e){console.error(e),n.b.error(r("warehouse.sku.box_item.close.failure"))})).finally((function(){v(!1)}))}}}var pl=a(407),El=a(405),gl=a(400),jl=a(391),Ol=a(1325),wl=(a(415),a(1263)),_l=a(1330),yl=a(1298),Nl=(a(1490),function(e){var t=e.show,a=e.onHide,c=e.onSuccess,r=Object(l.useState)([]),s=Object(m.a)(r,2),u=s[0],d=s[1],v=Object(l.useState)("https://static.thenounproject.com/png/558475-200.png"),f=Object(m.a)(v,2),h=f[0],p=f[1],E=Object(o.e)((function(e){return{unitList:e.product.unit.unitList}}),o.c).unitList,g=Object(o.e)((function(e){var t;return null===(t=e.product.tax)||void 0===t?void 0:t.taxList})),j=Object(o.e)((function(e){var t;return null===(t=e.product.origin)||void 0===t?void 0:t.originList})),O=Object(o.d)(),w=Object(b.a)(),_=Object(m.a)(w,1)[0],y=X.d().shape({id:X.f().max(13,_("validation.message.max_string",{max:13})).required(_("validation.message.required")),name:X.f().required(_("validation.message.required")),price:X.c().required(_("validation.message.required"))}),N=Object(wl.c)({resolver:Object(_l.yupResolver)(y)}),x=N.register,k=N.handleSubmit,C=N.errors,S=N.reset,q=N.setValue,R=Object(yl.a)(),F=Object(m.a)(R,2),D=F[0],B=F[1];Object(l.useEffect)((function(){O(Object(El.d)()),O(Object(pl.d)()),O(Object(gl.d)())}),[]);var P=g.map((function(e){return{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name}})),T=j.map((function(e){return{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name}})),M=E.map((function(e){return{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name}})),I=function(){S({id:"",name:"",price:"",origin_id:"",unit_id:"",ingredients:[],tax_id:""}),p("https://static.thenounproject.com/png/558475-200.png"),d([])},V=function(e){var t={id:e.id||"",name:e.name||"",price:e.price||"",origin_id:e.origin_id||"",unit_id:e.unit_id||"",ingredients:JSON.stringify(e.tags||[]),tax_id:e.tax_id||"",image_url:h,package:JSON.stringify({quantity:e.quantity,height:e.height,weight:e.weight,length:e.length,width:e.width})};if(null!=D){var a=new FormData;a.set("image",D.file,D.name),L({params:t,data:a})}else A(t)},L=function(e){O(Object(jl.b)(e)).then((function(e){e.type.includes("fulfilled")?(n.b.success(_("warehouse.jancode.create.success")),c&&c(e.payload),I()):n.b.error(_("warehouse.jancode.create.success"))}))},A=function(e){O(Object(jl.a)(e)).then((function(e){e.type.includes("fulfilled")?(n.b.success(_("warehouse.jancode.create.success")),c&&c(e.payload),I()):n.b.error(_("warehouse.jancode.create.failure"))}))};return i.a.createElement(oe.a,{title:_("warehouse.jancode.create.title"),onHide:a,actionsLoading:!1,show:t,className:"dialog-add-new-product"},i.a.createElement(re.a.Body,null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-5 col-md-4 app-image"},i.a.createElement("button",{onClick:function(){return B({accept:"image/*"})},type:"button","data-toggle":"tooltip","data-placement":"top",title:_("warehouse.jancode.image.click_to_change")},i.a.createElement("img",{src:(null===D||void 0===D?void 0:D.source)||h,alt:"preview"})),i.a.createElement("div",{className:"input-group mt-3"},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("span",{className:"input-group-text",id:"basic-addon3",style:{backgroundColor:"#3699FF",color:"#ffffff"}},_("warehouse.jancode.image.url"))),i.a.createElement("input",{type:"text",className:"form-control",id:"basic-url","aria-describedby":"basic-addon3",onChange:function(e){var t=e.target.value;t.includes("data:")?n.b.error(_("validation.message.not_found.url")):p(t)}}))),i.a.createElement("div",{className:"col-lg-7 col-md-8 pl-10"},i.a.createElement("form",{onSubmit:k(V)},i.a.createElement("div",{className:"form-group row align-items-center"},i.a.createElement("div",{className:"col-3"},i.a.createElement("span",{className:"order-title"},_("warehouse.jancode.id"))),i.a.createElement("div",{className:"col-9"},i.a.createElement("input",{className:"form-control",name:"id",ref:x}),C.id&&i.a.createElement("p",{style:{color:"red",margin:"unset"}},C.id.message))),i.a.createElement("div",{className:"form-group row align-items-center"},i.a.createElement("div",{className:"col-3"},i.a.createElement("span",{className:"order-title"},_("common.name"))),i.a.createElement("div",{className:"col-9"},i.a.createElement("input",{className:"form-control",name:"name",ref:x}),C.name&&i.a.createElement("p",{style:{color:"red",margin:"unset"}},C.name.message))),i.a.createElement("div",{className:"form-group row align-items-center"},i.a.createElement("div",{className:"col-3"},i.a.createElement("span",{className:"order-title"},_("common.price"))),i.a.createElement("div",{className:"col-9"},i.a.createElement("input",{type:"number",min:"1",className:"form-control",name:"price",ref:x}),C.price&&i.a.createElement("p",{style:{color:"red",margin:"unset"}},C.price.message))),i.a.createElement("div",{className:"form-group row align-items-center"},i.a.createElement("div",{className:"col-3"},i.a.createElement("span",{className:"order-title"},_("warehouse.jancode.origin.title"))),i.a.createElement("div",{className:"col-9"},i.a.createElement(Be.a,{ref:function(){return x("origin_id")},name:"origin_id",defaultValue:"",options:T,onChange:function(e){return q("origin_id",e.value)},placeholder:_("warehouse.jancode.origin.select_title")}),C.origin_id&&i.a.createElement("p",null,_("validation.message.required")))),i.a.createElement("div",{className:"form-group row align-items-center"},i.a.createElement("div",{className:"col-3"},i.a.createElement("span",{className:"order-title"},_("warehouse.jancode.unit.title"))),i.a.createElement("div",{className:"col-9"},i.a.createElement(Be.a,{ref:function(){return x("unit_id")},name:"unit_id",defaultValue:"",options:M,onChange:function(e){return q("unit_id",e.value)},placeholder:_("warehouse.jancode.unit.select_title")}),C.exampleRequired&&i.a.createElement("p",null,_("validation.message.required")))),i.a.createElement("div",{className:"form-group row align-items-center"},i.a.createElement("div",{className:"col-3"},i.a.createElement("span",{className:"order-title"},_("warehouse.jancode.tax.title"))),i.a.createElement("div",{className:"col-9"},i.a.createElement(Be.a,{ref:function(){return x("tax_id")},name:"tax_id",defaultValue:"",options:P,onChange:function(e){return q("tax_id",e.value)},placeholder:_("warehouse.jancode.tax.select_title")}),C.exampleRequired&&i.a.createElement("p",null,_("validation.message.required")))),i.a.createElement("div",{className:"form-group row align-items-center"},i.a.createElement("div",{className:"col-3"},i.a.createElement("span",{className:"order-title"},_("warehouse.jancode.properties.title"))),i.a.createElement("div",{className:"col-9"},i.a.createElement(Ol.a,{ref:function(){return x("tags")},className:"form-control ",tags:u,placeholder:_("warehouse.jancode.properties.title"),editable:!0,readOnly:!1,onChange:function(e){q("tags",e),d(e)},allowDuplicates:!1}))))))),i.a.createElement(re.a.Footer,null,i.a.createElement(Vt.a,{variant:"secondary",onClick:a},_("common.cancel")),i.a.createElement(Vt.a,{variant:"primary",onClick:k(V)},_("common.save"))))}),xl=function(e){var t=Object(W.g)(),a=t.setFieldValue,n=t.submitForm,c=Object(l.useState)(null),o=Object(m.a)(c,2),r=o[0],s=o[1],u=Object(l.useState)(!1),d=Object(m.a)(u,2),v=d[0],f=d[1],h=Boolean(r),p=Object(b.a)(),E=Object(m.a)(p,1)[0],g=function(){return f(!v)},j=function(){s(null)};return i.a.createElement("div",{className:"add-product-label"},E("warehouse.jancode.title"),i.a.createElement(Vt.a,{variant:"link",onClick:function(e){s(e.currentTarget)},className:"p-0 border-0"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Code/Info-circle.svg")})),i.a.createElement(En.a,{open:h,anchorEl:r,onClose:j,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"}},i.a.createElement("div",{className:"p-3"},E("warehouse.jancode.not_have_jancode"),"? ",i.a.createElement(Vt.a,{variant:"link",onClick:function(){g(),j()}},E("warehouse.jancode.create.title")))),i.a.createElement(Nl,{show:v,onHide:g,onSuccess:function(e){g(),setTimeout((function(){a("product_id",null===e||void 0===e?void 0:e.id).then((function(){n()}))}),600)}}))},kl=i.a.memo(xl),Cl=function(e,t){var a=Object(l.useRef)();a.current=t,Object(l.useEffect)((function(){var t=function(t){var n;!(null===e||void 0===e||null===(n=e.current)||void 0===n?void 0:n.contains(t.target))&&a.current&&a.current(t)};return document.addEventListener("click",t,!0),function(){document.removeEventListener("click",t,!0)}}),[a,e])};a(1491);function Sl(e){return!isNaN(Number(e))}var ql=function(e){var t=e.field,a=e.form,n=e.label,c=e.withFeedbackLabel,o=void 0===c||c,r=e.customFeedbackLabel,s=e.type,u=void 0===s?"text":s,d=(e.autoFocus,Object(Z.a)(e,["field","form","label","withFeedbackLabel","customFeedbackLabel","type","autoFocus"]),Object(l.useState)("")),b=Object(m.a)(d,2),v=b[0],h=b[1],p=Object(l.useState)(!1),E=Object(m.a)(p,2),g=E[0],j=E[1],w=Object(l.useState)(!1),_=Object(m.a)(w,2),y=_[0],N=_[1],k=Object(l.useState)([]),C=Object(m.a)(k,2),S=C[0],q=C[1],R=Object(l.useRef)(),F=Object(l.useRef)(),D=a.touched,B=a.errors,P=a.setFieldValue,T=a.submitForm;Cl(R,(function(){j(!1)})),Object(Rt.d)({onEnter:function(e,t){return M(e,t)}});var M=function(e,a){P(t.name,e),T(),a.preventDefault()},I=Object(l.useCallback)(O.a.debounce((function(e){h(e),N(!0),q([]),bt.a.fetchProduct({orderBy:"updated_at",page:1,search:e,sortedBy:"desc",searchFields:"name:like"}).then((function(e){q(e.data)})).finally((function(){N(!1)}))}),700),[]),V=function(e){j(!1),P(t.name,e).then((function(){T()}))};return i.a.createElement("div",{className:"ac-product-input",ref:R},n&&i.a.createElement("label",null,n),i.a.createElement("input",{value:t.value,className:"form-control",onChange:function(e){Sl(e.target.value)?j(!1):(j(!0),I(e.target.value)),P(t.name,e.target.value)},onClick:function(){S.length>0&&j(!0),F.current.value.length&&v!==F.current.value.length&&!Sl(F.current.value)&&I(F.current.value)},ref:F,onKeyPress:function(e){if(13!==e.charCode&&q([]),13===e.charCode&&g&&S.length){var t;if(e.preventDefault(),g&&S.length)V(null===(t=S[0])||void 0===t?void 0:t.id);F.current.value.length&&T()}}}),g&&i.a.createElement("div",{className:"auto-complete-container"},i.a.createElement("div",{className:"position-relative"},y&&i.a.createElement(x.a,{local:!0}),S.length?i.a.createElement("div",{className:"list-product-item-wrapper"},S.map((function(e){return i.a.createElement("div",{className:"product-item",key:"product-".concat(e.id),onClick:function(){return function(e){V(e.id)}(e)}},i.a.createElement("div",{className:"jancode"},e.id," - ",i.a.createElement("span",{className:"product-name"},e.name)),i.a.createElement("div",{className:"price"},Object(he.a)(e.price)," ",un))}))):i.a.createElement(Re.a,null))),o&&i.a.createElement(f.h,{error:B[t.name],touched:D[t.name],label:n,type:u,customFeedbackLabel:r}))},Rl=(a(1492),function(e){var t=e.onSubmit,a=e.initialValues,n=void 0===a?{product_id:"",quantity:1}:a,c=Object(b.a)(),l=Object(m.a)(c,1)[0],o=X.d().shape({product_id:X.f().required(l("validation.message.required")),quantity:X.c().min(1,l("validation.message.min",{min:1})).required(l("validation.message.required"))});return i.a.createElement(W.d,{enableReinitialize:!0,initialValues:n,onSubmit:t,validationSchema:o},(function(e){var t=e.handleSubmit;return i.a.createElement(i.a.Fragment,null,i.a.createElement(W.c,{className:"form form-label-right form-add-box-item"},i.a.createElement(W.b,{name:"product_id",component:ql,label:i.a.createElement(kl,null),placeholder:l("warehouse.jancode.id"),autoComplete:"off",autoFocus:!0})),i.a.createElement("button",{className:"btn btn-primary btn-large btn-mw-85",onClick:t},l("common.add")))}))}),Fl=i.a.memo(Rl),Dl=function(e){var t=Object(l.useRef)(),a=hl(t),n=a.handleAddBoxItem,c=a.continueAddProduct;return i.a.createElement("div",{className:"add-box-item"},i.a.createElement(Ra,{ref:t,onOk:c}),i.a.createElement("div",{className:"add-box-item__content"},i.a.createElement(Fl,{onSubmit:n})))},Bl=i.a.memo(Dl);var Pl=a(1184),Tl=a(1181),Ml=(a(1493),"DD-MM-YYYY"),Il=function(e){var t=e.data,a=void 0===t?[]:t,n=(e.currentBox,e.onUpdate),c=e.onDelete,o=e.className,r=Object(b.a)(),s=Object(m.a)(r,1)[0],u=Object(l.useRef)(),d=Object(se.a)("box-items");return i.a.createElement("div",{className:Object(k.a)("list-box-items",o)},i.a.createElement(Ra,{ref:u,onOk:function(e){var t=e.row,a=e.rowIdx;c&&c(t,a)},centered:!0}),a.map((function(e,t){var a;return i.a.createElement("div",{className:"box-items",key:"box-item-".concat(t)},i.a.createElement("div",{className:"box-items__info"},i.a.createElement("div",{className:"box-items__jancode"},e.product_id),i.a.createElement("div",{className:"box-items__name"},(null===e||void 0===e||null===(a=e.product)||void 0===a?void 0:a.name)||"---")),i.a.createElement("div",{className:"box-items__updateable"},i.a.createElement("div",{className:"box-items__quantity updateable-item"},i.a.createElement("label",{htmlFor:""},s("common.quantity")),i.a.createElement("input",{className:"form-control quantity_input",value:e.quantity,onChange:function(e){return function(e,t){n&&n("quantity",t,e.target.value)}(e,t)},type:"number",min:0,disabled:!d})),i.a.createElement("div",{className:"box-items__expiry_date updateable-item"},i.a.createElement("label",{htmlFor:""},s("common.expiry_date")),i.a.createElement(ct.a,{style:{width:"100%"},selected:e.expiry_date?_()(e.expiry_date,Ml).toDate():null,onChange:function(e){return function(e,t){n&&n("expiry_date",t,_()(e).format(Ml))}(e,t)},disabled:!d}))),i.a.createElement("div",{className:"box-items__actions"},i.a.createElement(V.a,{need:"box-items"},i.a.createElement("span",{className:"svg-icon svg-icon-danger svg-icon-2x cursor-pointer",onClick:function(){return function(e,t){u.current.open({title:s("warehouse.box_item.delete.title"),row:e,rowIdx:t})}(e,t)}},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/General/Trash.svg")})))))})))},Vl=function(e){var t,a=Object(o.e)((function(e){return e.warehouse.performEntry.checking_goods.box_items})),n=Object(o.e)((function(e){return e.warehouse.performEntry.checking_goods.loading})),c=Object(o.e)((function(e){return e.warehouse.performEntry.checking_goods.is_checking})),r=Object(o.e)((function(e){return e.warehouse.box.detail.data})),s=Object(o.d)(),u=Object(l.useRef)(),d=hl(),v=d.updateBoxItem,f=d.deleteBoxItem,h=d.closeBoxItems,p=d.loading,E=Object(b.a)(),g=Object(m.a)(E,1)[0];return t=u,Object(l.useEffect)((function(){t&&(null===t||void 0===t?void 0:t.current)&&t.current.scrollIntoView({behavior:"smooth"})}),[]),Object(l.useEffect)((function(){(null===r||void 0===r?void 0:r.id)&&s(Object(vl.b)())}),[null===r||void 0===r?void 0:r.id]),n?i.a.createElement("div",{className:"position-relative",style:{minHeight:300}},i.a.createElement(x.a,{local:!0})):i.a.createElement("div",{className:"table-box-items",ref:u},c&&i.a.createElement(V.a,{need:"box-items"},i.a.createElement(Pl.a,{severity:"warning",action:i.a.createElement(de,{type:"secondary",onClick:h,loading:p},g("warehouse.sku.box_item.close.title")),className:"mb-10"},i.a.createElement(Tl.a,null,g("warehouse.sku.box_item.close.warning.title")),g("warehouse.sku.box_item.close.warning.message"))),i.a.createElement(Il,{data:a,currentBox:r,onUpdate:v,onDelete:f}))},Ll=(a(1494),function(e){var t=Object(r.h)(),a=Object(r.k)(),n=Object(b.a)(),c=Object(m.a)(n,1)[0];return i.a.createElement(f.c,{className:"check-box-item-header"},i.a.createElement(f.e,{title:i.a.createElement("div",null,i.a.createElement(Vt.a,{variant:"link",onClick:function(){t.goBack()}},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Navigation/Arrow-left.svg")})),c("MENU.WAREHOUSE.CHECKING_GOODS"))},i.a.createElement(f.f,null,i.a.createElement("div",{className:"d-flex w-100 align-items-center"},i.a.createElement(He,{onChange:function(e){var n;e&&t.push("/warehouse/inbound/step-2/".concat(null===a||void 0===a||null===(n=a.params)||void 0===n?void 0:n.sfa_id,"/").concat(e.value))}}),i.a.createElement(Vt.a,{variant:"success",onClick:function(){var e;t.push("/warehouse/inbound/step-3/".concat(null===a||void 0===a||null===(e=a.params)||void 0===e?void 0:e.sfa_id))},className:"ml-3 btn-large"},c("warehouse.header.next"))))))}),Al=function(e){var t=Object(o.e)((function(e){return e.warehouse.box.detail})),a=t.data,n=t.loading,c=Object(o.e)((function(e){return e.warehouse.sfa.detail.data})),s=Object(r.j)(),u=Object(o.d)(),d=Object(r.k)(),v=Object(r.h)(),h=Object(b.a)(),p=Object(m.a)(h,1)[0],E=Object(l.useRef)();Object(l.useEffect)((function(){E.current=c}),[c]),Object(l.useEffect)((function(){return function(){var e,t;if((null===(e=E.current)||void 0===e||null===(t=e.boxes)||void 0===t?void 0:t.length)&&s.sfa_id===E.current.id){var a=E.current.boxes.reduce((function(e,t){return e+t.duplicate}),0);a<E.current.quantity&&function(e){var t=new CustomEvent("checking-box-return-wrong-quantity",{detail:e});window.dispatchEvent(t)}({totalSku:a,quantity:E.current.quantity})}}}),[]),Object(l.useEffect)((function(){(null===s||void 0===s?void 0:s.box_id)&&j()}),[null===s||void 0===s?void 0:s.box_id]);var j=function(){u(Object(ve.c)({id:null===s||void 0===s?void 0:s.box_id,with:"childs;items"}))},O=function(){j()},w=function(e){v.push("/warehouse/inbound/step-2/".concat(null===s||void 0===s?void 0:s.sfa_id,"/").concat(e.id)),_()},_=function(){u(Object(g.b)({id:null===s||void 0===s?void 0:s.sfa_id,with:"boxes"}))};return a||n?i.a.createElement("div",{className:"checking-box position-relative"},n&&i.a.createElement(x.a,{local:!0}),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-9 col-md-12 col-sm-12",style:{height:"100%"}},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-12"},i.a.createElement(Ll,null))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-12"},i.a.createElement(bl,null))),i.a.createElement(f.c,{className:"mb-0"},i.a.createElement(f.e,{title:p("warehouse.box_item.title")}),i.a.createElement(f.d,null,i.a.createElement(Bl,null),i.a.createElement(Vl,null)))),i.a.createElement("div",{className:"col-lg-3 col-md-12 col-sm-12 ipad-hidden"},i.a.createElement(Ee,{onSelectBox:function(e){v.push("/warehouse/inbound/step-2/".concat(null===s||void 0===s?void 0:s.sfa_id,"/").concat(e.id))},showQuantity:function(e){return e.duplicate}}))),i.a.createElement(V.a,{need:"boxes.create"},i.a.createElement(r.c,{path:"".concat(d.path,"/create-box")},(function(e){var t=e.match;return i.a.createElement(be,{show:null!==t,onSuccess:w})}))),i.a.createElement(V.a,{need:"boxes.update"},i.a.createElement(r.c,{path:"".concat(d.path,"/edit-box")},(function(e){var t=e.match;return i.a.createElement(be,{show:null!==t,onSuccess:O,initialValues:a,isHaveDuplicate:!1})})))):i.a.createElement(xa,null)},Yl=i.a.memo(Al),Hl=(a(1495),function(e){var t,a=Object(o.e)((function(e){return e.warehouse.sfa.detail})),n=a.data,c=a.loading,s=Object(o.d)(),u=Object(r.j)(),d=Object(r.h)(),m=Object(r.k)();Object(l.useEffect)((function(){(null===u||void 0===u?void 0:u.sfa_id)&&s(Object(g.b)({id:null===u||void 0===u?void 0:u.sfa_id,with:"boxes;receipts"})).then((function(e){var t,a,n,c,l,i;(null===(t=e.payload)||void 0===t||null===(a=t.boxes)||void 0===a?void 0:a.length)&&!(null===u||void 0===u?void 0:u.box_id)?d.replace("".concat(m.url,"/").concat(null===(l=e.payload)||void 0===l||null===(i=l.boxes)||void 0===i?void 0:i[0].id)):(null===(n=e.payload)||void 0===n||null===(c=n.boxes)||void 0===c?void 0:c.length)||d.push("/warehouse/inbound/step-2/".concat(null===u||void 0===u?void 0:u.sfa_id,"/create-new-box"))}))}),[null===u||void 0===u?void 0:u.sfa_id]);var b=function(e){d.push("/warehouse/inbound/step-2/".concat(null===u||void 0===u?void 0:u.sfa_id,"/").concat(e.id)),s(Object(g.b)({id:null===u||void 0===u?void 0:u.sfa_id,with:"boxes"}))};return n||c?i.a.createElement(i.a.Fragment,null,i.a.createElement(rl,null),i.a.createElement("div",{className:"create-box step-2 position-relative"},c&&i.a.createElement(x.a,{local:!0}),(null===n||void 0===n||null===(t=n.boxes)||void 0===t?void 0:t.length)?i.a.createElement(Yl,null):i.a.createElement(U,{focusModalCreateBox:function(){d.push("".concat(m.url,"/create-new-box"))}}),i.a.createElement(V.a,{need:"boxes.create"},i.a.createElement(r.c,{path:"".concat(m.path,"/create-new-box")},(function(e){var t=e.match;return i.a.createElement(be,{show:null!==t,onSuccess:b})}))))):i.a.createElement(xa,null)}),Ul=(a(1496),function(e){var t,a,n,c,l,s,u,d,v,f,h,p,E=e.pallet,g=e.onSelect,j=Object(o.e)((function(e){return e.warehouse.performEntry.storage.currentPallet})),O=Object(r.h)(),w=Object(r.k)(),_=Object(b.a)(),y=Object(m.a)(_,1)[0];return i.a.createElement("div",{className:Object(k.a)("pallet-item",(null===j||void 0===j?void 0:j.id)===(null===E||void 0===E?void 0:E.id)&&"active"),onClick:function(){(null===j||void 0===j?void 0:j.id)!==(null===E||void 0===E?void 0:E.id)&&g&&g(E)}},i.a.createElement("div",{className:"d-flex"},i.a.createElement("div",{className:"pallet-item__icon"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Shopping/Pallet.svg"),uniquifyIDs:!0})),i.a.createElement("div",{className:"pallet-item__info"},i.a.createElement("div",{className:"pallet-item__id"},null===E||void 0===E?void 0:E.id),(null===E||void 0===E||null===(t=E.location)||void 0===t?void 0:t.floor)?i.a.createElement("div",{className:"pallet-item__position"},i.a.createElement("span",null,"F",null===E||void 0===E||null===(a=E.location)||void 0===a?void 0:a.floor)," \xd7 ",i.a.createElement("span",null,"R",null===E||void 0===E||null===(n=E.location)||void 0===n?void 0:n.row)," \xd7 ",i.a.createElement("span",null,"C",null===E||void 0===E||null===(c=E.location)||void 0===c?void 0:c.column)):"",(null===E||void 0===E||null===(l=E.location)||void 0===l?void 0:l.shelve)?i.a.createElement("div",{className:"extra"},i.a.createElement("div",{className:"shelve"},y("warehouse.shelve.title"),": ",i.a.createElement("span",null,null===E||void 0===E||null===(s=E.location)||void 0===s||null===(u=s.shelve)||void 0===u?void 0:u.id)),i.a.createElement("div",{className:"area"},i.a.createElement("span",null,null===E||void 0===E||null===(d=E.location)||void 0===d||null===(v=d.shelve)||void 0===v||null===(f=v.area)||void 0===f?void 0:f.name))):""),i.a.createElement("div",{className:"pallet-item__actions"},i.a.createElement(V.a,{need:["pallets.update"]},i.a.createElement(D.a,{key:"storage",placement:"top",overlay:i.a.createElement(B.a,{id:"tooltip-route"},i.a.createElement("span",{className:"text-primary"},y("warehouse.pallet.save_to_other_position")))},i.a.createElement("span",{onClick:function(){O.push("".concat(w.url,"/save-pallet/").concat(null===E||void 0===E?void 0:E.id))},className:"svg-icon svg-icon-success svg-icon-2x"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Navigation/Route.svg")}))),i.a.createElement(D.a,{key:"printer",placement:"top",overlay:i.a.createElement(B.a,{id:"tooltip-route"},i.a.createElement("span",{className:"text-primary"},y("printer.save.pallet.title")))},i.a.createElement("span",{onClick:function(){Object(Dt.b)(Pt("PALLET",{palletId:E.id}))},className:"svg-icon svg-icon-primary svg-icon-2x mt-2"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Devices/Printer.svg")})))))),i.a.createElement("div",{className:"pallet-item__status"},i.a.createElement("div",{className:"status--item"},i.a.createElement("span",{className:"text-success"},"V: "),i.a.createElement(ea.a,{variant:"success",now:null===E||void 0===E?void 0:E.boxes_volume,max:null===E||void 0===E||null===(h=E.type)||void 0===h?void 0:h.max_volume})),i.a.createElement("div",{className:"status--item"},i.a.createElement("span",{className:"text-primary"},"W: "),i.a.createElement(ea.a,{variant:"info",now:null===E||void 0===E?void 0:E.boxes_weight,max:null===E||void 0===E||null===(p=E.type)||void 0===p?void 0:p.max_weight}))))}),Kl=i.a.memo(Ul),zl=(a(1497),function(e,t){var a=e.onAdd,n=e.onAddNew,c=Object(b.a)(),l=Object(m.a)(c,1)[0];return i.a.createElement("div",{className:"input-add-pallet"},i.a.createElement("input",{className:"form-control",ref:t,placeholder:l("warehouse.pallet.id"),onKeyPress:function(e){13===e.charCode&&a&&a()}}),i.a.createElement("span",{className:"svg-icon svg-icon-primary custom-button",onClick:n},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Code/Plus.svg")})))}),Ql=Object(l.forwardRef)(zl),Gl=(a(1498),function(e){var t=e.onSelect,a=e.onAddPallet,c=e.pagination,s=e.onChangePage,u=Object(o.e)((function(e){return e.warehouse.performEntry.storage.pallets})),d=u.data,v=u.loading,f=Object(o.e)((function(e){return e.warehouse.palletType.list.data})),h=Object(l.useRef)(),p=Object(r.k)(),g=Object(o.d)(),j=Object(b.a)(),w=Object(m.a)(j,1)[0];Object(l.useEffect)((function(){f.length||g(Object(Mt.b)())}),[]),Object(Rt.d)({condition:Rt.b,onEnter:function(e,t){return _(e)}});var _=function(e){h.current.value=e,a&&a(e),setTimeout((function(){h.current.value=""}),200)},y=function(e){G.a.pallet.fetchPallet(e.id,{with:"location.shelve.area;pivotBoxes"}).then((function(e){var t=O.a.findIndex(d,(function(t){var a=t.id;return e.id==a})),a=Object(fe.a)(d);a[t]=e,g(vl.d.setListPallets(a))})).catch((function(){n.b.error(w("warehouse.pallet.add.failure"))}))};return i.a.createElement("div",{className:"list-pallet-wrapper position-relative"},i.a.createElement(V.a,{need:"pallets.update"},i.a.createElement(r.c,{path:"".concat(p.path,"/save-pallet/:pallet_id")},(function(e){var t,a=e.match;return i.a.createElement($t,{id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.pallet_id,show:null!==a,onSuccess:y})}))),v&&i.a.createElement(x.a,{local:!0}),i.a.createElement("div",{className:"title mb-2"},w("warehouse.pallet.list.title")),i.a.createElement(Ql,{onAdd:function(){var e=h.current.value;if(null===e||void 0===e?void 0:e.length){setTimeout((function(){h.current.value="",h.current.blur()}),200);var n=O.a.find(d,(function(t){var a=t.id;return e==a}));n?t&&t(n):a&&a(e)}},ref:h,onAddNew:function(){var e;G.a.pallet.create({type_id:null===f||void 0===f||null===(e=f[0])||void 0===e?void 0:e.id}).then((function(e){Object(Dt.b)(Pt("PALLET",Object(E.a)(Object(E.a)({},e),{},{palletId:e.id,quantity:2}))),g(vl.d.addPalletToList(e)),g(vl.d.setCurrentPallet(e))})).catch((function(){n.b.error(w("warehouse.pallet.add.empty_pallet.failure"))}))}}),i.a.createElement("div",{className:"list-pallet"},d.length?"":i.a.createElement(Re.a,{emptyText:w("warehouse.pallet.empty")}),d.map((function(e,a){return i.a.createElement(Kl,{pallet:e,key:"pallet-".concat(a),onSelect:t})}))),i.a.createElement("div",{className:"pagination mt-3 justify-content-end"},i.a.createElement(I.a,{count:c.lastPage,page:c.page,shape:"rounded",onChange:function(e,t){s&&s(t)}})))}),Jl=(a(1499),function(e){var t,a=Object(o.e)((function(e){return e.warehouse.performEntry.storage.currentPallet})),c=Object(o.e)((function(e){return e.warehouse.performEntry.storage.pallets.loading})),s=Object(o.d)(),u=Object(l.useRef)(),d=Object(l.useRef)([]),v=Object(l.useRef)([]),f=Object(r.j)(),h=Object(b.a)(),p=Object(m.a)(h,1)[0];Object(Rt.d)({condition:Rt.c,onEnter:function(e){return g(e)}});var g=function(e){u.current.value=e,setTimeout((function(){u.current.value=""}),100),(null===a||void 0===a?void 0:a.id)&&(-1===O.a.findIndex((null===a||void 0===a?void 0:a.boxes)||[],(function(t){var a=t.id;return e==a}))?G.a.palletBoxes.create({box_id:e,pallet_id:null===a||void 0===a?void 0:a.id,quantity:1}).then((function(){s(Object(vl.e)({palletId:null===a||void 0===a?void 0:a.id})),n.b.success(p("warehouse.sku.pivot.pallet.create.success"))})).catch((function(){n.b.error(p("warehouse.sku.pivot.pallet.create.failure"))})):n.b.error(p("warehouse.sku.pivot.pallet.exist")))};Object(l.useEffect)((function(){return function(){s(vl.d.resetStorage())}}),[]),Object(l.useEffect)((function(){(null===a||void 0===a?void 0:a.pivot_boxes)&&a.pivot_boxes.forEach((function(e,t){d.current[t].value=(null===e||void 0===e?void 0:e.current_quantity)||0}))}),[a]);var j=function(){var e=u.current.value;(null===e||void 0===e?void 0:e.length)&&(u.current.value="",-1===O.a.findIndex((null===a||void 0===a?void 0:a.pivot_boxes)||[],(function(t){return t.box_id==e}))?G.a.palletBoxes.create({box_id:e,pallet_id:null===a||void 0===a?void 0:a.id,quantity:1}).then((function(){s(Object(vl.e)({palletId:null===a||void 0===a?void 0:a.id})),n.b.success(p("warehouse.sku.pivot.pallet.create.success"))})).catch((function(){n.b.error(p("warehouse.sku.pivot.pallet.create.failure"))})):n.b.error(p("warehouse.sku.pivot.pallet.exist")))},w=Object(l.useCallback)((function(e){return a&&e.current_quantity||0}),[a]),_=function(e,t,c){13===t.charCode&&function(e,t,c){v.current[c].style.background="rgba(246, 78, 95, .1)",G.a.palletBoxes.update(e.id,{quantity:t}).then((function(e){s(Object(vl.e)({palletId:null===a||void 0===a?void 0:a.id})),n.b.success(p("warehouse.sku.pivot.pallet.update_quantity.success"))})).catch((function(t){console.error(t),n.b.error(p("warehouse.sku.pivot.pallet.update_quantity.failure")),d.current[c].value=w(e)})).finally((function(){v.current[c]&&(v.current[c].style.background="")}))}(e,d.current[c].value,c)};return i.a.createElement("div",{className:"list-box-in-pallet"},i.a.createElement("div",{className:"head"},i.a.createElement("div",{className:"d-flex flex-column"},i.a.createElement("div",{className:"title"},p("warehouse.sku.pivot.pallet.title")),i.a.createElement(V.a,{need:["pallets.update"]},i.a.createElement(Zt,{value:null===a||void 0===a?void 0:a.type_id,isDisabled:!(null===a||void 0===a?void 0:a.type_id),onChange:function(e){G.a.pallet.update(a.id,{type_id:e}).then((function(){n.b.success(p("warehouse.pallet.update.success")),s(vl.d.updateCurrentPallet({type_id:e}))})).catch((function(e){console.erorr(e),n.b.error(p("warehouse.pallet.update.failure"))}))}}))),i.a.createElement("div",{className:"toolbar"},i.a.createElement(V.a,{need:["pallet-boxes.create"]},i.a.createElement("input",{className:"form-control",disabled:!a,placeholder:p("warehouse.sku.pivot.pallet.create.title"),ref:u,onKeyPress:function(e){13===e.charCode&&j()}})))),i.a.createElement("div",{className:"list-box position-relative"},c&&i.a.createElement(x.a,{local:!0}),i.a.createElement("div",{className:"list-box-items"},(null===a||void 0===a||null===(t=a.pivot_boxes)||void 0===t?void 0:t.length)?"":i.a.createElement(Re.a,{emptyText:p("warehouse.sku.pivot.pallet.empty")}),i.a.createElement(V.a,{need:"pallet-boxes.index"},!!(null===a||void 0===a?void 0:a.pivot_boxes)&&(null===a||void 0===a?void 0:a.pivot_boxes.map((function(e,t){var c;return i.a.createElement("div",{className:"box-wrapper position-relative",key:"box-".concat(t),ref:function(e){return v.current[t]=e}},i.a.createElement(pe,{box:Object(E.a)(Object(E.a)({},e.box),{},{quantityOnPallet:e.current_quantity}),showQuantity:function(e){return e.quantityOnPallet||0}}),i.a.createElement("div",{className:"pivot-quantity"},i.a.createElement("label",{htmlFor:""},p("common.quantity"),":"),i.a.createElement(V.a,{need:"pallet-boxes.update",fallback:i.a.createElement("span",null,e.current_quantity)},i.a.createElement("input",{ref:function(e){return d.current[t]=e},className:"input-change-pivot form-control",type:"number",onKeyPress:function(a){return _(e,a,t)}}))),i.a.createElement("span",{className:"close-icon position-absolute",onClick:function(){return function(e,t){v.current[t].style.background="rgba(246, 78, 95, .1)",G.a.palletBoxes.delete(e.id).then((function(e){s(Object(vl.e)({palletId:null===a||void 0===a?void 0:a.id})),n.b.success(p("warehouse.sku.pivot.pallet.delete.success"))})).catch((function(e){console.error(e),n.b.error(p("warehouse.sku.pivot.pallet.delete.failure"))})).finally((function(){v.current[t]&&(v.current[t].style.background="")}))}(e,t)}},"\xd7"),(null===e||void 0===e||null===(c=e.box)||void 0===c?void 0:c.sfa_id)!==(null===f||void 0===f?void 0:f.sfa_id)&&i.a.createElement("span",{className:"other-sfa"},"Other SFA"))})))))))}),Wl=(a(1500),function(e){var t=Object(o.e)((function(e){return e.warehouse.performEntry.storage.pallets.pagination})),a=Object(o.d)(),n=Object(r.j)(),c=Object(b.a)(),s=Object(m.a)(c,1)[0];Object(l.useEffect)((function(){(null===n||void 0===n?void 0:n.sfa_id)&&a(Object(vl.c)({sfa_id:null===n||void 0===n?void 0:n.sfa_id,page:t.page}))}),[null===n||void 0===n?void 0:n.sfa_id,t.page]);return i.a.createElement(f.c,{className:"position-relative storage-b-x-card"},i.a.createElement(f.e,{title:s("MENU.WAREHOUSE.STORAGE_GOODS")}),i.a.createElement(f.d,{className:"storage-box-container"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-4 col-md-4 col-sm-12"},i.a.createElement(Gl,{onSelect:function(e){a(vl.d.setCurrentPallet(e))},onAddPallet:function(e){a(Object(vl.e)({palletId:e}))},pagination:t,onChangePage:function(e){a(vl.d.setListPalletsPage(e))}})),i.a.createElement("div",{className:"col-lg-8 col-md-8 col-sm-12"},i.a.createElement(Jl,null)))))}),Xl=function(e){var t=Object(r.h)(),a=Object(r.k)();return i.a.createElement(f.c,null,i.a.createElement(f.e,{title:i.a.createElement("div",null,i.a.createElement(Vt.a,{variant:"link",onClick:function(){t.goBack()}},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Navigation/Arrow-left.svg")})),"L\u01b0u h\xe0ng")},i.a.createElement(f.f,null,i.a.createElement(Vt.a,{variant:"success",onClick:function(){var e;t.push("/warehouse/inbound/step-4/".concat(null===a||void 0===a||null===(e=a.params)||void 0===e?void 0:e.sfa_id))},className:"ml-3 btn-large"},"Ti\u1ebfp theo"))))},$l=function(e){var t=Object(o.e)((function(e){return e.warehouse.sfa.detail})),a=t.data,n=t.loading,c=Object(o.d)(),s=Object(r.j)();return Object(l.useEffect)((function(){(null===s||void 0===s?void 0:s.sfa_id)&&c(Object(g.b)({id:null===s||void 0===s?void 0:s.sfa_id,with:"boxes;receipts"}))}),[null===s||void 0===s?void 0:s.sfa_id]),a||n?i.a.createElement(i.a.Fragment,null,i.a.createElement(rl,null),i.a.createElement("div",{className:"storage-box position-relative"},i.a.createElement(Xl,null),i.a.createElement(Wl,null))):i.a.createElement(xa,null)};function Zl(){var e=Object(o.d)(),t=Object(r.j)();return function(){return e(Object(g.b)({id:null===t||void 0===t?void 0:t.sfa_id,with:"boxes.childs.items;agency;receipts;boxes.items"}))}}var ei=function(e){var t=Object(r.h)(),a=Object(b.a)(),n=Object(m.a)(a,1)[0];return i.a.createElement(f.c,{style:{height:"auto"}},i.a.createElement(f.e,{title:i.a.createElement("div",null,i.a.createElement(Vt.a,{variant:"link",onClick:function(){t.goBack()}},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Navigation/Arrow-left.svg")})),n("MENU.WAREHOUSE.PACK_BOX"))}),i.a.createElement(f.d,{className:"mention"},i.a.createElement("div",{className:"title"},"* V\xed d\u1ee5:"),i.a.createElement("div",{className:"text-exg"}," - C\xf3 100 th\xf9ng v\u1edbi id [*********001] \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef \u1edf pallet [P**]"),i.a.createElement("div",{className:"text-exg"}," - N\u1ebfu user mu\u1ed1n ch\u1ecdn 4 th\xf9ng \u0111\u1ec3 th\u1ef1c hi\u1ec7n g\u1ed9p th\xf9ng, user ph\u1ea3i th\u1ef1c hi\u1ec7n nh\u1eefng b\u01b0\u1edbc sau: "),i.a.createElement("div",{className:"step-exg"}," + Tr\u1edf l\u1ea1i b\u01b0\u1edbc l\u01b0u h\xe0ng"),i.a.createElement("div",{className:"step-exg"}," + Ch\u1ecdn pallet b\u1ea5t k\u1ef3 ch\u1ee9a th\xf9ng [*********001] c\u1ee5 th\u1ec3 \u1edf \u0111\xe2y l\xe0 pallet [P**]"),i.a.createElement("div",{className:"step-exg"}," + Gi\u1ea3m s\u1ed1 l\u01b0\u1ee3ng th\xf9ng [*********001] tr\xean pallet xu\u1ed1ng \xedt nh\u1ea5t [100 - 4 = 96 th\xf9ng]"),i.a.createElement("div",{className:"step-exg"}," + Quay tr\u1edf l\u1ea1i b\u01b0\u1edbc \u0111\xf3ng g\xf3i, l\xfac n\xe0y user c\xf3 th\u1ec3 t\xe1ch 4 th\xf9ng ra kh\u1ecfi 100 th\xf9ng \u0111\u1ec3 g\u1ed9p th\xf9ng."),i.a.createElement("div",{className:"text-danger"},"* C\xe1c th\xf9ng \u0111\u01b0\u1ee3c l\u1ea5y ra thao t\xe1c kh\xf4ng \u0111\u01b0\u1ee3c n\u1eb1m tr\xean pallet n\xe0o.")))},ti=(a(1501),function(){var e,t=Object(l.useState)(!1),a=Object(m.a)(t,2),c=a[0],s=a[1],u=Object(o.e)((function(e){return e.warehouse.box.detail.data})),d=Object(o.e)((function(e){return e.warehouse.performEntry.packaging.childrens})),v=Object(l.useRef)(),h=Object(l.useRef)(),p=Object(o.d)(),g=Object(r.j)(),j=Object(b.a)(),O=Object(m.a)(j,1)[0],w=Zl(),_=Object(se.a)(["boxes.create","boxes.update"],"and"),y=Object(se.a)(["boxes.update"]),N=function(){s(!c)},x=function(){p(Object(ve.c)({id:v.current.value,with:"childs;items"})).then((function(e){e.type.includes("fulfilled")?(n.b.success(O("warehouse.sku.get.success")),k(e.payload.id)):n.b.error(O("warehouse.sku.get.failure"))}))},k=function(e){(null===d||void 0===d?void 0:d.length)&&Promise.all(d.map((function(t){return G.a.box.update(t.id,{box_parent_id:e})}))).then((function(){p(vl.d.removeTempChildBox("all")),p(Object(ve.c)({id:e,with:"childs"})),w()}))},S=function(e){var t,a;n.b.success(O("warehouse.sku.create.success")),v.current.value=e.id,Object(Dt.b)(Pt("SKU",Object(E.a)(Object(E.a)({},e),{},{sku:null===e||void 0===e?void 0:e.id,quantity:(null===e||void 0===e?void 0:e.duplicate)||1,tracking:null===e||void 0===e||null===(t=e.sfa)||void 0===t?void 0:t.tracking,sfaId:null===e||void 0===e||null===(a=e.sfa)||void 0===a?void 0:a.id}))),x()},R=Object(l.useMemo)((function(){var e;return u&&(null===u||void 0===u||null===(e=u.childs)||void 0===e?void 0:e.length)?u.childs.reduce((function(e,t){return e+t.volume}),0):0}),[u]),F=function(){var e=h.current.value;e&&e!==(null===u||void 0===u?void 0:u.packing_cost_per_box)&&(h.current.style.borderColor="#fadb14",G.a.box.update(null===u||void 0===u?void 0:u.id,{packing_cost_per_box:e}).then((function(e){n.b.success(O("warehouse.sku.update.packing_cost.success")),h.current.style.borderColor="#52c41a"})).catch((function(e){console.error(e),h.current.style.borderColor="#f5222d",n.b.error(O("warehouse.sku.update.packing_cost.failure")),h.current.value=null===u||void 0===u?void 0:u.packing_cost_per_box})))};return i.a.createElement(f.c,{className:"parent-box-container"},i.a.createElement(f.d,null,!u&&i.a.createElement("div",{className:"input-add-parent"},i.a.createElement("input",{className:"form-control",ref:v,onKeyPress:function(e){13===e.charCode&&x()},placeholder:"Parent SKU",disabled:!_}),_&&i.a.createElement(i.a.Fragment,null,O("warehouse.sku.not_have.sku"),"?",i.a.createElement(Vt.a,{variant:"link",onClick:function(){return G.a.box.create({duplicate:1,height:1,length:1,sfa_id:null===g||void 0===g?void 0:g.sfa_id,weight_per_box:1,width:1}).then(S).catch((function(){n.b.error(O("warehouse.sku.create.failure"))}))}},O("warehouse.sku.create.title")))),u&&i.a.createElement("div",{className:"parent-box-section__content"},i.a.createElement("div",{className:"header-section"},i.a.createElement("div",{className:"title"},O("warehouse.sku.parent.title")),i.a.createElement("div",{className:"extra-action"},i.a.createElement(Vt.a,{variant:"link",onClick:function(){p(ve.a.setBoxDetailData(void 0))}},O("warehouse.sku.parent.other")))),i.a.createElement("div",{className:"icon-section"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Shopping/open-box.svg")}),i.a.createElement("div",{className:"bar-code"},i.a.createElement(ll.a,{value:(null===u||void 0===u?void 0:u.id)||"0",textPosition:"top",height:40}))),i.a.createElement("div",{className:"volume-progress-section"},i.a.createElement(ea.a,{animated:!0,max:null===u||void 0===u?void 0:u.volume_per_box,now:R,label:i.a.createElement("span",{className:"progress-label"},Object(he.a)(R)," / ",Object(he.a)(null===u||void 0===u?void 0:u.volume_per_box)),variant:"success"})),i.a.createElement("div",{className:"box-packing-cost form-group"},i.a.createElement("label",{htmlFor:""},O("warehouse.cost.packing")),i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement("input",{defaultValue:(null===u||void 0===u?void 0:u.packing_cost_per_box)||0,placeholder:O("warehouse.cost.packing"),className:"form-control",onKeyPress:function(e){13===e.charCode&&F()},ref:h,disabled:!y}),i.a.createElement("button",{disabled:!y,className:"btn btn-success btn-large ml-3 btn-packing-cost",onClick:F},O("common.save")))),i.a.createElement("div",{className:"content-section"},i.a.createElement("div",{className:"box-info row"},i.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-6"},i.a.createElement("span",{className:"title"},O("common.volume"),":")," ",Object(he.a)(null===u||void 0===u?void 0:u.volume)),i.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-6"},i.a.createElement("span",{className:"title"},O("warehouse.box_item.quantity"),":")," ",Object(he.a)(null===u||void 0===u||null===(e=u.items)||void 0===e?void 0:e.length)),i.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-6"},i.a.createElement("span",{className:"title"},O("warehouse.sku.duplicate"),":")," ",Object(he.a)(null===u||void 0===u?void 0:u.duplicate)))),i.a.createElement("div",{className:"action-section"},i.a.createElement("button",{disabled:!y,className:"btn btn-primary",onClick:N},O("common.edit")))),i.a.createElement(be,{show:c,onSuccess:function(){p(Object(ve.c)({id:null===u||void 0===u?void 0:u.id,with:"childs;items"}))},initialValues:u,onHide:N,isHaveDuplicate:!1})))}),ai=(a(1502),function(e,t){var a=e.initialValues,n=void 0===a?{box_id:"",box_parent_id:""}:a,c=e.onSubmit,l=Object(b.a)(),o=Object(m.a)(l,1)[0],r=X.d().shape({box_id:X.f().required(o("validation.message.required"))});return i.a.createElement(W.d,{initialValues:n,validationSchema:r,onSubmit:c,enableReinitialize:!0,innerRef:t},(function(e){var t=e.handleSubmit;return i.a.createElement("div",{className:"d-flex"},i.a.createElement(W.c,{className:"form form-label-right"},i.a.createElement(W.b,{name:"box_id",component:f.b,placeholder:o("warehouse.sku.children"),condition:Rt.c,submitOnEnter:!0}),i.a.createElement($,null)),i.a.createElement("div",{className:"action-submit"},i.a.createElement("span",{className:"svg-icon svg-icon-primary svg-icon-3x",onClick:t},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Code/Plus.svg")}))))}))}),ni=i.a.forwardRef(ai),ci=(a(1503),function(e,t){var a=e.onOk,n=void 0===a?function(){return null}:a,c=Object(l.useState)(!1),o=Object(m.a)(c,2),s=o[0],u=o[1],d=Object(l.useState)(),v=Object(m.a)(d,2),f=v[0],h=v[1],p=Object(r.j)(),E=Object(b.a)(),g=Object(m.a)(E,1)[0];Object(l.useImperativeHandle)(t,(function(){return{toggle:function(e){u(!s),h(e)}}}));var j=function(){return u(!s)};return i.a.createElement(oe.a,{className:"modal-not-enough-volume",title:g("common.confirm"),show:s,onHide:j},i.a.createElement(re.a.Body,null,i.a.createElement("p",{dangerouslySetInnerHTML:{__html:g("warehouse.sku.child.add.over_volume.question",{box_id:null===p||void 0===p?void 0:p.box_id,child_id:(null===f||void 0===f?void 0:f.id)||""})}}),i.a.createElement("p",null,g("warehouse.sku.child.add.over_volume.continue"))),i.a.createElement(re.a.Footer,null,i.a.createElement(Vt.a,{variant:"secondary",onClick:j,className:"btn-large"},g("common.cancel")),i.a.createElement(Vt.a,{variant:"primary",onClick:function(){j(),n(f)},className:"btn-large"},g("common.ok"))))}),li=i.a.forwardRef(ci),ii=function(e){var t=e.onSuccess,a=Object(o.e)((function(e){return e.warehouse.box.detail.data})),c=Object(l.useState)(!1),s=Object(m.a)(c,2),u=s[0],d=s[1],v=Object(r.j)(),f=Object(l.useRef)(),h=Object(l.useRef)(),p=Object(o.d)(),E=Object(b.a)(),g=Object(m.a)(E,1)[0],j=Zl(),O=function(){var e=Object(Q.a)(z.a.mark((function e(t){var a,c,l,i;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),h.current.resetForm(),e.next=5,_(t.box_id);case 5:if(a=e.sent,c=Object(m.a)(a,2),l=c[0],i=c[1],l){e.next=13;break}return f.current.toggle(i),d(!1),e.abrupt("return");case 13:w(i),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(0),J(e.t0,h.current),d(!1),n.b.error(g("warehouse.sku.get.failure"));case 21:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),w=function(e){if(!(null===a||void 0===a?void 0:a.id))return p(vl.d.addTempChildBox(e)),void d(!1);G.a.box.update(e.id,{box_parent_id:null===a||void 0===a?void 0:a.id}).then((function(){j(),n.b.success(g("warehouse.sku.child.add.success")),t&&t()})).catch((function(e){n.b.error(g("warehouse.sku.child.add.failure")),J(e,h.current)})).finally((function(){d(!1)}))},_=function(e){return G.a.box.fetchBox(e).then((function(e){return-1===y?[!0,e]:[e.volume<y,e]}))},y=Object(l.useMemo)((function(){var e;if(!a)return-1;if(!(null===a||void 0===a||null===(e=a.childs)||void 0===e?void 0:e.length))return a.volume;var t=a.childs.reduce((function(e,t){return e+t.volume}),0);return a.volume-t}),[a]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(li,{ref:f,onOk:function(e){w(e)}}),i.a.createElement("div",{className:"position-relative"},u&&i.a.createElement(x.a,{local:!0}),i.a.createElement(ni,{onSubmit:O,ref:h,initialValues:{box_id:"",box_parent_id:null===v||void 0===v?void 0:v.box_id}})))},oi=(a(1504),function(){var e=Object(o.e)((function(e){return e.warehouse.box.detail.data})),t=Object(o.e)((function(e){return e.warehouse.performEntry.packaging.childrens})),a=Object(o.e)((function(e){return e.warehouse.agency.list})),c=Object(o.d)(),r=Object(l.useRef)([]),s=Object(l.useRef)([]),u=Object(b.a)(),d=Object(m.a)(u,1)[0],v=Zl();Object(l.useEffect)((function(){return function(){c(vl.d.removeTempChildBox("all"))}}),[]),Object(l.useEffect)((function(){var t;(null===e||void 0===e||null===(t=e.childs)||void 0===t?void 0:t.length)&&e.childs.forEach((function(e){r.current[e.id].value=e.child_quantity||e.duplicate}))}),[e]),Object(l.useEffect)((function(){(null===t||void 0===t?void 0:t.length)&&t.forEach((function(e){r.current[e.id].value=e.child_quantity||e.duplicate}))}),[t]);var h=Object(l.useMemo)((function(){return[{id:"id",title:d("warehouse.sfa.title"),render:function(e,t){return i.a.createElement("div",null,i.a.createElement("div",{className:"sku"},e),i.a.createElement("div",null,i.a.createElement("small",null,"Vol: ",Object(he.a)(t.volume))," ",i.a.createElement("br",null),i.a.createElement("small",{className:"text-primary"},"Size: ",t.width," \xd7 ",t.height," \xd7 ",t.length)))}},{id:"duplicate",title:d("common.quantity"),render:function(e,t){return i.a.createElement(V.a,{need:["boxes.create","boxes.update"],permissionJoin:"and",fallback:i.a.createElement("span",null,e)},i.a.createElement("input",{className:"form-control",ref:function(e){return r.current[t.id]=e},type:"number",min:0,max:e,onKeyPress:function(e){e.persist(),g(t,e)}}))}},{id:"sfa_id",title:"",render:function(e,t){var a=t.id;return i.a.createElement("div",{className:"actions"},i.a.createElement(V.a,{need:["boxes.delete","boxes.update"],permissionJoin:"and"},i.a.createElement("button",{className:"btn btn-icon btn-light btn-hover-danger btn-sm",onClick:function(){return p(a)}},i.a.createElement("span",{className:"svg-icon svg-icon-md svg-icon-danger"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/General/Trash.svg")})))))}}]}),[e]),p=function(t){(null===e||void 0===e?void 0:e.id)?j(t):c(vl.d.removeTempChildBox(t))},g=Object(l.useCallback)((function(t,a){if(13===a.charCode){var l=Number(r.current[t.id].value)||0;t.duplicate<=l||((null===e||void 0===e?void 0:e.id)?G.a.box.decouple(t.id,l).then((function(a){w(a.duplicated),G.a.box.update(t.id,{box_parent_id:""}).then((function(){c(Object(ve.c)({id:null===e||void 0===e?void 0:e.id,with:"childs"})),v()}))})).catch((function(e){var c,l,i,o=d("warehouse.sku.update.quantity.failure");(null===e||void 0===e||null===(c=e.response)||void 0===c||null===(l=c.data)||void 0===l||null===(i=l.errors)||void 0===i?void 0:i.message)&&(o=e.response.data.errors.message),n.b.error(o),a.target.value=(null===t||void 0===t?void 0:t.duplicate)||1})):G.a.box.decouple(t.id,l).then((function(e){w(e.duplicated),c(vl.d.addTempChildBox(e.duplicated)),c(vl.d.removeTempChildBox(e.id)),v()})).catch((function(e){var c,l,i,o=d("warehouse.sku.update.quantity.failure");(null===e||void 0===e||null===(c=e.response)||void 0===c||null===(l=c.data)||void 0===l||null===(i=l.errors)||void 0===i?void 0:i.message)&&(o=e.response.data.errors.message),n.b.error(o),a.target.value=(null===t||void 0===t?void 0:t.duplicate)||1})))}}),[e]),j=function(t){G.a.box.update(t,{box_parent_id:""}).then((function(){v(),c(Object(ve.c)({id:e.id,with:"childs;items"})),n.b.success(d("warehouse.sku.child.remove.success"))})).catch((function(){n.b.error(d("warehouse.sku.child.remove.failure"))}))},w=function(e){s.current.open(Object(E.a)({title:d("warehouse.sku.child.add.print_label.question",{box_id:e.id})},e))};return i.a.createElement(f.c,{className:"table-box-childs"},i.a.createElement(f.d,null,i.a.createElement(Sa,{columns:h,rows:(null===e||void 0===e?void 0:e.childs)||t,page:1,lastpage:1,isViewEdit:!1,isDelete:!1,isAction:!1,noSTT:!0}),i.a.createElement(Ra,{onOk:function(e){var t,n=O.a.find(a,(function(t){var a;return t.id==(null===e||void 0===e||null===(a=e.sfa)||void 0===a?void 0:a.agency_id)}));Object(Dt.b)(Pt("SKU",Object(E.a)(Object(E.a)(Object(E.a)({},e),null===e||void 0===e?void 0:e.sfa),{},{sku:e.id,sfaId:null===e||void 0===e||null===(t=e.sfa)||void 0===t?void 0:t.id,region:(null===n||void 0===n?void 0:n.name)||"Tokyo",quantity:e.duplicate})))},ref:s})))}),ri=(a(1505),function(e){var t=Object(o.e)((function(e){return e.warehouse.box.detail.data})),a=Object(o.d)(),n=function(){a(Object(ve.c)({id:null===t||void 0===t?void 0:t.id,with:"childs"}))};return i.a.createElement(f.c,{className:"children-boxes"},i.a.createElement(f.d,null,i.a.createElement(ii,{onSuccess:n}),i.a.createElement(oi,{onRefresh:n})))}),si=(a(1506),function(){return i.a.createElement("div",{className:"packaging"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-6 col-sm-12"},i.a.createElement(ri,null)),i.a.createElement("div",{className:"col-lg-6 col-sm-12"},i.a.createElement(ti,null))))}),ui=(a(1507),function(e){var t=Object(o.e)((function(e){return e.warehouse.sfa.detail})),a=t.data,n=t.loading,c=Object(o.d)(),s=Object(r.j)(),u=Zl();return Object(l.useEffect)((function(){c(ve.a.setBoxDetailData(void 0)),(null===s||void 0===s?void 0:s.sfa_id)&&u()}),[null===s||void 0===s?void 0:s.sfa_id]),a||n?i.a.createElement(i.a.Fragment,null,i.a.createElement(rl,null),i.a.createElement("div",{className:"packaging-product position-relative"},n&&i.a.createElement(x.a,{local:!0}),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-9 col-md-12 col-sm-12"},i.a.createElement(ei,null),i.a.createElement(si,null)),i.a.createElement("div",{className:"col-lg-3 col-md-3 col-sm-12 ipad-hidden"},i.a.createElement(Ee,{showTotalItems:!0,showQuantity:function(e){return e.duplicate},showRelative:!0}))))):i.a.createElement(xa,null)}),di=(a(1508),function(e){var t=Object(r.k)();return i.a.createElement("div",{className:"perform-entry-page p-5"},i.a.createElement(ml,null),i.a.createElement(r.e,null,i.a.createElement(r.b,{exact:!0,from:"/warehouse/inbound",to:"/warehouse/inbound/step-1"}),i.a.createElement(r.c,{path:"".concat(t.path,"/step-1")},i.a.createElement(dl,null)),i.a.createElement(r.c,{path:"".concat(t.path,"/step-2/:sfa_id/:box_id?")},i.a.createElement(Hl,null)),i.a.createElement(r.c,{path:"".concat(t.path,"/step-3/:sfa_id")},i.a.createElement($l,null)),i.a.createElement(r.c,{path:"".concat(t.path,"/step-4/:sfa_id")},i.a.createElement(ui,null))))}),mi=a(432),bi=(a(1509),function(e){var t=Object(o.e)((function(e){return e.warehouse.agency.list})),a=Object(o.e)((function(e){return e.warehouse.settings.default_agency})),n=Object(l.useState)(),c=Object(m.a)(n,2),r=c[0],s=c[1],u=Object(o.d)(),d=Object(b.a)(),v=Object(m.a)(d,1)[0];Object(l.useEffect)((function(){(null===r||void 0===r?void 0:r.value)&&(null===r||void 0===r?void 0:r.value)!==a&&u(mi.b.changeDefaultAgency(null===r||void 0===r?void 0:r.value))}),[r,a]),Object(l.useEffect)((function(){if(t.length&&a&&!r){var e=O.a.find(t,["id",a]);e&&s({label:e.name,value:e.id})}}),[t,a,r]);var f=Object(l.useMemo)((function(){return t.map((function(e){return{label:e.name,value:e.id}}))}),[t]);return i.a.createElement("div",{className:"row default-agency"},i.a.createElement("div",{className:"col-lg-4 custom-label"},v("warehouse.settings.default_agency"),":"),i.a.createElement("div",{className:"col-lg-6"},i.a.createElement(Be.a,{className:"react-cm-select",value:r,options:f,onChange:function(e){s(e)}})))}),vi=(a(1510),function(e){var t=Object(l.useState)(),a=Object(m.a)(t,2),c=a[0],r=a[1],s=Object(l.useState)(!1),u=Object(m.a)(s,2),d=u[0],v=u[1],f=Object(o.e)((function(e){return e.warehouse.settings.printer.socketServer})),h=Object(o.d)(),p=Object(b.a)(),E=Object(m.a)(p,1)[0];Object(l.useEffect)((function(){r(f)}),[]),Object(l.useEffect)((function(){c&&c!==f&&g(c)}),[c,f]);var g=Object(l.useCallback)(O.a.debounce((function(e){h(mi.b.changePrinterSocketServer(e))}),700),[]);return i.a.createElement("div",{className:"row printer-settings mt-5"},i.a.createElement("div",{className:"col-lg-4 custom-label"},E("warehouse.settings.default_ip_server"),":"),i.a.createElement("div",{className:"col-lg-6 d-flex"},i.a.createElement("input",{value:c||"",onChange:function(e){r(e.target.value)},className:"form-control"}),i.a.createElement("button",{className:"btn btn-primary ml-3",onClick:function(){v(!0);var e=new WebSocket(c+"?encoding=text",ae.a);e.onopen=function(t){v(!1),n.b.success(E("printer.connect_success")),e.close()},e.onerror=function(t){v(!1),n.b.error(E("printer.connect_failure_x_ip",{ip:c})),e.close()}},disabled:d},E("printer.connect"))))});a(1511);var fi=function(e){var t=e.onRefresh,a=e.dataTable,c=void 0===a?[]:a,o=Object(r.h)(),s=Object(r.k)(),u=function(){var e=Object(b.a)(),t=Object(m.a)(e,1)[0];return[{id:"id",title:t("warehouse.location.title")},{id:"shelve",title:t("warehouse.shelve.title"),render:function(e,a){var n=a.floor,c=a.row,l=a.column;return i.a.createElement("div",{className:"shelve"},i.a.createElement("div",{className:"shelve--id"},t("warehouse.shelve.title"),": ",e.id),i.a.createElement("div",{className:"shelve--for-location"},i.a.createElement("div",null,t("common.floor"),": ",n),i.a.createElement("div",null,t("common.row"),": ",c),i.a.createElement("div",null,t("common.column"),": ",l)))}},{id:"pallets",title:t("common.status"),render:function(e){return(null===e||void 0===e?void 0:e.length)?i.a.createElement("span",{className:"tag occupied"},t("common.occupied")):i.a.createElement("span",{className:"tag available"},t("common.available"))}}]}(),d=Object(b.a)(),v=Object(m.a)(d,1)[0],f=function(e){G.a.location.delete(e).then((function(){t&&t(),n.b.success(v("warehouse.location.delete.success"))})).catch((function(){n.b.error(v("warehouse.location.delete.failure"))}))},h=Object(l.useMemo)((function(){return[function(e){return i.a.createElement("button",{className:"btn btn-icon btn-light btn-hover-primary btn-sm mr-2",onClick:function(){return function(e){Object(Dt.b)(Pt("LOCATION",{locationId:e.id,floor:e.floor,row:e.row,column:e.column,quantity:2}))}(e)}},i.a.createElement("span",{className:"svg-icon svg-icon-success"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Devices/Printer.svg")})))}]}),[]),p=Object(l.useMemo)((function(){return O.a.sortBy(c,["shelve_id","floor","row","column"])}),[c]);return c.length?i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{need:["locations.delete"]},i.a.createElement(r.c,{path:"".concat(s.path,"/delete-location/:location_id")},(function(e){var t,a=e.match;return i.a.createElement(qe,{id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.location_id,show:null!=a,onConfirmed:f,title:v("warehouse.location.delete.title")})}))),i.a.createElement(Sa,{columns:u,rows:p,onDelete:function(e){o.push("".concat(s.url,"/delete-location/").concat(e))},isViewEdit:!1,rowKey:"id",className:"table-locations",additionalActions:h,noSTT:!0,permissions:{delete:["locations.delete"]}})):i.a.createElement(Re.a,{emptyText:v("warehouse.location.empty")})},hi=(a(1512),function(e){var t=e.onChange,a=e.value,n=e.showLabel,c=void 0===n||n,l=Object(Z.a)(e,["onChange","value","showLabel"]),r=Object(o.e)((function(e){return e.warehouse.area.list})),s=Object(o.e)((function(e){return e.warehouse.area.loading})),u=Object(o.d)(),d=Object(b.a)(),v=Object(m.a)(d,1)[0],f=null===r||void 0===r?void 0:r.map((function(e){return function(e){return{value:e.id,label:"M\xe3: ".concat(e.id," - ").concat(e.name)}}(e)}));return i.a.createElement(Me,Object.assign({value:a,label:c&&v("warehouse.area.title"),className:"select-area",placeholder:v("warehouse.area.title"),options:f,onChange:function(e){t&&t(e.value)},isLoading:s,onFetchData:function(e){u(Object(zt.b)(e))},typeSearch:"name"},l))}),pi=function(e){var t,a=e.show,n=e.onHide,c=e.onSuccess,s=Object(l.useState)(),u=Object(m.a)(s,2),d=u[0],v=u[1],f=Object(o.e)((function(e){return e.warehouse.area.list})),h=Object(r.h)(),p=Object(l.useRef)(),E=Object(b.a)(),g=Object(m.a)(E,1)[0],j=function(){n?n():h.goBack()};return i.a.createElement(oe.a,{show:a,onHide:j,title:g("warehouse.location.create.title"),actionsLoading:d},i.a.createElement(re.a.Body,null,i.a.createElement(Wt,{initialValues:{area_id:null===f||void 0===f||null===(t=f[0])||void 0===t?void 0:t.id,shelve_id:"",floor:1,row:1,column:1},onSubmit:function(e,t){v(!0),G.a.location.create(e).then((function(e){Object(Dt.b)(Pt("LOCATION",{locationId:e.id,floor:e.floor,row:e.row,column:e.column,quantity:2})),c&&c(e),j()})).catch((function(e){console.error(e),J(e,t)})).finally((function(){v(!1)}))},ref:p})),i.a.createElement(re.a.Footer,null,i.a.createElement(de,{type:"secondary",loading:d,onClick:j,className:"btn-large"},g("common.back")),i.a.createElement(de,{type:"primary",loading:d,onClick:function(){p.current.submitForm()},className:"btn-large"},g("common.save"))))},Ei=function(e){var t=e.onChange,a=e.value,n=e.showLabel,c=void 0===n||n,r=Object(Z.a)(e,["onChange","value","showLabel"]),s=Object(o.e)((function(e){return e.warehouse.shelve.list.data})),u=Object(o.e)((function(e){return e.warehouse.shelve.list.loading})),d=Object(o.d)(),v=Object(b.a)(),f=Object(m.a)(v,1)[0],h=Object(l.useCallback)((function(e){return{value:e.id,label:f("warehouse.shelve.option_label",{id:e.id,shelve_info:"F".concat(null===e||void 0===e?void 0:e.floor," . R").concat(null===e||void 0===e?void 0:e.row," . C").concat(null===e||void 0===e?void 0:e.column)})}}),[f]),p=null===s||void 0===s?void 0:s.map((function(e){return h(e)}));return i.a.createElement(Me,Object.assign({value:a,label:c&&f("warehouse.shelve.find"),placeholder:f("warehouse.shelve.find"),className:"select-shelve",options:p,onChange:function(e){t&&t(e.value)},loading:u,onFetchData:function(e){d(Object(Qt.b)(e))}},r))},gi=(a(1513),function(e){var t=Object(l.useState)(),a=Object(m.a)(t,2),c=a[0],o=a[1],s=Object(l.useState)(),u=Object(m.a)(s,2),d=u[0],v=u[1],h=Object(b.a)(),p=Object(m.a)(h,1)[0],g=Object(r.k)(),j=Object(r.h)(),w=function(e,t){var a=Object(l.useState)(!1),c=Object(m.a)(a,2),i=c[0],o=c[1],r=Object(l.useState)([]),s=Object(m.a)(r,2),u=s[0],d=s[1],v=Object(b.a)(),f=Object(m.a)(v,1)[0];Object(l.useEffect)((function(){e&&h()}),[e]),Object(l.useEffect)((function(){t&&p()}),[t]);var h=function(){o(!0),d([]),G.a.area.fetchArea(e,{with:"shelves.locations.pallets"}).then((function(e){var t;if(null===e||void 0===e||null===(t=e.shelves)||void 0===t?void 0:t.length){var a=e.shelves.reduce((function(e,t){var a=t.locations.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{shelve:O.a.omit(t,["locations"])})}));return[].concat(Object(fe.a)(e),Object(fe.a)(a))}),[]);d(a)}})).catch((function(e){console.error(e),n.b.error(f("warehouse.location.get.failure"))})).finally((function(){o(!1)}))},p=function(){o(!0),d([]),G.a.shelve.fetchShelve(t,{with:"locations.pallets"}).then((function(e){var t;if(null===e||void 0===e||null===(t=e.locations)||void 0===t?void 0:t.length){var a=e.locations.map((function(t){return Object(E.a)(Object(E.a)({},t),{},{shelve:O.a.omit(e,["locations"])})}));d(a)}})).catch((function(e){console.error(e),n.b.error(f("warehouse.location.get.failure"))})).finally((function(){o(!1)}))};return{dataTable:u,loading:i,f5Data:h}}(c,d),_=w.dataTable,y=w.loading,N=w.f5Data;return i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{need:["locations.create"]},i.a.createElement(r.c,{path:"".concat(g.path,"/create-location")},(function(e){var t=e.match;return i.a.createElement(pi,{show:null!==t,onSuccess:N})}))),i.a.createElement(f.c,{className:"location-management"},i.a.createElement(f.e,{title:p("warehouse.location.title")},i.a.createElement(V.a,{need:["locations.create"]},i.a.createElement(f.f,null,i.a.createElement("button",{className:"btn btn-primary",onClick:function(){j.push("".concat(g.url,"/create-location"))}},p("warehouse.location.create.title"))))),i.a.createElement(f.d,null,i.a.createElement("div",{className:"d-flex filter-section"},i.a.createElement(hi,{value:c,onChange:function(e){o(e)},dispatchFirstOption:!0}),i.a.createElement(Ei,{value:d,onChange:function(e){v(e)}})),i.a.createElement("div",{className:"position-relative"},i.a.createElement(fi,{dataTable:_,onRefresh:N}),y&&i.a.createElement(x.a,{local:!0})))))});a(1514);function ji(e,t){var a=e.formItemClass,n=void 0===a?"col-lg-12 col-md-12 col-sm-12":a,c=e.initialValues,l=void 0===c?{weight:1,max_width:1,max_height:1,max_length:1,max_weight:1}:c,o=e.onSubmit,r=Object(b.a)(),s=Object(m.a)(r,1)[0],u=X.d().shape({weight:X.c().min(0,s("validation.message.min",{min:0})).required(s("validation.message.required")),max_width:X.c().min(0,s("validation.message.min",{min:0})).required(s("validation.message.required")),max_height:X.c().min(0,s("validation.message.min",{min:0})).required(s("validation.message.required")),max_length:X.c().min(0,s("validation.message.min",{min:0})).required(s("validation.message.required")),max_weight:X.c().min(0,s("validation.message.min",{min:0})).required(s("validation.message.required"))});return i.a.createElement(W.d,{enableReinitialize:!0,initialValues:l,onSubmit:o,innerRef:t,validationSchema:u},i.a.createElement(te,{className:"form form-label-right form-add-pallet-box"},i.a.createElement("div",{className:"form-group row"},i.a.createElement("div",{className:n},i.a.createElement(W.b,{name:"weight",component:f.i,label:s("common.weight"),placeholder:s("common.weight"),type:"number",autoComplete:"off",min:0})),i.a.createElement("div",{className:n},i.a.createElement(W.b,{name:"max_width",component:f.i,label:s("common.width"),placeholder:s("common.width"),type:"number",autoComplete:"off",min:0})),i.a.createElement("div",{className:n},i.a.createElement(W.b,{name:"max_height",component:f.i,label:s("common.height"),placeholder:s("common.height"),type:"number",autoComplete:"off",min:0})),i.a.createElement("div",{className:n},i.a.createElement(W.b,{name:"max_length",component:f.i,label:s("common.length"),placeholder:s("common.length"),type:"number",autoComplete:"off",min:0})),i.a.createElement("div",{className:n},i.a.createElement(W.b,{name:"max_weight",component:f.i,label:s("common.max_weight"),placeholder:s("common.max_weight"),type:"number",autoComplete:"off",min:0}))),i.a.createElement($,null)))}var Oi=i.a.forwardRef(ji),wi=function(e,t){var a=e.show,c=e.onHide,o=e.onSuccess,s=e.editMode,u=void 0!==s&&s,d=e.id,v=Object(l.useState)(),f=Object(m.a)(v,2),h=f[0],p=f[1],E=Object(l.useState)(),g=Object(m.a)(E,2),j=g[0],O=g[1],w=Object(b.a)(),_=Object(m.a)(w,1)[0],y=Object(r.h)(),N=Object(l.useRef)();Object(l.useImperativeHandle)(t,(function(){return{setInitialData:function(e){O(e)}}}));var x=function(){c?c():y.goBack()},k=function(e,t){p(!0),G.a.palletType.create(e).then((function(){n.b.success(_("warehouse.pallet_type.create.success")),o&&o(),x()})).catch((function(e){n.b.error(_("warehouse.pallet_type.create.failure")),J(e,t)})).finally((function(){p(!1)}))},C=function(e,t){p(!0),G.a.palletType.update(d,e).then((function(){n.b.success(_("warehouse.pallet_type.update.success")),o&&o(),x()})).catch((function(e){n.b.error(_("warehouse.pallet_type.update.failure")),J(e,t)})).finally((function(){p(!1)}))};return i.a.createElement(oe.a,{show:a,onHide:x,title:_(u?"warehouse.pallet_type.update.title":"warehouse.pallet_type.create.title"),actionsLoading:h},i.a.createElement(re.a.Body,null,i.a.createElement(Oi,{formItemClass:"col-lg-4 col-md-6 col-sm-12",ref:N,onSubmit:function(e,t){u?C(e,t):k(e,t)},initialValues:j})),i.a.createElement(re.a.Footer,null,i.a.createElement(de,{type:"secondary",loading:h,onClick:x},_("common.cancel")),i.a.createElement(de,{type:"primary",loading:h,onClick:function(){N.current.submitForm()}},_("common.save"))))},_i=i.a.forwardRef(wi);a(1515);var yi=function(e){var t=e.onRefresh,a=e.onViewEdit,c=Object(o.e)((function(e){return e.warehouse.palletType.list.data})),l=function(){var e=Object(b.a)(),t=Object(m.a)(e,1)[0];return[{id:"id",title:t("warehouse.pallet_type.id")},{id:"max_volume",title:t("common.max_volume"),render:function(e){return i.a.createElement("b",{className:"text-success"},Object(he.a)(e))}},{id:"weight",title:t("common.weight"),render:function(e,a){var n=a.max_weight;return i.a.createElement("div",{className:"pallet-type__weight"},i.a.createElement("div",{className:"weight--empty"},Object(he.a)(e)),i.a.createElement("div",{className:"weight--max-weight"},t("common.max_weight"),": ",i.a.createElement("b",{className:"text-primary"},Object(he.a)(n))))}},{id:"max_width",title:t("common.max_width"),render:function(e){return Object(he.a)(e)}},{id:"max_height",title:t("common.max_height"),render:function(e){return Object(he.a)(e)}},{id:"max_length",title:t("common.max_length"),render:function(e){return Object(he.a)(e)}}]}(),s=Object(b.a)(),u=Object(m.a)(s,1)[0],d=Object(r.h)(),v=Object(r.k)(),f=function(e){G.a.palletType.delete(e).then((function(){t&&t(),n.b.success(u("warehouse.pallet_type.delete.success"))})).catch((function(e){console.error(e),n.b.error(u("warehouse.pallet_type.delete.failure"))}))};return c.length?i.a.createElement("div",{className:"table-pallet-type"},i.a.createElement(V.a,{need:["pallet-types.delete"]},i.a.createElement(r.c,{path:"".concat(v.path,"/delete-pallet-type/:pallet_type_id")},(function(e){var t,a=e.match;return i.a.createElement(qe,{id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.pallet_type_id,show:null!=a,onConfirmed:f,title:u("warehouse.pallet_type.delete.title")})}))),i.a.createElement(Sa,{columns:l,rows:c,onDelete:function(e){d.push("".concat(v.url,"/delete-pallet-type/").concat(e))},onViewEdit:a,isPagination:!1,rowKey:"id",noSTT:!0,permissions:{delete:["pallet-types.delete"]}})):i.a.createElement(Re.a,{emptyText:u("warehouse.pallet_type.list.empty")})},Ni=function(e){var t=Object(b.a)(),a=Object(m.a)(t,1)[0],n=Object(r.h)(),c=Object(r.k)(),s=Object(l.useRef)(),u=Object(o.d)();Object(l.useEffect)((function(){d()}),[]);var d=function(){u(Object(Mt.b)())};return i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{need:["pallet-types.create"]},i.a.createElement(r.c,{path:"".concat(c.path,"/create-pallet-type")},(function(e){var t=e.match;return i.a.createElement(_i,{show:null!==t,onSuccess:d})}))),i.a.createElement(V.a,{need:["pallet-types.update"]},i.a.createElement(r.c,{path:"".concat(c.path,"/edit-pallet-type/:pallet_type_id")},(function(e){var t,a=e.match;return i.a.createElement(_i,{id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.pallet_type_id,show:null!==a,onSuccess:d,editMode:!0,ref:s})}))),i.a.createElement(f.c,{className:"pallet-type-managements"},i.a.createElement(f.e,{title:a("warehouse.pallet_type.title")},i.a.createElement(V.a,{need:["pallet-types.create"]},i.a.createElement(f.f,null,i.a.createElement("button",{className:"btn btn-primary",onClick:function(){n.push("".concat(c.url,"/create-pallet-type"))}},a("warehouse.pallet_type.create.title"))))),i.a.createElement(f.d,null,i.a.createElement(yi,{onRefresh:d,onViewEdit:function(e,t){s.current.setInitialData(t),n.push("".concat(c.url,"/edit-pallet-type/").concat(e))}}))))};a(1516);var xi=function(e){var t=e.onRefresh,a=e.onViewEdit,c=Object(o.e)((function(e){return e.warehouse.area.list})),l=function(){var e=Object(b.a)(),t=Object(m.a)(e,1)[0];return[{id:"id",title:t("warehouse.area.title")},{id:"name",title:t("warehouse.area.name")}]}(),s=Object(b.a)(),u=Object(m.a)(s,1)[0],d=Object(r.h)(),v=Object(r.k)(),f=function(e){G.a.area.delete(e).then((function(){t&&t(),n.b.success(u("warehouse.area.delete.success"))})).catch((function(e){console.error(e),n.b.error(u("warehouse.area.delete.failure"))}))};return c.length?i.a.createElement("div",{className:"table-area"},i.a.createElement(V.a,{need:"areas.delete"},i.a.createElement(r.c,{path:"".concat(v.path,"/delete-area/:area_id")},(function(e){var t,a=e.match;return i.a.createElement(qe,{id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.area_id,show:null!=a,onConfirmed:f,title:u("warehouse.area.delete.title")})}))),i.a.createElement(Sa,{columns:l,rows:c,onDelete:function(e){d.push("".concat(v.url,"/delete-area/").concat(e))},onViewEdit:a,isPagination:!1,rowKey:"id",noSTT:!0,permissions:{update:"areas.update",delete:"areas.delete"}})):i.a.createElement(Re.a,{emptyText:u("warehouse.area.list.empty")})};a(1517);function ki(e,t){var a=e.initialValues,n=void 0===a?{name:"",id:""}:a,c=e.onSubmit,l=Object(b.a)(),o=Object(m.a)(l,1)[0],r=X.d().shape({id:X.f().required(o("validation.message.required")),name:X.f().required(o("validation.message.required"))});return i.a.createElement(W.d,{enableReinitialize:!0,initialValues:n,onSubmit:c,innerRef:t,validationSchema:r},i.a.createElement(te,{className:"form form-label-right form-add-area"},i.a.createElement("div",{className:"p-3"},i.a.createElement(W.b,{name:"id",component:f.i,label:o("warehouse.area.id"),placeholder:o("warehouse.area.id"),autoComplete:"off"})),i.a.createElement("div",{className:"p-3"},i.a.createElement(W.b,{name:"name",component:f.i,label:o("warehouse.area.name"),placeholder:o("warehouse.area.name"),autoComplete:"off"})),i.a.createElement($,null)))}var Ci=i.a.forwardRef(ki),Si=function(e,t){var a=e.show,c=e.onHide,o=e.onSuccess,s=e.editMode,u=void 0!==s&&s,d=e.id,v=Object(l.useState)(!1),f=Object(m.a)(v,2),h=f[0],p=f[1],E=Object(l.useState)(),g=Object(m.a)(E,2),j=g[0],O=g[1],w=Object(b.a)(),_=Object(m.a)(w,1)[0],y=Object(r.h)(),N=Object(l.useRef)();Object(l.useImperativeHandle)(t,(function(){return{setInitialData:function(e){O(e)}}}));var x=Object(l.useCallback)((function(){c?c():y.goBack()}),[y,c]),k=Object(l.useCallback)((function(){N.current.submitForm()}),[N]),C=Object(l.useCallback)((function(e,t){G.a.area.update(d,e).then((function(){n.b.success(_("warehouse.area.update.success")),o&&o(),x()})).catch((function(e){console.error(e),n.b.error(_("warehouse.area.update.failure")),J(e,t)})).finally((function(){p(!1)}))}),[d,x,o,_]),S=Object(l.useCallback)((function(e,t){G.a.area.create(e).then((function(){n.b.success(_("warehouse.area.create.success")),o&&o(),x()})).catch((function(e){console.error(e),n.b.error(_("warehouse.area.create.failure")),J(e,t)})).finally((function(){p(!1)}))}),[o,x,_]);return i.a.createElement(oe.a,{show:a,onHide:x,actionsLoading:h,title:_(u?"warehouse.area.update.title":"warehouse.area.create.title")},i.a.createElement(re.a.Body,null,i.a.createElement(Ci,{initialValues:j,onSubmit:function(e,t){p(!0),u?C(e,t):S(e,t)},ref:N})),i.a.createElement(re.a.Footer,null,i.a.createElement(de,{type:"secondary",onClick:x},_("common.cancel")),i.a.createElement(de,{type:"primary",onClick:k,loading:h},_("common.save"))))},qi=i.a.forwardRef(Si),Ri=function(e){var t=Object(b.a)(),a=Object(m.a)(t,1)[0],n=Object(o.d)(),c=Object(r.h)(),s=Object(r.k)(),u=Object(l.useRef)();Object(l.useEffect)((function(){d()}),[]);var d=Object(l.useCallback)((function(){n(Object(zt.b)())}),[n]),v=Object(l.useCallback)((function(e,t){u.current.setInitialData(t),c.push("".concat(s.url,"/edit-area/").concat(e))}),[c,s.url]),h=Object(l.useCallback)((function(){c.push("".concat(s.url,"/create-area"))}),[c,s.url]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{need:["areas.create"]},i.a.createElement(r.c,{path:"".concat(s.path,"/create-area")},(function(e){var t=e.match;return i.a.createElement(qi,{show:null!==t,onSuccess:d})}))),i.a.createElement(V.a,{need:["areas.update"]},i.a.createElement(r.c,{path:"".concat(s.path,"/edit-area/:id")},(function(e){var t,a=e.match;return i.a.createElement(qi,{ref:u,id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.id,editMode:!0,show:null!==a,onSuccess:d})}))),i.a.createElement(f.c,{className:"area-management"},i.a.createElement(f.e,{title:a("warehouse.area.title")},i.a.createElement(V.a,{need:["areas.create"]},i.a.createElement(f.f,null,i.a.createElement(de,{type:"primary",onClick:h},a("warehouse.area.create.title"))))),i.a.createElement(f.d,null,i.a.createElement(xi,{onRefresh:d,onViewEdit:v}))))};a(1518);var Fi=function(e){var t=e.onRefresh,a=e.onViewEdit,c=Object(o.e)((function(e){return e.warehouse.shelve.list.data})),s=Object(o.e)((function(e){return e.warehouse.shelve.list.pagination})),u=function(){var e=Object(b.a)(),t=Object(m.a)(e,1)[0];return[{id:"id",title:t("warehouse.shelve.title")},{id:["area","name"],title:t("warehouse.area.name")},{id:"floor",title:t("common.floor")},{id:"row",title:t("common.row")},{id:"column",title:t("common.column")}]}(),d=Object(b.a)(),v=Object(m.a)(d,1)[0],f=Object(r.h)(),h=Object(r.k)(),p=Object(o.d)(),E=function(e){G.a.shelve.delete(e).then((function(){t&&t(),n.b.success(v("warehouse.shelve.delete.success"))})).catch((function(e){console.error(e),n.b.error(v("warehouse.shelve.delete.failure"))}))},g=Object(l.useCallback)((function(e){p(Qt.c.changePage(e))}),[p]);return c.length?i.a.createElement("div",{className:"table-goods-deliveries"},i.a.createElement(V.a,{need:["shelves.delete"]},i.a.createElement(r.c,{path:"".concat(h.path,"/delete-shelve/:shelve_id")},(function(e){var t,a=e.match;return i.a.createElement(qe,{id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.shelve_id,show:null!=a,onConfirmed:E,title:v("warehouse.shelve.delete.title")})}))),i.a.createElement(Sa,{columns:u,rows:c,onDelete:function(e){f.push("".concat(h.url,"/delete-shelve/").concat(e))},onViewEdit:a,page:s.page,lastpage:s.lastPage,onPageChange:g,rowKey:"id",noSTT:!0,permissions:{update:"shelves.update",delete:"shelves.delete"}})):i.a.createElement(Re.a,{emptyText:v("warehouse.shelve.list.empty")})},Di=function(e){var t=e.name,a=Object(Z.a)(e,["name"]),n=Object(W.e)(t),c=Object(m.a)(n,2),l=c[0],o=c[1],r=Object(W.g)(),s=r.setFieldTouched,u=r.setFieldValue,d=o.error,b=o.touched;return i.a.createElement("div",{className:Object(k.a)(b&&d&&"is-invalid")},i.a.createElement(hi,Object.assign({value:l.value,onChange:function(e){u(t,e)},onClick:function(){s(l.name)}},a)),b&&d&&i.a.createElement("div",{className:"invalid-feedback d-block"},d))},Bi=(a(1519),function(e,t){var a=e.onSubmit,n=e.initialValues,c=void 0===n?{area_id:"",floor:1,row:1,column:1}:n,l=Object(b.a)(),o=Object(m.a)(l,1)[0],r=X.d().shape({area_id:X.f().required(o("validation.message.required")),floor:X.c().min(1,o("validation.message.min",{min:1})),row:X.c().min(1,o("validation.message.min",{min:1})),column:X.c().min(1,o("validation.message.min",{min:1}))});return i.a.createElement(W.d,{initialValues:c,enableReinitialize:!0,validationSchema:r,onSubmit:a,innerRef:t},i.a.createElement(W.c,{className:"form-add-location"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-6 col-sm-12"},i.a.createElement(Di,{name:"area_id"})),i.a.createElement("div",{className:"col-lg-6 col-sm-12"},i.a.createElement(W.b,{name:"floor",label:o("common.floor"),component:f.i,type:"number"})),i.a.createElement("div",{className:"col-lg-6 col-sm-12"},i.a.createElement(W.b,{name:"row",label:o("common.row"),component:f.i,type:"number"})),i.a.createElement("div",{className:"col-lg-6 col-sm-12"},i.a.createElement(W.b,{name:"column",label:o("common.column"),component:f.i,type:"number"}))),i.a.createElement($,null)))}),Pi=i.a.forwardRef(Bi),Ti=function(e,t){var a=e.show,c=e.onHide,o=e.onSuccess,s=e.editMode,u=void 0!==s&&s,d=e.id,v=Object(l.useState)(!1),f=Object(m.a)(v,2),h=f[0],p=f[1],E=Object(l.useState)(),g=Object(m.a)(E,2),j=g[0],O=g[1],w=Object(b.a)(),_=Object(m.a)(w,1)[0],y=Object(r.h)(),N=Object(l.useRef)();Object(l.useImperativeHandle)(t,(function(){return{setInitialData:function(e){O(e)}}}));var x=Object(l.useCallback)((function(){c?c():y.goBack()}),[y,c]),k=Object(l.useCallback)((function(){N.current.submitForm()}),[N]),C=Object(l.useCallback)((function(e,t){G.a.shelve.update(d,e).then((function(){n.b.success(_("warehouse.shelve.update.success")),o&&o(),x()})).catch((function(e){console.error(e),n.b.error(_("warehouse.shelve.update.failure")),J(e,t)})).finally((function(){p(!1)}))}),[d,x,o,_]),S=Object(l.useCallback)((function(e,t){G.a.shelve.create(e).then((function(){n.b.success(_("warehouse.shelve.create.success")),o&&o(),x()})).catch((function(e){console.error(e),n.b.error(_("warehouse.shelve.create.failure")),J(e,t)})).finally((function(){p(!1)}))}),[o,x,_]);return i.a.createElement(oe.a,{show:a,onHide:x,actionsLoading:h,title:_("warehouse.shelve.create.title")},i.a.createElement(re.a.Body,null,i.a.createElement(Pi,{initialValues:j,onSubmit:function(e,t){p(!0),u?C(e,t):S(e,t)},ref:N})),i.a.createElement(re.a.Footer,null,i.a.createElement(de,{type:"secondary",onClick:x},_("common.cancel")),i.a.createElement(de,{type:"primary",onClick:k,loading:h},_("common.save"))))},Mi=i.a.forwardRef(Ti),Ii=function(e){var t=Object(o.e)((function(e){return e.warehouse.shelve.list.pagination})),a=Object(b.a)(),n=Object(m.a)(a,1)[0],c=Object(o.d)(),s=Object(r.h)(),u=Object(r.k)(),d=Object(l.useRef)();Object(l.useEffect)((function(){v({page:t.page})}),[t.page]);var v=Object(l.useCallback)((function(e){c(Object(Qt.b)(Object(E.a)({with:"area"},e)))}),[c]),h=Object(l.useCallback)((function(e,t){d.current.setInitialData(t),s.push("".concat(u.url,"/edit-shelve/").concat(e))}),[s,u.url]),p=Object(l.useCallback)((function(){s.push("".concat(u.url,"/create-shelve"))}),[s,u.url]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{need:["shelves.create"]},i.a.createElement(r.c,{path:"".concat(u.path,"/create-shelve")},(function(e){var t=e.match;return i.a.createElement(Mi,{show:null!==t,onSuccess:v})}))),i.a.createElement(V.a,{need:["shelves.update"]},i.a.createElement(r.c,{path:"".concat(u.path,"/edit-shelve/:id")},(function(e){var t,a=e.match;return i.a.createElement(Mi,{ref:d,id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.id,editMode:!0,show:null!==a,onSuccess:v})}))),i.a.createElement(f.c,{className:"shelve-management"},i.a.createElement(f.e,{title:n("warehouse.shelve.title")},i.a.createElement(V.a,{need:["shelves.create"]},i.a.createElement(f.f,null,i.a.createElement(de,{type:"primary",onClick:p},n("warehouse.shelve.create.title"))))),i.a.createElement(f.d,null,i.a.createElement(Fi,{onRefresh:v,onViewEdit:h}))))};a(1520);var Vi=function(e){var t=e.onRefresh,a=e.onViewEdit,c=Object(o.e)((function(e){return e.warehouse.containerType.list.data})),l=function(){var e=Object(b.a)(),t=Object(m.a)(e,1)[0];return[{id:"id",title:t("warehouse.container_type.id")},{id:["shipment_method","name"],title:t("warehouse.shipment_method.title")},{id:["to_area","name"],title:t("warehouse.container_type.to_area")},{id:"volume",title:t("common.volume"),render:function(e){return Object(he.a)(e)}},{id:"weight",title:t("common.weight"),render:function(e){return Object(he.a)(e)}},{id:"day_of_week",title:t("common.day_of_week"),render:function(e){return t(function(e){switch(e){case 1:return"common.sunday";case 2:return"common.monday";case 3:return"common.tuesday";case 4:return"common.wednesday";case 5:return"common.thursday";case 6:return"common.friday";case 7:return"common.saturday";default:return"common.monday"}}(e))}}]}(),s=Object(b.a)(),u=Object(m.a)(s,1)[0],d=Object(r.h)(),v=Object(r.k)(),f=function(e){G.a.containerType.delete(e).then((function(){t&&t(),n.b.success(u("warehouse.container_type.delete.success"))})).catch((function(e){console.error(e),n.b.error(u("warehouse.container_type.delete.failure"))}))};return c.length?i.a.createElement("div",{className:"table-goods-deliveries"},i.a.createElement(V.a,{need:["container-types.delete"]},i.a.createElement(r.c,{path:"".concat(v.path,"/delete-container-type/:container_type_id")},(function(e){var t,a=e.match;return i.a.createElement(qe,{id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.container_type_id,show:null!=a,onConfirmed:f,title:u("warehouse.container_type.delete.title")})}))),i.a.createElement(Sa,{columns:l,rows:c,onDelete:function(e){d.push("".concat(v.url,"/delete-container-type/").concat(e))},onViewEdit:a,isPagination:!1,rowKey:"id",noSTT:!0,permissions:{update:"container-types.update",delete:"container-types.delete"}})):i.a.createElement(Re.a,{emptyText:u("warehouse.container_type.list.empty")})},Li=(a(1521),function(e){var t=e.onChange,a=e.value,n=e.showLabel,c=void 0===n||n,o=Object(Z.a)(e,["onChange","value","showLabel"]),r=Object(b.a)(),s=Object(m.a)(r,1)[0],u=Object(l.useMemo)((function(){return[{value:2,label:s("common.monday")},{value:3,label:s("common.tuesday")},{value:4,label:s("common.wednesday")},{value:5,label:s("common.thursday")},{value:6,label:s("common.friday")},{value:7,label:s("common.saturday")},{value:1,label:s("common.sunday")}]}),[s]);return i.a.createElement(Me,Object.assign({value:a,label:c&&s("common.day_of_week"),placeholder:s("common.pick_here"),options:u,onChange:function(e){t&&t(e.value)},className:"select-date-of-week"},o))}),Ai=function(e){var t=e.name,a=Object(Z.a)(e,["name"]),n=Object(W.e)(t),c=Object(m.a)(n,2),l=c[0],o=c[1],r=Object(W.g)(),s=r.setFieldTouched,u=r.setFieldValue,d=o.error,b=o.touched;return i.a.createElement("div",{className:Object(k.a)(b&&d&&"is-invalid")},i.a.createElement(Li,Object.assign({value:l.value,onChange:function(e){u(l.name,e)},onClick:function(){s(l.name)}},a)),b&&d&&i.a.createElement("div",{className:"invalid-feedback d-block"},d))},Yi=(a(1522),function(e){var t=e.onChange,a=e.value,n=Object(Z.a)(e,["onChange","value"]),c=Object(o.e)((function(e){return e.warehouse.shipmentMethod.list.data})),r=Object(o.e)((function(e){return e.warehouse.shipmentMethod.list.loading})),s=Object(o.d)(),u=Object(b.a)(),v=Object(m.a)(u,1)[0],f=Object(l.useMemo)((function(){return c.map((function(e){return function(e){return{value:e.id,label:"".concat(e.name)}}(e)}))}),[c]);return i.a.createElement(Me,Object.assign({value:a,label:v("warehouse.shipment_method.title"),className:"select-shipment-method",placeholder:v("common.select_here"),options:f,onChange:function(e){t&&t(e.value)},loading:r,onFetchData:function(e){s(Object(d.b)(e))},typeSearch:"name"},n))}),Hi=function(e){e.value;var t=e.isDisabled,a=(e.customer_id,Object(Z.a)(e,["value","isDisabled","customer_id"])),n=Object(W.e)(a),c=Object(m.a)(n,3),l=c[0],o=c[1],r=c[2],s=Object(W.g)().setFieldTouched,u=o.error,d=o.touched;return i.a.createElement("div",{className:Object(k.a)(d&&u&&"is-invalid")},i.a.createElement(Yi,{value:l.value,onChange:function(e){r.setValue(e)},isDisabled:t,onClick:function(){s(l.name)}}),d&&u&&i.a.createElement("div",{className:"invalid-feedback d-block"},u))},Ui=(a(1523),function(e,t){var a=e.onSubmit,n=e.initialValues,c=void 0===n?{shipment_method_id:"",volume:1,weight:1,day_of_week:2,to_area_id:""}:n,l=Object(b.a)(),o=Object(m.a)(l,1)[0],r=X.d().shape({shipment_method_id:X.f().required(o("validation.message.required")),volume:X.c().min(1,o("validation.message.min",{min:1})).required(o("validation.message.required")),weight:X.c().min(1,o("validation.message.min",{min:1})).required(o("validation.message.required")),day_of_week:X.c().required(o("validation.message.required")),to_area_id:X.f().required(o("validation.message.required"))});return i.a.createElement(W.d,{initialValues:c,enableReinitialize:!0,validationSchema:r,onSubmit:a,innerRef:t},i.a.createElement(te,{className:"form-add-container-type"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-6 col-sm-12"},i.a.createElement(Hi,{name:"shipment_method_id"})),i.a.createElement("div",{className:"col-lg-6 col-sm-12"},i.a.createElement(Ai,{name:"day_of_week"})),i.a.createElement("div",{className:"col-lg-6 col-sm-12"},i.a.createElement(Di,{name:"to_area_id",label:o("warehouse.container_type.to_area")})),i.a.createElement("div",{className:"col-lg-6 col-sm-12"},i.a.createElement(W.b,{name:"volume",label:o("common.volume"),component:f.i,type:"number"})),i.a.createElement("div",{className:"col-lg-6 col-sm-12"},i.a.createElement(W.b,{name:"weight",label:o("common.weight"),component:f.i,type:"number"}))),i.a.createElement($,null)))}),Ki=i.a.forwardRef(Ui),zi=function(e,t){var a=e.show,c=e.onHide,o=e.onSuccess,s=e.editMode,u=void 0!==s&&s,d=e.id,v=Object(l.useState)(!1),f=Object(m.a)(v,2),h=f[0],p=f[1],E=Object(l.useState)(),g=Object(m.a)(E,2),j=g[0],O=g[1],w=Object(b.a)(),_=Object(m.a)(w,1)[0],y=Object(r.h)(),N=Object(l.useRef)();Object(l.useImperativeHandle)(t,(function(){return{setInitialData:function(e){O(e)}}}));var x=Object(l.useCallback)((function(){c?c():y.goBack()}),[y,c]),k=Object(l.useCallback)((function(){N.current.submitForm()}),[N]),C=Object(l.useCallback)((function(e,t){G.a.containerType.update(d,e).then((function(){n.b.success(_("warehouse.container_type.update.success")),o&&o(),x()})).catch((function(e){console.error(e),n.b.error(_("warehouse.container_type.update.failure")),J(e,t)})).finally((function(){p(!1)}))}),[d,x,o,_]),S=Object(l.useCallback)((function(e,t){G.a.containerType.create(e).then((function(){n.b.success(_("warehouse.container_type.create.success")),o&&o(),x()})).catch((function(e){console.error(e),n.b.error(_("warehouse.container_type.create.failure")),J(e,t)})).finally((function(){p(!1)}))}),[o,x,_]);return i.a.createElement(oe.a,{show:a,onHide:x,actionsLoading:h,title:_(u?"warehouse.container_type.update.title":"warehouse.container_type.create.title")},i.a.createElement(re.a.Body,null,i.a.createElement(Ki,{initialValues:j,onSubmit:function(e,t){p(!0),u?C(e,t):S(e,t)},ref:N})),i.a.createElement(re.a.Footer,null,i.a.createElement(de,{type:"secondary",onClick:x},_("common.cancel")),i.a.createElement(de,{type:"primary",onClick:k,loading:h},_("common.save"))))},Qi=i.a.forwardRef(zi),Gi=function(e){var t=Object(b.a)(),a=Object(m.a)(t,1)[0],n=Object(o.d)(),c=Object(r.h)(),s=Object(r.k)(),u=Object(l.useRef)();Object(l.useEffect)((function(){d()}),[]);var d=Object(l.useCallback)((function(e){n(Object(qn.b)(Object(E.a)({with:"shipmentMethod;toArea"},e)))}),[n]),v=Object(l.useCallback)((function(e,t){u.current.setInitialData(t),c.push("".concat(s.url,"/edit-container-type/").concat(e))}),[c,s.url]),h=Object(l.useCallback)((function(){c.push("".concat(s.url,"/create-container-type"))}),[c,s.url]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{need:["container-types.create"]},i.a.createElement(r.c,{path:"".concat(s.path,"/create-container-type")},(function(e){var t=e.match;return i.a.createElement(Qi,{show:null!==t,onSuccess:d})}))),i.a.createElement(V.a,{need:["container-types.update"]},i.a.createElement(r.c,{path:"".concat(s.path,"/edit-container-type/:id")},(function(e){var t,a=e.match;return i.a.createElement(Qi,{ref:u,id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.id,editMode:!0,show:null!==a,onSuccess:d})}))),i.a.createElement(f.c,{className:"container-type-management"},i.a.createElement(f.e,{title:a("warehouse.container_type.title")},i.a.createElement(V.a,{need:["container-types.create"]},i.a.createElement(f.f,null,i.a.createElement(de,{type:"primary",onClick:h},a("warehouse.container_type.create.title"))))),i.a.createElement(f.d,null,i.a.createElement(Vi,{onRefresh:d,onViewEdit:v}))))};a(1524);function Ji(e,t){var a=e.initialValues,n=void 0===a?{id:"",name:"",fee:""}:a,c=e.onSubmit,l=Object(b.a)(),o=Object(m.a)(l,1)[0],r=X.d().shape({id:X.f().required(o("validation.message.required")),name:X.f().required(o("validation.message.required")),fee:X.c().min(1,o("validation.message.min",{min:1})).required(o("validation.message.required"))});return i.a.createElement(W.d,{enableReinitialize:!0,initialValues:n,onSubmit:c,innerRef:t,validationSchema:r},i.a.createElement(te,{className:"form form-label-right form-add-shipment-method"},i.a.createElement("div",{className:"p-3"},i.a.createElement(W.b,{name:"id",component:f.i,label:o("warehouse.shipment_method.id"),placeholder:o("warehouse.shipment_method.id"),autoComplete:"off"})),i.a.createElement("div",{className:"p-3"},i.a.createElement(W.b,{name:"name",component:f.i,label:o("warehouse.shipment_method.name"),placeholder:o("warehouse.shipment_method.name"),autoComplete:"off"})),i.a.createElement("div",{className:"p-3"},i.a.createElement(W.b,{name:"fee",component:f.i,label:o("warehouse.shipment_method.fee"),placeholder:o("warehouse.shipment_method.fee"),autoComplete:"off",type:"number"})),i.a.createElement($,null)))}var Wi=i.a.forwardRef(Ji),Xi=function(e,t){var a=e.show,c=e.onHide,o=e.onSuccess,s=e.editMode,u=void 0!==s&&s,d=e.id,v=Object(l.useState)(),f=Object(m.a)(v,2),h=f[0],p=f[1],E=Object(l.useState)(),g=Object(m.a)(E,2),j=g[0],O=g[1],w=Object(b.a)(),_=Object(m.a)(w,1)[0],y=Object(r.h)(),N=Object(l.useRef)();Object(l.useImperativeHandle)(t,(function(){return{setInitialData:function(e){O(e)}}}));var x=function(){c?c():y.goBack()},k=function(e,t){p(!0),G.a.shipmentMethod.create(e).then((function(){n.b.success(_("warehouse.shipment_method.create.success")),o&&o(),x()})).catch((function(e){n.b.error(_("warehouse.shipment_method.create.failure")),J(e,t)})).finally((function(){p(!1)}))},C=function(e,t){p(!0),G.a.shipmentMethod.update(d,e).then((function(){n.b.success(_("warehouse.shipment_method.update.success")),o&&o(),x()})).catch((function(e){n.b.error(_("warehouse.shipment_method.update.failure")),J(e,t)})).finally((function(){p(!1)}))};return i.a.createElement(oe.a,{show:a,onHide:x,title:_(u?"warehouse.shipment_method.update.title":"warehouse.shipment_method.create.title"),actionsLoading:h},i.a.createElement(re.a.Body,null,i.a.createElement(Wi,{formItemClass:"col-lg-4 col-md-6 col-sm-12",ref:N,onSubmit:function(e,t){u?C(e,t):k(e,t)},initialValues:j})),i.a.createElement(re.a.Footer,null,i.a.createElement(de,{type:"secondary",loading:h,onClick:x},_("common.cancel")),i.a.createElement(de,{type:"primary",loading:h,onClick:function(){N.current.submitForm()}},_("common.save"))))},$i=i.a.forwardRef(Xi);a(1525);var Zi=function(e){var t=e.onRefresh,a=e.onViewEdit,c=Object(o.e)((function(e){return e.warehouse.shipmentMethod.list.data})),l=function(){var e=Object(b.a)(),t=Object(m.a)(e,1)[0];return[{id:"id",title:t("warehouse.shipment_method.id")},{id:"name",title:t("warehouse.shipment_method.name")},{id:"fee",title:t("warehouse.shipment_method.fee")}]}(),s=Object(b.a)(),u=Object(m.a)(s,1)[0],d=Object(r.h)(),v=Object(r.k)(),f=function(e){G.a.shipmentMethod.delete(e).then((function(){t&&t(),n.b.success(u("warehouse.shipment_method.delete.success"))})).catch((function(e){console.error(e),n.b.error(u("warehouse.shipment_method.delete.failure"))}))};return c.length?i.a.createElement("div",{className:"table-shipment-methods"},i.a.createElement(V.a,{need:["shipment-methods.delete"]},i.a.createElement(r.c,{path:"".concat(v.path,"/delete-shipment-method/:shipment_method_id")},(function(e){var t,a=e.match;return i.a.createElement(qe,{id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.shipment_method_id,show:null!=a,onConfirmed:f,title:u("warehouse.shipment_method.delete.title")})}))),i.a.createElement(Sa,{columns:l,rows:c,onDelete:function(e){d.push("".concat(v.url,"/delete-shipment-method/").concat(e))},onViewEdit:a,isPagination:!1,rowKey:"id",noSTT:!0,permissions:{update:"shipment-methods.update",delete:"shipment-methods.delete"}})):i.a.createElement(Re.a,{emptyText:u("warehouse.shipment_method.list.empty")})},eo=function(e){var t=Object(b.a)(),a=Object(m.a)(t,1)[0],n=Object(r.h)(),c=Object(r.k)(),s=Object(l.useRef)(),u=Object(o.d)();Object(l.useEffect)((function(){v()}),[]);var v=function(){u(Object(d.b)())};return i.a.createElement(i.a.Fragment,null,i.a.createElement(V.a,{need:["shipment-methods.create"]},i.a.createElement(r.c,{path:"".concat(c.path,"/create-shipment-method")},(function(e){var t=e.match;return i.a.createElement($i,{show:null!==t,onSuccess:v})}))),i.a.createElement(V.a,{need:["shipment-methods.update"]},i.a.createElement(r.c,{path:"".concat(c.path,"/edit-shipment-method/:shipment_method_id")},(function(e){var t,a=e.match;return i.a.createElement($i,{id:null===a||void 0===a||null===(t=a.params)||void 0===t?void 0:t.shipment_method_id,show:null!==a,onSuccess:v,editMode:!0,ref:s})}))),i.a.createElement(f.c,{className:"shipment-method-managements"},i.a.createElement(f.e,{title:a("warehouse.shipment_method.title")},i.a.createElement(V.a,{need:["shipment-methods.create"]},i.a.createElement(f.f,null,i.a.createElement("button",{className:"btn btn-primary",onClick:function(){n.push("".concat(c.url,"/create-shipment-method"))}},a("warehouse.shipment_method.create.title"))))),i.a.createElement(f.d,null,i.a.createElement(Zi,{onRefresh:v,onViewEdit:function(e,t){s.current.setInitialData(t),n.push("".concat(c.url,"/edit-shipment-method/").concat(e))}}))))},to=function(e){var t=Object(b.a)(),a=Object(m.a)(t,1)[0];return i.a.createElement("span",null,a("common.not_have_permission"))},ao=function(e){var t=Object(b.a)(),a=Object(m.a)(t,1)[0];return i.a.createElement(p,{title:a("MENU.WAREHOUSE.SETTINGS")},i.a.createElement("div",{className:"settings-page"},i.a.createElement(en,{labels:[a("warehouse.settings.common.title"),a("warehouse.location.title"),a("warehouse.pallet_type.title"),a("warehouse.area.title"),a("warehouse.shelve.title"),a("warehouse.container_type.title"),a("warehouse.shipment_method.title")]},i.a.createElement(Za,null,i.a.createElement(V.a,{need:["sfas"],fallback:i.a.createElement(to,null)},i.a.createElement(f.c,null,i.a.createElement(f.d,null,i.a.createElement(bi,null),i.a.createElement(vi,null))))),i.a.createElement(Za,null,i.a.createElement(V.a,{need:["locations.index"],fallback:i.a.createElement(to,null)},i.a.createElement(gi,null))),i.a.createElement(Za,null,i.a.createElement(V.a,{need:["pallet-types.index"],fallback:i.a.createElement(to,null)},i.a.createElement(Ni,null))),i.a.createElement(Za,null,i.a.createElement(V.a,{need:["areas"],fallback:i.a.createElement(to,null)},i.a.createElement(Ri,null))),i.a.createElement(Za,null,i.a.createElement(V.a,{need:["shelves"],fallback:i.a.createElement(to,null)},i.a.createElement(Ii,null))),i.a.createElement(Za,null,i.a.createElement(V.a,{need:["container-types.index"],fallback:i.a.createElement(to,null)},i.a.createElement(Gi,null))),i.a.createElement(Za,null,i.a.createElement(V.a,{need:["shipment-methods"],fallback:i.a.createElement(to,null)},i.a.createElement(eo,null))))))},no=function(e){var t=Object(r.h)();return i.a.createElement(L,{onViewEdit:function(e){t.push("/warehouse/inbound/step-3/".concat(e))},type:"storage"})},co=function(e){var t,a=e.show,n=e.onHide,c=e.onSuccess,s=Object(l.useState)(),u=Object(m.a)(s,2),d=u[0],v=u[1],f=Object(o.e)((function(e){return e.warehouse.area.list})),h=Object(r.h)(),p=Object(l.useRef)(),E=Object(b.a)(),g=Object(m.a)(E,1)[0],j=function(){n?n():h.goBack()};return i.a.createElement(oe.a,{show:a,onHide:j,title:g("warehouse.location.create.title"),actionsLoading:d},i.a.createElement(re.a.Body,null,i.a.createElement(Wt,{initialValues:{area_id:null===f||void 0===f||null===(t=f[0])||void 0===t?void 0:t.id,shelve_id:"",floor:1,row:1,column:1},onSubmit:function(e,t){v(!0),G.a.location.create(e).then((function(e){Object(Dt.b)(Pt("LOCATION",{locationId:e.id,floor:e.floor,row:e.row,column:e.column,quantity:2})),c&&c(e),j()})).catch((function(e){console.error(e),J(e,t)})).finally((function(){v(!1)}))},ref:p})),i.a.createElement(re.a.Footer,null,i.a.createElement(Vt.a,{variant:"secondary",onClick:j,className:"btn-large"},g("common.back")),i.a.createElement(Vt.a,{variant:"primary",onClick:function(){p.current.submitForm()},className:"btn-large"},g("common.save"))))};a(1526);function lo(e,t){var a=e.formItemClass,n=void 0===a?"col-lg-6 col-sm-12":a,c=e.initialValues,o=void 0===c?{pallet_id:"",location_id:""}:c,s=e.onSubmit,u=Object(b.a)(),d=Object(m.a)(u,1)[0],v=Object(r.k)(),h=Object(r.h)(),p=X.d().shape({pallet_id:X.f().required(d("validation.message.required")),location_id:X.f().required(d("validation.message.required"))}),E=Object(l.useMemo)((function(){return i.a.createElement("div",{className:"location-label"},i.a.createElement("span",null,d("warehouse.location.id")),i.a.createElement("span",{className:"svg-icon svg-icon-primary ml-3 cursor-pointer",onClick:function(){h.push("".concat(v.url,"/create-location"))}},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Code/Info-circle.svg")})))}),[]),g=function(e){t.current.setFieldValue("location_id",e.id)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.c,{path:"".concat(v.path,"/create-location")},(function(e){var t=e.match;return i.a.createElement(co,{show:null!==t,onSuccess:g})})),i.a.createElement(W.d,{enableReinitialize:!0,initialValues:o,onSubmit:s,innerRef:t,validationSchema:p},i.a.createElement(te,{className:"form form-label-right form-direct-storage"},i.a.createElement("div",{className:"form-group row"},i.a.createElement("div",{className:n},i.a.createElement("div",null,i.a.createElement(W.b,{name:"pallet_id",component:f.b,label:d("warehouse.pallet.id"),placeholder:d("warehouse.pallet.id"),autoComplete:"off",condition:Rt.b}))),i.a.createElement("div",{className:n},i.a.createElement("div",null,i.a.createElement(W.b,{name:"location_id",component:f.b,label:E,placeholder:d("warehouse.location.id"),autoComplete:"off",condition:Rt.a})))),i.a.createElement($,null))))}var io=i.a.forwardRef(lo),oo=(a(1527),function(e){var t=Object(l.useState)(!1),a=Object(m.a)(t,2),c=a[0],o=a[1],r=Object(b.a)(),s=Object(m.a)(r,1)[0],u=Object(l.useRef)(),d=Object(se.a)("pallets.update");return i.a.createElement(f.c,{className:"direct-storage position-relative"},i.a.createElement(f.d,null,c&&i.a.createElement(x.a,{local:!0}),i.a.createElement(io,{onSubmit:function(e,t){d?(o(!0),G.a.pallet.update(e.pallet_id,{location_id:e.location_id}).then((function(e){n.b.success(s("warehouse.storage_sfa.direct_storage.success")),t.resetForm()})).catch((function(e){n.b.error(s("warehouse.storage_sfa.direct_storage.failure")),J(e,t)})).finally((function(){o(!1)}))):n.b.error(s("warehouse.pallet.update.need_permission"))},ref:u})))}),ro=function(e){var t=Object(b.a)(),a=Object(m.a)(t,1)[0];return i.a.createElement(p,{title:a("warehouse.storage_goods")},i.a.createElement(en,{labels:[a("warehouse.storage_sfa.direct_storage.title"),a("warehouse.sfa.list")]},i.a.createElement(Za,null,i.a.createElement(V.a,{need:["pallets.update"]},i.a.createElement(oo,null))),i.a.createElement(Za,null,i.a.createElement(no,null))))},so=a(556),uo=function(e){var t=Object(o.e)((function(e){return e.warehouse.whModel.filter})),a=Object(o.d)(),n=Object(r.k)(),c=Object(r.i)(),s=Object(r.h)();Object(l.useEffect)((function(){if(c.search){var e=We.a.parse(c.search);e&&(a(so.d.changeFilter(e)),a(Object(so.c)()))}else a(Object(so.b)())}),[c]);var u=function(e){a(so.d.changeFilter(e))};return i.a.createElement(f.c,null,i.a.createElement(f.d,null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-4 col-sm-6"},i.a.createElement(hi,{value:t.area_id||"",onChange:function(e){return u({area_id:e})}})),i.a.createElement("div",{className:"col-lg-4 col-sm-6"},i.a.createElement(Ei,{value:t.id||"",onChange:function(e){return u({id:e})}})),i.a.createElement("div",{className:"col-lg-4 col-sm-6"},i.a.createElement(At,{value:t["locations.id"]||"",onChange:function(e){return u({"locations.id":e})}})),i.a.createElement("div",{className:"col-lg-4 col-sm-6"},i.a.createElement(Rc,{value:t["locations.pallets.id"]||"",onChange:function(e){return u({"locations.pallets.id":e})}})),i.a.createElement("div",{className:"col-lg-4 col-sm-6"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:""},"SKU"),i.a.createElement("input",{value:t["locations.pallets.pivotBoxes.box_id"]||"",className:"form-control",onChange:function(e){u({"locations.pallets.pivotBoxes.box_id":e.target.value})}})))),i.a.createElement("div",{className:"text-right"},i.a.createElement("button",{className:"btn btn-secondary",onClick:function(){a(so.d.resetFilter()),a(Object(so.b)()),s.replace("".concat(n.url))}},"B\u1ecf l\u1ecdc"),i.a.createElement("button",{className:"btn btn-primary ml-3",onClick:function(){a(Object(so.c)());var e=t;s.replace("".concat(n.url,"?").concat(We.a.stringify(e)))}},"L\u1ecdc"))))},mo={pallet:void 0,showPallet:!1,setShowPallet:function(){return null},setPallet:function(){return null}},bo=i.a.createContext(mo),vo=function(e){var t=e.children,a=Object(l.useState)(),n=Object(m.a)(a,2),c=n[0],o=n[1],r=Object(l.useState)(!1),s=Object(m.a)(r,2),u=s[0],d=s[1],b=Object(l.useMemo)((function(){return{pallet:c,showPallet:u,setShowPallet:d,setPallet:o}}),[c,u,o,d]);return i.a.createElement(bo.Provider,{value:b},t)},fo=function(){var e=Object(l.useContext)(bo),t=e.pallet,a=e.showPallet,n=e.setShowPallet,c=e.setPallet,i=Object(l.useCallback)((function(e){n(!a),e&&c(e)}),[c,a,n]);return{pallet:t,showPallet:a,togglePalletDetail:i}},ho=(a(1528),function(e){var t,a,n=e.pallet,c=fo().togglePalletDetail,o=Object(l.useState)(!1),s=Object(m.a)(o,2),u=s[0],d=s[1],b=Object(r.i)();Object(l.useEffect)((function(){if(b.search){var e=We.a.parse(b.search);e["locations.pallets.id"]===n.id&&d(!0),-1!==O.a.findIndex((null===n||void 0===n?void 0:n.pivot_boxes)||[],["box_id",e["locations.pallets.pivotBoxes.box_id"]])&&d(!0)}}),[b]);var v=Object(l.useMemo)((function(){return null===n||void 0===n?void 0:n.pivot_boxes.reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.current_quantity)||0}),0)}),[n]);return n&&(null===n||void 0===n||null===(t=n.pivot_boxes)||void 0===t?void 0:t.length)?i.a.createElement("div",{className:Object(k.a)("pallet-item-model",u&&"active"),onClick:function(){c(n)}},i.a.createElement("div",{className:"pallet-item-model__icon"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Shopping/Pallet-with-box.svg")})),i.a.createElement("div",{className:"pallet-item-model__id"},n.id),i.a.createElement("div",{className:"pallet-item-model_boxes-length"},v)):i.a.createElement("div",{className:Object(k.a)("pallet-item-model",!n&&"placeholder",n&&!(null===n||void 0===n||null===(a=n.pivot_boxes)||void 0===a?void 0:a.length)&&"empty-pallet",u&&"active")},i.a.createElement("div",{className:"pallet-item-model__icon"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Shopping/Pallet.svg")})),i.a.createElement("div",{className:"pallet-item-model__id"},null===n||void 0===n?void 0:n.id))}),po=i.a.memo(ho),Eo=(a(1529),function(e){var t,a=e.location,n=Object(l.useState)(),c=Object(m.a)(n,2),o=c[0],s=c[1],u=Object(l.useState)(!1),d=Object(m.a)(u,2),b=d[0],v=d[1],f=Object(l.useState)(!1),h=Object(m.a)(f,2),p=h[0],E=h[1],g=Object(r.i)();return Object(l.useEffect)((function(){g.search&&(We.a.parse(g.search)["locations.id"]===a.id&&E(!0))}),[g]),Object(l.useEffect)((function(){a&&(v(!0),G.a.location.fetchLocation(a.id,{with:"pallets.pivotBoxes"}).then((function(e){s(e)})).finally((function(){v(!1)})))}),[a]),i.a.createElement("div",{className:Object(k.a)("location-item position-relative",p&&"active")},b&&i.a.createElement(x.a,{local:!0}),(null===o||void 0===o||null===(t=o.pallets)||void 0===t?void 0:t.length)?o.pallets.map((function(e,t){return i.a.createElement(po,{pallet:e,key:"pallet-item-".concat(t)})})):i.a.createElement("div",{className:"empty-location"},null===o||void 0===o?void 0:o.id))}),go=(a(1530),function(e){var t=e.locations,a=Object(l.useMemo)((function(){return O.a.groupBy(t,"row")}),[t]),n=Object(l.useMemo)((function(){return O.a.maxBy(t,"row").row}),[t]),c=Object(l.useCallback)((function(e,t){var a=O.a.maxBy(e,"column").column;return i.a.createElement("div",{className:"grid-location-row",key:"grid-location-row-".concat(t)},O.a.range(1,a+1,1).map((function(t){var a=O.a.find(e,["column",t]);return a?i.a.createElement(Eo,{location:a,key:"grid-location-col-".concat(t)}):i.a.createElement("div",{className:"location-item empty-location-item",key:"grid-location-col-".concat(t)},"C.",t)})))}),[]);return i.a.createElement("div",{className:"location-grid"},i.a.createElement("div",{className:"grid-location-container"},O.a.range(1,n+1,1).map((function(e){return a[e]?c(a[e],e):i.a.createElement("div",{className:"grid-location-row empty-row",key:"empty-grid-location-".concat(e)},"R.",e)}))))}),jo=(a(1531),function(){var e,t=fo(),a=t.pallet,c=t.showPallet,o=t.togglePalletDetail,r=Object(l.useState)(),s=Object(m.a)(r,2),u=s[0],d=s[1],b=Object(l.useState)(!1),v=Object(m.a)(b,2),f=v[0],h=v[1];Object(l.useEffect)((function(){c||d(void 0)}),[c]);return i.a.createElement("div",{className:Object(k.a)("pallet-detail",c?"show":"hide")},i.a.createElement("div",{className:"pallet-detail-head d-flex align-items-center"},i.a.createElement("div",{className:"close-section btn btn-link",onClick:function(){o()}},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Navigation/Arrow-left.svg")})),i.a.createElement("div",{className:"pallet-id"},null===a||void 0===a?void 0:a.id)),i.a.createElement("div",{className:"pallet-content"},!!(null===a||void 0===a||null===(e=a.pivot_boxes)||void 0===e?void 0:e.length)&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"list-box-wrapper"},a.pivot_boxes.map((function(e,t){var a=e.box,c=e.current_quantity;return i.a.createElement("div",{className:Object(k.a)("box d-flex align-items-center justify-content-between",(null===u||void 0===u?void 0:u.id)===a.id&&"selected"),key:"box-item-".concat(t),onClick:function(){return function(e){h(!0),G.a.box.fetchBox(e.id,{with:"items;childs.items"}).then((function(e){d(e)})).catch((function(e){n.b.error("Get data box failure!")})).finally((function(){h(!1)}))}(a)}},i.a.createElement("div",{className:"box-id"},a.id," ",i.a.createElement("span",{className:"quantity-on-pallet"},c)),i.a.createElement("div",{className:"show-on-hover svg-icon svg-icon-primary"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Navigation/Arrow-right.svg")})))}))),i.a.createElement("div",{className:"box-content position-relative"},f&&i.a.createElement(x.a,{local:!0}),u&&i.a.createElement("div",{className:"d-flex h-100"},i.a.createElement("div",{className:"box-info"},i.a.createElement("div",null,i.a.createElement("div",{className:"icon-section"},i.a.createElement(q.a,{src:Object(C.g)("/media/svg/icons/Shopping/Box4.svg")}),i.a.createElement("div",{className:"bar-code"},i.a.createElement(ll.a,{value:(null===u||void 0===u?void 0:u.id)||"0",textPosition:"top",height:40}))),i.a.createElement("div",{className:"d-flex mt-3"},i.a.createElement("div",{className:"box-width"},"Chi\u1ec1u d\xe0i: ",Object(he.a)(u.width)),i.a.createElement("div",{className:"box-height"},"Chi\u1ec1u r\u1ed9ng:",Object(he.a)(u.height)),i.a.createElement("div",{className:"box-length"},"Chi\u1ec1u cao: ",Object(he.a)(u.length)),i.a.createElement("div",{className:"box-weight"},"Kh\u1ed1i l\u01b0\u1ee3ng: ",Object(he.a)(u.weight_per_box)),i.a.createElement("div",{className:"box-volume"},"Th\u1ec3 t\xedch: ",Object(he.a)(u.volume_per_box))))),i.a.createElement("div",{className:"box-items-wrapper"},i.a.createElement("div",{className:"box-items-title"},"S\u1ea3n ph\u1ea9m trong th\xf9ng"),i.a.createElement("div",{className:"box-items-list"},u.childs.map((function(e,t){return i.a.createElement("div",{className:"box-child",key:"box-child-".concat(t)},i.a.createElement("div",{className:"box-child-id"},"Th\xf9ng con: ",e.id," (SL: ",e.duplicate,")"),i.a.createElement("div",{className:"box-child-items"},e.items.map((function(t,a){return i.a.createElement("div",{className:"box-item",key:"box-child-item-".concat(a)},i.a.createElement("div",{className:"box-item__product-id"},t.product_id),i.a.createElement("div",{className:"box-item__quantity"},"S\u1ed1 l\u01b0\u1ee3ng: ",t.quantity," ",i.a.createElement("small",null,"x")," ",e.duplicate))}))))})),u.items.map((function(e,t){return i.a.createElement("div",{className:"box-item",key:"box-item-".concat(t)},i.a.createElement("div",{className:"box-item__product-id"},e.product_id),i.a.createElement("div",{className:"box-item__quantity"},"S\u1ed1 l\u01b0\u1ee3ng: ",e.quantity))})))))))))}),Oo=(a(1532),function(e){var t=e.shelve,a=e.areaName,n=Object(l.useState)(),c=Object(m.a)(n,2),o=c[0],r=c[1],s=Object(l.useState)(!1),u=Object(m.a)(s,2),d=u[0],b=u[1],v=fo().showPallet;Object(l.useEffect)((function(){t&&(b(!0),G.a.shelve.fetchShelve(t.id,{with:"locations"}).then((function(e){r(e)})).finally((function(){b(!1)})))}),[t]);var f=Object(l.useMemo)((function(){return O.a.groupBy((null===o||void 0===o?void 0:o.locations)||[],"floor")}),[o]);return i.a.createElement("div",{className:Object(k.a)("shelve-item-card position-relative",v&&"pallet-content")},i.a.createElement(jo,null),i.a.createElement("div",{className:"shelve-head position-relative"},i.a.createElement("div",{className:"shelve-name"},i.a.createElement("span",{className:"shelve-prefix"},"Shelve"),i.a.createElement("span",{className:"shelve-id"},t.id)),i.a.createElement("div",{className:"extends-data"},i.a.createElement("div",{className:"shelve-position"},"F",t.floor," . R",t.row," . C",t.column),i.a.createElement("div",{className:"area-name"},a))),i.a.createElement("div",{className:"position-relative shelve-content"},d&&i.a.createElement(x.a,{local:!0}),Object.entries(f).map((function(e,t){var a=Object(m.a)(e,2),n=a[0],c=a[1];return i.a.createElement("div",{key:"grid-location-".concat(t),className:"shelve-floor"},i.a.createElement("div",{className:"floor-name"},"F.",n),i.a.createElement(go,{locations:c}))})),!Object.keys(f).length&&i.a.createElement(Re.a,null)))}),wo=(a(1533),function(e){var t=Object(o.e)((function(e){return e.warehouse.whModel.shelves})),a=Object(o.e)((function(e){return e.warehouse.whModel.loading}));return i.a.createElement(p,{title:"M\xf4 h\xecnh nh\xe0 kho Tomoni"},i.a.createElement("div",{className:"warehouse-model-page overflow-hidden"},i.a.createElement(uo,null),i.a.createElement(f.c,{className:"area-list-section position-relative"},i.a.createElement(f.d,{className:"p-4"},a&&i.a.createElement(x.a,{local:!0}),t.map((function(e,t){return i.a.createElement("div",{className:"mt-3",key:"shelve-".concat(t)},i.a.createElement(vo,null,i.a.createElement(Oo,{shelve:e,areaName:e.areaName})))}))))))});function _o(){var e=Object(o.d)(),t=Object(o.e)((function(e){return e.auth.user})),a=Object(r.i)().pathname,m=t.role,b=null===m||void 0===m?void 0:m.includes(c.a.WAREHOUSE),v=null===m||void 0===m?void 0:m.includes(c.a.SALE),f=(null===m||void 0===m?void 0:m.includes(c.a.ADMIN))||(null===m||void 0===m?void 0:m.includes(c.a.ROOT)),h=b||f,p=v&&a.includes("/warehouse/classify-box");return Object(l.useEffect)((function(){e(Object(u.b)()),e(Object(d.b)())}),[]),h||p?i.a.createElement("div",null,i.a.createElement(n.a,{variant:"default",size:"large",position:{vertical:"top",horizontal:"right"}}),i.a.createElement(l.Suspense,{fallback:i.a.createElement(s.c,null)},i.a.createElement(r.e,null,i.a.createElement(r.b,{exact:!0,from:"/warehouse",to:"/warehouse/dashboard"}),i.a.createElement(s.a,{path:"/warehouse/dashboard",component:wt,need:["sfas"]}),i.a.createElement(s.a,{path:"/warehouse/storage-sfas",component:ro,need:["boxes.update","pallets.create","pallets.update"],permissionJoin:"and"}),i.a.createElement(s.a,{path:"/warehouse/check-sfas",component:Y,need:["boxes.update","boxes.create","box-items"],permissionJoin:"and"}),i.a.createElement(s.a,{path:"/warehouse/load-up-container",component:Ic,need:["in-container-pickers.index"],permissionJoin:"and"}),i.a.createElement(s.a,{path:"/warehouse/container",component:Gn,need:["containers.index"]}),i.a.createElement(s.a,{path:"/warehouse/model",component:wo,need:["sfas"]}),i.a.createElement(s.a,{path:"/warehouse/wh-plan",component:Cn,need:["sfas"]}),i.a.createElement(s.a,{path:"/warehouse/pack-box",component:Gc,need:["boxes.create","boxes.update"],permissionJoin:"and"}),i.a.createElement(s.a,{path:"/warehouse/classify-box",component:ze,need:"owning-boxes.index"}),i.a.createElement(s.a,{path:"/warehouse/inbound",component:di,need:["sfas"]}),i.a.createElement(s.a,{path:"/warehouse/lading-bills",component:Oc,need:["lading-bills.index"]}),i.a.createElement(s.a,{path:"/warehouse/settings",component:ao,need:["sfas"]}),i.a.createElement(s.a,{path:"/warehouse/down-container",component:ua,need:["out-container-pickers.index"]}),i.a.createElement(s.a,{path:"/warehouse/goods-delivery",component:sn,need:["delivery-partners.index","goods-deliveries.index"]}),i.a.createElement(s.a,{path:"/warehouse/outbound-picker",component:zc,need:["outbound-pickers.index"]}),i.a.createElement(s.a,{component:Jn.a})))):i.a.createElement(r.b,{to:"/dashboard"})}}}]);
//# sourceMappingURL=7.50128589.chunk.js.map
(this["webpackJsonptomoni-app"]=this["webpackJsonptomoni-app"]||[]).push([[12],{1360:function(e,t,a){},1361:function(e,t,a){},1362:function(e,t,a){},1612:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Ve}));var c=a(28),n=a(112),l=a(0),r=a.n(l),i=a(17),o=a(120),s=a(142),d=a(8),m=a(12),u=a(95),E=a(74),p=a(175),b=a(34),f=a(1232),O=a(1233),h=a(1234),v=a(1235),g=a(1236),N=a(1258),L=a(1237),R=a(1249),T=a(389),j=a(29),A=a.n(j),S=a(1178),y=Object(f.a)((function(e){return{root:{},pagination:{display:"flex",marginTop:e.spacing(2),marginBottom:e.spacing(2),justifyContent:"flex-end"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},title:{fontSize:"1.15rem",fontWeight:"500"},content:{fontSize:"1rem"},content_col_4:{textOverflow:"ellipsis",overflow:"hidden",fontSize:"1rem",WebkitBoxOrient:"vertical",WebkitLineClamp:1,display:"-webkit-box"}}}));function D(e){var t=e.columns,a=e.rows,c=e.page,n=e.lastpage,i=e.onPageChange,o=e.onViewEdit,s=e.isPagination,d=e.onSort,u=void 0===d?null:d,E=e.isIndex,p=y(),b=t.slice(1),f=r.a.useState("desc"),j=Object(m.a)(f,2),D=j[0],_=j[1],C=Object(l.useState)(""),I=Object(m.a)(C,2),M=I[0],w=I[1];return r.a.createElement("div",null,r.a.createElement("div",{style:{overflow:"auto"}},r.a.createElement(O.a,{style:{minWidth:a.length<=0?"":"1500px"}},r.a.createElement(h.a,null,r.a.createElement(v.a,null,E&&r.a.createElement(g.a,null,r.a.createElement("span",{className:p.title},r.a.createElement(S.a,{id:"GLOBAL.NO"}))),b.map((function(e,t){return r.a.createElement(g.a,{key:e.id},e.isSort?r.a.createElement(N.a,{active:M===e.id,direction:M===e.id?D:"desc",onClick:function(){return function(e){var t=M===e&&"asc"===D?"desc":"asc";_(t),w(e),u&&u(e,t)}(e.id)}},r.a.createElement("span",{className:p.title},e.title),M===e.id&&e.disablePadding?r.a.createElement("span",{className:p.visuallyHidden},"desc"===D?"sorted descending":"sorted ascending"):null):r.a.createElement("span",{className:p.title},e.title))})))),a.length>0&&r.a.createElement(L.a,null,a.map((function(e,a){return r.a.createElement(v.a,{hover:!0,key:a,style:{backgroundColor:a%2===1?"":"#e2e3ef"},onClick:function(){return a=e[t[0].id],void(o&&o(a));var a},className:"row-table"},E&&r.a.createElement(g.a,null,a+1),b.map((function(t,a){return r.a.createElement(g.a,{key:t.id,style:{width:t.width}},r.a.createElement("div",{className:4===a?p.content_col_4:p.content},function(e,t){return t.render?t.render(A.a.get(e,t.id),e):A.a.get(e,t.id)}(e,t)))})))}))))),a.length<=0&&r.a.createElement(T.a,null),s&&r.a.createElement(R.a,{className:p.pagination,count:n,page:c,shape:"rounded",onChange:function(e,t){i&&i(t)}}))}D.defaultProps={className:"",columns:[],rows:[],onPageChange:null,onDelete:null,onViewEdit:null,page:1,lastpage:1,isPagination:!0,isAction:!0,isDelete:!0,isViewEdit:!0,isIndex:!0,additionalActions:[]};var _=D,C=a(1261),I=a(392),M=a(409),w=a(54);var B=function(e){var t=e.onSearch,a=e.intl,c=Object(l.useRef)(null),n=Object(i.e)((function(e){return{statusList:e.order.status.list}}),i.c).statusList,o=[{value:"all",label:a.formatMessage({id:"GLOBAL.FILTER.ALL"})},{value:"id",label:a.formatMessage({id:"GLOBAL.FILTER.ORDER_ID"})},{value:"note",label:a.formatMessage({id:"GLOBAL.FILTER.NOTE"})},{value:"customer",label:a.formatMessage({id:"GLOBAL.FILTER.CUSTOMER"})},{value:"status",label:a.formatMessage({id:"GLOBAL.FILTER.STATUS"})},{value:"product",label:a.formatMessage({id:"GLOBAL.FILTER.JANCODE"})}],s=Object(l.useState)({type:"all",status:"",search:""}),u=Object(m.a)(s,2),E=u[0],p=u[1],b=n.map((function(e){return{value:e.id,label:e.name}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-lg-2 col-md-3"},r.a.createElement(w.a,{defaultValue:o[0],options:o,onChange:function(e){p(Object(d.a)(Object(d.a)({},E),{},{type:e.value,search:""})),"all"===e.value&&t({search:"director.type.id:auction"})}})),"status"===E.type?r.a.createElement("div",{className:"col-lg-10 col-md-9"},r.a.createElement(w.a,{options:b,onChange:function(e){"all"===e.value?t({search:"director.type.id:auction",searchFields:"director.status.name:like"}):t({search:"director.type.id:auction;director.status.id:".concat(e.value),searchFields:"director.type.id:=;director.status.id:="})},placeholder:a.formatMessage({id:"GLOBAL.SEARCH.PLACEHOLER_SELECT"})})):r.a.createElement("div",{className:"col-lg-10 col-md-9"},r.a.createElement("input",{type:"text",name:"search",value:E.search,className:"form-control",placeholder:a.formatMessage({id:"GLOBAL.SEARCH.PLACEHOLER_INPUT"}),onChange:function(e){var a=e.target.value;p(Object(d.a)(Object(d.a)({},E),{},{search:a})),c.current&&clearTimeout(c.current),c.current=setTimeout((function(){if(t&&a.length>0)switch(E.type){case"id":t({search:"director.type.id:auction;id:".concat(a),searchFields:"id:like;director.type.id:="});break;case"customer":t({search:"director.type.id:auction;customer_id:".concat(a),searchFields:"customer_id:=;director.type.id:="});break;case"note":t({search:"director.type.id:auction;note:".concat(a),searchFields:"note:like;director.type.id:="});break;case"product":t({search:"director.type.id:auction;items.product_id:".concat(a),searchFields:"items.product_id:=;director.type.id:="});break;default:t({search:"director.type.id:auction;".concat(a),searchFields:"director.type.id:="})}else t({search:"director.type.id:auction"})}),500)}}))))};var k=Object(p.c)(Object(i.b)(null,null)((function(e){var t=e.intl,a=Object(i.d)(),c=Object(o.h)(),n=Object(i.e)((function(e){return e.order.list})),s=n.orderList,p=n.pagination,f=n.isLoading,O=Object(l.useState)({page:1,search:"director.type.id:auction",searchJoin:"and",searchFields:"",orderBy:"updated_at",sortedBy:"desc"}),h=Object(m.a)(O,2),v=h[0],g=h[1],N=[{id:"id",title:t.formatMessage({id:"ORDER.AUCTION.TABLE_ID"})},{id:"order_id",title:t.formatMessage({id:"ORDER.AUCTION.TABLE_ID"})},{id:"customer",title:t.formatMessage({id:"common.customer"})},{id:"product",title:t.formatMessage({id:"ORDER.AUCTION.TABLE_PRODUCT"})},{id:"balance",title:t.formatMessage({id:"ORDER.AUCTION.TABLE_PRICE"})},{id:"status",title:t.formatMessage({id:"ORDER.AUCTION.TABLE_STATUS"})},{id:"note",title:t.formatMessage({id:"ORDER.AUCTION.TABLE_NOTE"}),width:"22%"},{id:"updated_at",title:t.formatMessage({id:"ORDER.AUCTION.TABLE_UPDATE_DATE"}),isSort:!0}],L={search:"directors.type_id:Auction"};Object(l.useEffect)((function(){a(Object(I.f)()),a(Object(M.b)(L))}),[]),Object(l.useEffect)((function(){a(Object(I.d)(v))}),[v]);var R=s.map((function(e){var t;return{id:e.id||"-",order_id:e.id||"-",customer:e.customer_id||"-",product:(null===(t=e.items)||void 0===t?void 0:t.product)||"-",balance:Object(E.a)(null===e||void 0===e?void 0:e.balance)||"-",status:e.status?e.status.name:"-",note:e.note||"-",updated_at:e.updated_at||"-"}}));return r.a.createElement(r.a.Fragment,null,f&&r.a.createElement(u.a,null),r.a.createElement(C.a,{title:t.formatMessage({id:"ORDER.AUCTION.TITLE"})}),r.a.createElement("div",{className:"px-8 pb-8"},r.a.createElement(b.c,null,r.a.createElement(b.d,null,r.a.createElement(B,{onSearch:function(e){var t=e.search,a=e.searchFields;g(Object(d.a)(Object(d.a)({},v),{},{page:1,search:t,searchFields:a,orderBy:"updated_at",sortedBy:"asc"}))},intl:t}),r.a.createElement(_,{columns:N,rows:R,page:v.page,lastpage:p.lastPage,onViewEdit:function(e){c.push("/ban-hang/don-dau-gia/".concat(e,"/chi-tiet"))},onPageChange:function(e){g(Object(d.a)(Object(d.a)({},v),{},{page:e}))},onSort:function(e,t){g(Object(d.a)(Object(d.a)({},v),{},{page:1,orderBy:e,sortedBy:t}))}})))))}))),U=a(412),P=a(1286),F=a(1287),G=a(1308),x=a(1289),H=a(1290),W=a(1291),V=a(1293),K=a(1294),J=a(1295),Y=a(413),q=a(397),z=a(396),Q=a(395),X=a(567);var $=Object(p.c)(Object(i.b)(null,null)((function(e){var t=e.history,a=e.intl,n=e.match.params.id,o=Object(i.d)(),s=Object(i.e)((function(e){var t=e.order,a=e.home;return{orderDetail:t.list.orderDetail,isLoadingDetail:t.list.isLoading,isActionLoadingDetail:t.list.isActionLoading,statusList:a.home.statusList,itemList:t.item.itemList}}),i.c),E=s.orderDetail,p=s.isLoadingDetail,b=s.isActionLoadingDetail,f=s.statusList,O=s.itemList,h={id:n,params:{with:"items.trackings;trackings;shipmentInfor",appends:"customer;shipmentMethod;transactions;logs"}},v={search:"owners.objectable_type:order;owners.objectable_id:".concat(n),searchFields:"owners.objectable_type:=;owners.objectable_id:=",searchJoin:"and"},g={search:"owningBoxes.objectable_type:order;owningBoxes.objectable_id:".concat(n),searchFields:"owningBoxes.objectable_type:=;owningBoxes.objectable_id:=",searchJoin:"and"},N={search:"logable_type:App\\\\Entities\\\\Order;logable_id:".concat(n),orderBy:"created_at",sortedBy:"desc"};Object(l.useEffect)((function(){o(Object(I.g)()),o(Object(Y.d)()),o(Object(I.e)(h)).then((function(e){if(e.type.includes("fulfilled")){var t={search:"user_id:".concat(e.payload.customer_id)};o(Object(q.b)(t))}})),o(Object(z.d)(v)),o(Object(Q.c)(g))}),[]);var L=Object(l.useState)({page:1,appends:"product.unit;product.package;supplier",with:"trackings",search:"order_id:".concat(n)}),R=Object(m.a)(L,2),T=R[0],j=R[1];Object(l.useEffect)((function(){o(Object(Y.c)(T))}),[T]);var A=Object(l.useState)(null),y=Object(m.a)(A,2),D=y[0],_=y[1],M=Object(l.useState)(null),w=Object(m.a)(M,2),B=w[0],k=w[1];Object(l.useEffect)((function(){o(Object(U.c)(N))}),[]);var $=Object(l.useState)(!1),Z=Object(m.a)($,2),ee=Z[0],te=Z[1],ae=Object(l.useState)(!1),ce=Object(m.a)(ae,2),ne=ce[0],le=ce[1],re=Object(l.useState)(null),ie=Object(m.a)(re,2),oe=ie[0],se=ie[1],de=Object(l.useState)(null),me=Object(m.a)(de,2),ue=me[0],Ee=me[1],pe=(ue||E.steps||[]).map((function(e){return f.find((function(t){return t.id===e}))})),be=p||b;return r.a.createElement(r.a.Fragment,null,be&&r.a.createElement(u.a,null),r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{title:a.formatMessage({id:"ORDER.AUCTION.DETAIL.TITLE"})},r.a.createElement(X.a,{className:"btn btn-light ml-2",onClick:function(){return t.push("/ban-hang/don-dau-gia")}},r.a.createElement("i",{className:"fa fa-arrow-left"}),r.a.createElement(S.a,{id:"GLOBAL.BUTTON.BACK"})),(null===pe||void 0===pe?void 0:pe.length)>0?pe.map((function(e,t){return r.a.createElement(X.a,{key:t,className:"btn btn-primary ml-2",onClick:function(){return function(e){var t={id:n,body:{status:e}};o(Object(I.h)(t)).then((function(e){var t,n;e.type.includes("fulfilled")?(c.b.success(a.formatMessage({id:"ORDER.UPDATE.STATUS.SUCCESS"})),se(null===(t=e.payload)||void 0===t?void 0:t.status),Ee(null===(n=e.payload)||void 0===n?void 0:n.steps),o(Object(U.c)(N))):c.b.error(a.formatMessage({id:"ORDER.UPDATE.STATUS.FAIL"}))}))}(null===e||void 0===e?void 0:e.id)}},null===e||void 0===e?void 0:e.name)})):null),r.a.createElement("div",{className:"px-8 pb-8"},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(F.a,{statusRes:oe,order:E,onUpdate:function(e){var t={id:n,body:{note:e}};o(Object(I.h)(t)).then((function(e){e.type.includes("fulfilled")?c.b.success(a.formatMessage({id:"ORDER.UPDATE.INFO.SUCCESS"})):c.b.error(a.formatMessage({id:"ORDER.UPDATE.INFO.FAIL"}))}))},intl:a}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(G.a,{onEdit:function(e){var t=O.findIndex((function(t){return t.id===e}));if(-1!==t){var a=O[t];le(a)}te(!0)},onPageChange:function(e){j(Object(d.a)(Object(d.a)({},T),{},{page:e}))},intl:a}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(V.a,{methodRes:B,shipment:E.shipment_method,onUpdate:function(e){var t={id:n,body:{shipment_method_id:e}};o(Object(I.h)(t)).then((function(e){e.type.includes("fulfilled")?(c.b.success(a.formatMessage({id:"ORDER.UPDATE.SHIPMENT_METHOD.SUCCESS"})),k(e.payload.shipment_method_id)):c.b.error(a.formatMessage({id:"ORDER.UPDATE.SHIPMENT_METHOD.FAIL"}))}))},intl:a})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(W.a,{shipmentInfoRes:D,shipment:E.shipment_infor,onUpdate:function(e){var t={id:n,body:{shipment_infor_id:e}};o(Object(I.h)(t)).then((function(e){e.type.includes("fulfilled")?(c.b.success(a.formatMessage({id:"ORDER.UPDATE.SHIPMENT_INFO.SUCCESS"})),_(e.payload.shipment_infor_id)):c.b.error(a.formatMessage({id:"ORDER.UPDATE.SHIPMENT_INFO.FAIL"}))}))},intl:a}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(P.a,{intl:a})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(x.a,{onView:function(e){t.push("/warehouse/lading-bills/".concat(e))},intl:a}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(K.a,{transactions:E.transactions||[],intl:a})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(H.a,{onLog:function(e){var t={content:e,logable_id:n,logable_type:"AppEntitiesOrder"};o(Object(U.a)(t)).then((function(e){e.type.includes("fulfilled")?(o(Object(U.c)(N)),c.b.success(a.formatMessage({id:"ORDER.UPDATE.LOG.SUCCESS"}))):c.b.error(a.formatMessage({id:"ORDER.UPDATE.LOG.FAIL"}))}))},intl:a})))))),r.a.createElement(J.a,{item:ne||{},open:ee,onHide:function(){return te(!1)},onUpdate:function(e){var t=e.price,n=e.quantity,l=e.box,r=e.property,i=e.note,s=e.tax_percent,d={id:ne.id,body:{price:t,quantity:n,note:i,properties:r,is_box:l,tax_percent:s}};te(!1),o(Object(Y.e)(d)).then((function(e){e.type.includes("fulfilled")?(c.b.success(a.formatMessage({id:"ORDER.UPDATE.ITEM.SUCCESS"})),o(Object(Y.c)(T)),o(Object(I.e)(h))):c.b.error(a.formatMessage({id:"ORDER.UPDATE.ITEM.FAIL"}))}))}}))})));var Z=function(e){var t=e.onSearch,a=e.intl,c=Object(l.useRef)(null),n=Object(i.e)((function(e){return{statusList:e.order.status.list}}),i.c).statusList,o=[{value:"all",label:a.formatMessage({id:"GLOBAL.FILTER.ALL"})},{value:"id",label:a.formatMessage({id:"GLOBAL.FILTER.ORDER_ID"})},{value:"note",label:a.formatMessage({id:"GLOBAL.FILTER.NOTE"})},{value:"customer",label:a.formatMessage({id:"GLOBAL.FILTER.CUSTOMER"})},{value:"status",label:a.formatMessage({id:"GLOBAL.FILTER.STATUS"})},{value:"product",label:a.formatMessage({id:"GLOBAL.FILTER.JANCODE"})}],s=Object(l.useState)({type:"all",status:"",search:""}),u=Object(m.a)(s,2),E=u[0],p=u[1],b=n.map((function(e){return{value:e.id,label:e.name}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-lg-2 col-md-2"},r.a.createElement(w.a,{defaultValue:o[0],options:o,onChange:function(e){p(Object(d.a)(Object(d.a)({},E),{},{type:e.value,search:""})),"all"===e.value&&t({search:"director.type.id:payment"})}})),"status"===E.type?r.a.createElement("div",{className:"col-lg-10 col-md-9"},r.a.createElement(w.a,{placeholder:a.formatMessage({id:"GLOBAL.SEARCH.PLACEHOLER_SELECT"}),options:b,onChange:function(e){"all"===e.value?t({search:"director.type.id:payment",searchFields:"director.status.name:like"}):t({search:"director.type.id:payment;director.status.id:".concat(e.value),searchFields:"director.type.id:=;director.status.id:="})}})):r.a.createElement("div",{className:"col-lg-10 col-md-9"},r.a.createElement("input",{type:"text",name:"search",value:E.search,className:"form-control",placeholder:a.formatMessage({id:"GLOBAL.SEARCH.PLACEHOLER_INPUT"}),onChange:function(e){var a=e.target.value;p(Object(d.a)(Object(d.a)({},E),{},{search:a})),c.current&&clearTimeout(c.current),c.current=setTimeout((function(){if(t&&a.length>0)switch(E.type){case"id":t({search:"director.type.id:payment;id:".concat(a),searchFields:"id:like;director.type.id:="});break;case"customer":t({search:"director.type.id:payment;customer_id:".concat(a),searchFields:"customer_id:=;director.type.id:="});break;case"note":t({search:"director.type.id:payment;note:".concat(a),searchFields:"note:like;director.type.id:="});break;case"product":t({search:"director.type.id:payment;items.product_id:".concat(a),searchFields:"items.product_id:=;director.type.id:="});break;default:t({search:"director.type.id:payment;".concat(a),searchFields:"director.type.id:="})}else t({search:"director.type.id:payment"})}),500)}}))))};var ee=Object(p.c)(Object(i.b)(null,null)((function(e){var t=e.intl,a=Object(i.d)(),c=Object(o.h)(),n=Object(i.e)((function(e){return e.order.list})),s=n.orderList,p=n.pagination,f=n.isLoading,O=Object(l.useState)({page:1,search:"director.type.id:payment",searchJoin:"and",searchFields:"",with:"items",orderBy:"updated_at",sortedBy:"desc"}),h=Object(m.a)(O,2),v=h[0],g=h[1],N=[{id:"id",title:t.formatMessage({id:"ORDER.PAYMENT.TABLE_ID"})},{id:"order_id",title:t.formatMessage({id:"ORDER.PAYMENT.TABLE_ID"})},{id:"customer",title:t.formatMessage({id:"ORDER.RETAIL.TABLE_CUSTOMER"}),isSort:!1},{id:"balance",title:t.formatMessage({id:"ORDER.PAYMENT.TABLE_PRICE"})},{id:"status",title:t.formatMessage({id:"ORDER.PAYMENT.TABLE_STATUS"})},{id:"note",title:t.formatMessage({id:"ORDER.PAYMENT.TABLE_NOTE"}),width:"22%"},{id:"updated_at",title:t.formatMessage({id:"ORDER.PAYMENT.TABLE_UPDATE_DATE"})}],L={search:"directors.type_id:Payment"};Object(l.useEffect)((function(){a(Object(I.f)()),a(Object(M.b)(L))}),[]),Object(l.useEffect)((function(){a(Object(I.d)(v))}),[v]);var R=s.map((function(e){var t;return{id:e.id||"-",order_id:e.id||"-",customer:e.customer_id||"-",balance:Object(E.a)(null===e||void 0===e?void 0:e.balance)||"-",status:(null===(t=e.status)||void 0===t?void 0:t.name)||"-",note:e.note||"-",updated_at:e.updated_at||"-"}}));return r.a.createElement(r.a.Fragment,null,f&&r.a.createElement(u.a,null),r.a.createElement(C.a,{title:t.formatMessage({id:"ORDER.PAYMENT.TITLE"})},r.a.createElement("button",{style:{minWidth:"100px"},type:"button",className:"btn btn-primary",onClick:function(){c.push("/ban-hang/don-thanh-toan-ho/tao-moi")}},r.a.createElement(S.a,{id:"GLOBAL.BUTTON.CREATE_ORDER"}))),r.a.createElement("div",{className:"px-8 pb-8"},r.a.createElement(b.c,null,r.a.createElement(b.d,null,r.a.createElement(Z,{onSearch:function(e){var t=e.search,a=e.searchFields;g(Object(d.a)(Object(d.a)({},v),{},{page:1,search:t,searchFields:a,orderBy:"updated_at",sortedBy:"asc"}))},intl:t}),r.a.createElement(_,{columns:N,rows:R,page:v.page,lastpage:p.lastPage,onViewEdit:function(e){c.push("/ban-hang/don-thanh-toan-ho/".concat(e,"/chi-tiet"))},onPageChange:function(e){g(Object(d.a)(Object(d.a)({},v),{},{page:e}))},onSort:function(e,t){g(Object(d.a)(Object(d.a)({},v),{},{page:1,orderBy:e,sortedBy:t}))}})))))}))),te=a(1353),ae=a(187),ce=a(1590),ne=a(1602),le=a(1238);a(1360);var re=Object(p.c)(Object(i.b)(null,null)((function(e){var t,a,n,s=e.intl,u=Object(o.h)(),E=Object(i.d)(),p=Object(i.e)((function(e){var t=e.order,a=e.authService;return{shipmentList:t.shipmentInfo.shipmentInfoList,customerList:a.user.userList}}),i.c),f=p.shipmentList,O=p.customerList,h=Object(l.useState)(null),v=Object(m.a)(h,2),g=v[0],N=v[1],L=Object(ce.a)({onDrop:function(e){return N(e)}}),R=L.acceptedFiles,T=L.getRootProps,j=L.getInputProps,A=R.map((function(e){return r.a.createElement("h4",{key:e.path,style:{marginLeft:"1rem"}},e.path)})),y=Object(l.useState)({typeSearchCustomer:"email",shipmentInfoSelected:null,customerSelected:null}),D=Object(m.a)(y,2),_=D[0],M=D[1],B=Object(l.useState)(""),k=Object(m.a)(B,2),U=k[0],P=k[1],F=Object(l.useRef)(null),G=null===O||void 0===O?void 0:O.map((function(e){return{value:e.id,label:e.email}})),x=Object(l.useState)(!0),H=Object(m.a)(x,2),W=H[0],V=H[1],K=_.shipmentInfoSelected?f.map((function(e){return{value:e.id,label:e.consignee,address:e.address,tel:e.tel}})):[];return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{title:s.formatMessage({id:"ORDER.PAYMENT.NEW.TITLE"})},r.a.createElement(X.a,{type:"button",onClick:function(){return u.goBack()},className:"btn btn-light"},r.a.createElement("i",{className:"fa fa-arrow-left"}),r.a.createElement(S.a,{id:"GLOBAL.BUTTON.BACK"})),"  ",r.a.createElement(X.a,{style:{width:"100px"},type:"submit",className:"btn btn-primary ml-2",onClick:function(){if(null!=g){var e,t,a,n=new FormData;n.set("file",g[0],null===(e=g[0])||void 0===e?void 0:e.name);var l={params:{type:"payment",shipment_infor_id:(null===(t=_.shipmentInfoSelected)||void 0===t?void 0:t.value)||(null===(a=K[0])||void 0===a?void 0:a.value),customer_id:null===U||void 0===U?void 0:U.value},data:n};E(Object(I.b)(l)).then((function(e){e.type.includes("fulfilled")?(c.b.success(s.formatMessage({id:"ORDER.CREATE.PAYMENT.SUCCESS"})),u.push("/ban-hang/don-thanh-toan-ho/".concat(e.payload.id,"/chi-tiet"))):c.b.error(s.formatMessage({id:"ORDER.CREATE.PAYMENT.FAIL"}))}))}else c.b.warning("Please input file")}},r.a.createElement(S.a,{id:"GLOBAL.BUTTON.CREATE_ORDER"}))),r.a.createElement("div",{className:"form-group row px-8"},r.a.createElement("div",{className:"col-xl-6"},r.a.createElement(ne.a,{className:"h-100"},r.a.createElement(b.d,null,r.a.createElement("div",{className:"form-group row  align-items-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h4",{className:" text-dark font-weight-bold mb-2"},r.a.createElement(S.a,{id:"ORDER.PAYMENT.FILE.INFO"}))),r.a.createElement("div",{className:"col-md-6"})),r.a.createElement(le.a,{className:"mb-9"}),r.a.createElement("div",{className:"rsg--preview-60"},r.a.createElement("section",{className:"container"},r.a.createElement("div",T({className:"dropzone"}),r.a.createElement("input",j()),null===g?r.a.createElement("div",null,r.a.createElement("div",{className:"img-drop-zone-loca"},r.a.createElement("img",{className:"img-drop-zone",src:"https://img.icons8.com/dusk/64/000000/add-file--v1.png",alt:"Tomoni Solution"})),r.a.createElement("p",null,s.formatMessage({id:"ORDER.PAYMENT.DROP_FILE"}))):r.a.createElement("div",null,r.a.createElement("div",{className:"img-drop-zone-loca"},r.a.createElement("img",{className:"img-drop-zone",src:"https://img.icons8.com/dusk/64/000000/check-file.png",alt:"Tomoni Solution"})),r.a.createElement("p",null,s.formatMessage({id:"ORDER.PAYMENT.UPDATE.FILE.SUCCESS"})))),r.a.createElement("aside",null,r.a.createElement("div",{className:"row"},r.a.createElement("h4",null,"Files: ")," ",A))))))),r.a.createElement("div",{className:"col-xl-6"},r.a.createElement(ne.a,{className:"h-100"},r.a.createElement(b.d,null,r.a.createElement("div",{className:"form-group row  align-items-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h4",{className:" text-dark font-weight-bold mb-2"},r.a.createElement(S.a,{id:"ORDER.CUSTOMER_INFO"}))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(w.a,{placeholder:s.formatMessage({id:"GLOBAL.SEARCH.PLACEHOLER_INPUT"}),options:G,onInputChange:function(e){var t={search:e,searchFields:"email:like"};F.current&&clearTimeout(F.current),F.current=setTimeout((function(){(null===e||void 0===e?void 0:e.length)>0&&E(Object(ae.f)(t))}),500)},onChange:function(e){P(e),M(Object(d.a)(Object(d.a)({},_),{},{customerSelected:e}));var t={search:"user_id:".concat(e.value)};E(Object(q.b)(t)).then((function(e){if(e.type.includes("fulfilled")){var t=e.payload.data;if(e.payload.data.length>0){var a,n,l,r,i={value:null===(a=t[0])||void 0===a?void 0:a.id,label:null===(n=t[0])||void 0===n?void 0:n.consignee,address:null===(l=t[0])||void 0===l?void 0:l.address,tel:null===(r=t[0])||void 0===r?void 0:r.tel};M(Object(d.a)(Object(d.a)({},_),{},{shipmentInfoSelected:i}))}else M(Object(d.a)(Object(d.a)({},_),{},{shipmentInfoSelected:null}));c.b.success("".concat(t.length," ").concat(s.formatMessage({id:"ORDER.CONSIGNEE_INFO"})))}else c.b.success(s.formatMessage({id:"ORDER.CONSIGNEE_INFO_NO_DATA"}));V(!1)}))}}))),r.a.createElement(le.a,{className:"mb-9"}),r.a.createElement("div",{className:"form-group row  align-items-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h4",{className:" text-dark font-weight-bold mb-2"},r.a.createElement(S.a,{id:"ORDER.CONSIGNEE_INFO"}))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(w.a,{placeholder:s.formatMessage({id:"GLOBAL.PLACEHOLER.SELECT"}),value:_.shipmentInfoSelected,options:K,onChange:function(e){M(Object(d.a)(Object(d.a)({},_),{},{shipmentInfoSelected:e}))},isDisabled:W}))),r.a.createElement(le.a,{className:"mb-9"}),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.CONSIGNEE"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"form-control bg-light"},(null===(t=_.shipmentInfoSelected)||void 0===t?void 0:t.label)||""))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.ADDRESS"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"form-control bg-light"},(null===(a=_.shipmentInfoSelected)||void 0===a?void 0:a.address)||""))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.TEL"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"form-control bg-light"},(null===(n=_.shipmentInfoSelected)||void 0===n?void 0:n.tel)||""))))))))})));var ie=function(e){var t=e.onSearch,a=e.intl,c=Object(l.useRef)(null),n=Object(i.e)((function(e){return{statusList:e.order.status.list}}),i.c).statusList,o=[{value:"all",label:a.formatMessage({id:"GLOBAL.FILTER.ALL"})},{value:"id",label:a.formatMessage({id:"GLOBAL.FILTER.ORDER_ID"})},{value:"note",label:a.formatMessage({id:"GLOBAL.FILTER.NOTE"})},{value:"customer",label:a.formatMessage({id:"GLOBAL.FILTER.CUSTOMER"})},{value:"status",label:a.formatMessage({id:"GLOBAL.FILTER.STATUS"})},{value:"product",label:a.formatMessage({id:"GLOBAL.FILTER.JANCODE"})}],s=Object(l.useState)({type:"all",status:"",search:""}),u=Object(m.a)(s,2),E=u[0],p=u[1],b=n.map((function(e){return{value:e.id,label:e.name}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-lg-2 col-md-3"},r.a.createElement(w.a,{defaultValue:o[0],options:o,onChange:function(e){p(Object(d.a)(Object(d.a)({},E),{},{type:e.value,search:""})),"all"===e.value&&t({search:"director.type.id:retail"})}})),"status"===E.type?r.a.createElement("div",{className:"col-lg-10 col-md-9"},r.a.createElement(w.a,{placeholder:a.formatMessage({id:"GLOBAL.SEARCH.PLACEHOLER_SELECT"}),options:b,onChange:function(e){"all"===e.value?t({search:"director.type.id:retail",searchFields:"director.status.name:like"}):t({search:"director.type.id:retail;director.status.id:".concat(e.value),searchFields:"director.type.id:=;director.status.id:="})}})):r.a.createElement("div",{className:"col-lg-10 col-md-9"},r.a.createElement("input",{type:"text",name:"search",value:E.search,className:"form-control",placeholder:a.formatMessage({id:"GLOBAL.SEARCH.PLACEHOLER_INPUT"}),onChange:function(e){var a=e.target.value;p(Object(d.a)(Object(d.a)({},E),{},{search:a})),c.current&&clearTimeout(c.current),c.current=setTimeout((function(){if(t&&a.length>0)switch(E.type){case"id":t({search:"director.type.id:retail;id:".concat(a),searchFields:"id:like;director.type.id:="});break;case"customer":t({search:"director.type.id:retail;customer_id:".concat(a),searchFields:"customer_id:=;director.type.id:="});break;case"note":t({search:"director.type.id:retail;note:".concat(a),searchFields:"note:like;director.type.id:="});break;case"product":t({search:"director.type.id:retail;items.product_id:".concat(a),searchFields:"items.product_id:=;director.type.id:="});break;default:t({search:"director.type.id:retail;".concat(a),searchFields:"director.type.id:="})}else t({search:"director.type.id:retail"})}),500)}}))))};var oe=Object(p.c)(Object(i.b)(null,null)((function(e){var t=e.intl,a=Object(i.d)(),c=Object(o.h)(),n=Object(i.e)((function(e){return e.order.list})),s=n.orderList,p=n.pagination,f=n.isLoading,O=Object(l.useState)({page:1,search:"director.type.id:retail",searchJoin:"and",searchFields:"",orderBy:"updated_at",sortedBy:"desc"}),h=Object(m.a)(O,2),v=h[0],g=h[1],N=[{id:"id",title:t.formatMessage({id:"ORDER.RETAIL.TABLE_ID"}),isSort:!1},{id:"order_id",title:t.formatMessage({id:"ORDER.RETAIL.TABLE_ID"}),isSort:!1},{id:"customer",title:t.formatMessage({id:"ORDER.RETAIL.TABLE_CUSTOMER"}),isSort:!1},{id:"balance",title:t.formatMessage({id:"ORDER.RETAIL.TABLE_PRICE"}),isSort:!1},{id:"status",title:t.formatMessage({id:"ORDER.RETAIL.TABLE_STATUS"}),isSort:!1},{id:"note",title:t.formatMessage({id:"ORDER.RETAIL.TABLE_NOTE"}),isSort:!1,width:"22%"},{id:"updated_at",title:t.formatMessage({id:"ORDER.RETAIL.TABLE_UPDATE_DATE"}),isSort:!0}],L={search:"directors.type_id:Retail"};Object(l.useEffect)((function(){a(Object(I.f)()),a(Object(M.b)(L))}),[]),Object(l.useEffect)((function(){a(Object(I.d)(v))}),[v]);var R=s.map((function(e){var t;return{id:e.id||"-",order_id:e.id||"-",customer:e.customer_id||"-",balance:Object(E.a)(null===e||void 0===e?void 0:e.balance)||0,status:(null===(t=e.status)||void 0===t?void 0:t.name)||"-",note:e.note||"-",updated_at:e.updated_at||"-"}}));return r.a.createElement(r.a.Fragment,null,f&&r.a.createElement(u.a,null),r.a.createElement(C.a,{title:t.formatMessage({id:"ORDER.RETAIL.TITLE"})}),r.a.createElement("div",{className:"px-8 pb-8"},r.a.createElement(b.c,null,r.a.createElement(b.d,null,r.a.createElement(ie,{onSearch:function(e){var t=e.search,a=e.searchFields;g(Object(d.a)(Object(d.a)({},v),{},{page:1,search:t,searchFields:a,orderBy:"updated_at",sortedBy:"asc"}))},intl:t}),r.a.createElement(_,{columns:N,rows:R,page:v.page,lastpage:p.lastPage,onViewEdit:function(e){c.push("/ban-hang/don-le/".concat(e,"/chi-tiet"))},onPageChange:function(e){g(Object(d.a)(Object(d.a)({},v),{},{page:e}))},onSort:function(e,t){g(Object(d.a)(Object(d.a)({},v),{},{page:1,orderBy:e,sortedBy:t}))}})))))})));var se=Object(p.c)(Object(i.b)(null,null)((function(e){var t=e.history,a=e.intl,n=e.match.params.id,o=Object(i.d)(),s=Object(l.useState)({page:1,appends:"product.unit;product.package;supplier",with:"trackings",search:"order_id:".concat(n)}),E=Object(m.a)(s,2),p=E[0],b=E[1],f=Object(i.e)((function(e){var t=e.order,a=e.home;return{orderDetail:t.list.orderDetail,isLoadingDetail:t.list.isLoading,isActionLoadingDetail:t.list.isActionLoading,statusList:a.home.statusList,itemList:t.item.itemList}}),i.c),O=f.orderDetail,h=f.isLoadingDetail,v=f.isActionLoadingDetail,g=f.statusList,N=f.itemList,L={id:n,params:{with:"items.trackings;trackings;shipmentInfor",appends:"customer;shipmentMethod;transactions"}},R={search:"owners.objectable_type:order;owners.objectable_id:".concat(n),searchFields:"owners.objectable_type:=;owners.objectable_id:=",searchJoin:"and"},T={search:"owningBoxes.objectable_type:order;owningBoxes.objectable_id:".concat(n),searchFields:"owningBoxes.objectable_type:=;owningBoxes.objectable_id:=",searchJoin:"and"},j={search:"logable_type:App\\\\Entities\\\\Order;logable_id:".concat(n),orderBy:"created_at",sortedBy:"desc"};Object(l.useEffect)((function(){o(Object(I.g)()),o(Object(Y.d)()),o(Object(I.e)(L)).then((function(e){if(e.type.includes("fulfilled")){var t,a={search:"user_id:".concat(null===(t=e.payload)||void 0===t?void 0:t.customer_id)};o(Object(q.b)(a))}})),o(Object(z.d)(R)),o(Object(Q.c)(T))}),[]),Object(l.useEffect)((function(){o(Object(Y.c)(p))}),[p]);var A=Object(l.useState)(null),y=Object(m.a)(A,2),D=y[0],_=y[1],M=Object(l.useState)(null),w=Object(m.a)(M,2),B=w[0],k=w[1];Object(l.useEffect)((function(){o(Object(U.c)(j))}),[]);var $=Object(l.useState)(!1),Z=Object(m.a)($,2),ee=Z[0],te=Z[1],ae=Object(l.useState)(!1),ce=Object(m.a)(ae,2),ne=ce[0],le=ce[1],re=Object(l.useState)(null),ie=Object(m.a)(re,2),oe=ie[0],se=ie[1],de=Object(l.useState)(null),me=Object(m.a)(de,2),ue=me[0],Ee=me[1],pe=(ue||O.steps||[]).map((function(e){return g.find((function(t){return t.id===e}))})),be=h||v;return r.a.createElement(r.a.Fragment,null,be&&r.a.createElement(u.a,null),r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{title:a.formatMessage({id:"ORDER.RETAIL.DETAIL.TITLE"})},r.a.createElement(X.a,{className:"btn btn-light ml-2",onClick:function(){return t.push("/ban-hang/don-le")}},r.a.createElement("i",{className:"fa fa-arrow-left"}),r.a.createElement(S.a,{id:"GLOBAL.BUTTON.BACK"})),(null===pe||void 0===pe?void 0:pe.length)>0?null===pe||void 0===pe?void 0:pe.map((function(e,t){return r.a.createElement(X.a,{key:t,className:"btn btn-primary ml-2",onClick:function(){return function(e){var t={id:n,body:{status:e}};o(Object(I.h)(t)).then((function(e){var t,n;e.type.includes("fulfilled")?(c.b.success(a.formatMessage({id:"ORDER.UPDATE.STATUS.SUCCESS"})),se(null===(t=e.payload)||void 0===t?void 0:t.status),Ee(null===(n=e.payload)||void 0===n?void 0:n.steps),o(Object(U.c)(j))):c.b.error(a.formatMessage({id:"ORDER.UPDATE.STATUS.FAIL"}))}))}(null===e||void 0===e?void 0:e.id)}},null===e||void 0===e?void 0:e.name)})):null),r.a.createElement("div",{className:"px-8 pb-8"},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(F.a,{statusRes:oe,order:O,onUpdate:function(e){var t={id:n,body:{note:e}};o(Object(I.h)(t)).then((function(e){e.type.includes("fulfilled")?c.b.success(a.formatMessage({id:"ORDER.UPDATE.INFO.SUCCESS"})):c.b.error(a.formatMessage({id:"ORDER.UPDATE.INFO.FAIL"}))}))},intl:a}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement(G.a,{onEdit:function(e){var t=N.findIndex((function(t){return t.id===e}));if(-1!==t){var a=N[t];le(a)}te(!0)},onPageChange:function(e){b(Object(d.a)(Object(d.a)({},p),{},{page:e}))},intl:a}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-lg-6"},r.a.createElement(V.a,{methodRes:B,shipment:O.shipment_method,onUpdate:function(e){var t={id:n,body:{shipment_method_id:e}};o(Object(I.h)(t)).then((function(e){e.type.includes("fulfilled")?(c.b.success(a.formatMessage({id:"ORDER.UPDATE.SHIPMENT_METHOD.SUCCESS"})),k(e.payload.shipment_method_id)):c.b.error(a.formatMessage({id:"ORDER.UPDATE.SHIPMENT_METHOD.FAIL"}))}))},intl:a})),r.a.createElement("div",{className:"col-lg-6"},r.a.createElement(W.a,{shipmentInfoRes:D,shipment:O.shipment_infor,onUpdate:function(e){var t={id:n,body:{shipment_infor_id:e}};o(Object(I.h)(t)).then((function(e){e.type.includes("fulfilled")?(c.b.success(a.formatMessage({id:"ORDER.UPDATE.SHIPMENT_INFO.SUCCESS"})),_(e.payload.shipment_infor_id)):c.b.error(a.formatMessage({id:"ORDER.UPDATE.SHIPMENT_INFO.FAIL"}))}))},intl:a}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-lg-6"},r.a.createElement(P.a,{intl:a})),r.a.createElement("div",{className:"col-lg-6"},r.a.createElement(x.a,{onView:function(e){t.push("/warehouse/lading-bills/".concat(e))},intl:a}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-lg-6"},r.a.createElement(K.a,{transactions:O.transactions||[],intl:a})),r.a.createElement("div",{className:"col-lg-6"},r.a.createElement(H.a,{onLog:function(e){var t={content:e,logable_id:n,logable_type:"AppEntitiesOrder"};o(Object(U.a)(t)).then((function(e){e.type.includes("fulfilled")?(c.b.success(a.formatMessage({id:"ORDER.UPDATE.LOG.SUCCESS"})),o(Object(U.c)(j))):c.b.error(a.formatMessage({id:"ORDER.UPDATE.LOG.FAIL"}))}))},intl:a})))))),r.a.createElement(J.a,{item:ne||{},open:ee,onHide:function(){return te(!1)},onUpdate:function(e){var t=e.price,n=e.quantity,l=e.box,r=e.property,i=e.note,s=e.tax_percent,d=e.discount_tax_per_tax_percent,m={id:ne.id,body:{price:t,quantity:n,note:i,properties:r,is_box:l,tax_percent:s,discount_tax_per_tax_percent:d}};te(!1),o(Object(Y.e)(m)).then((function(e){e.type.includes("fulfilled")?(c.b.success(a.formatMessage({id:"ORDER.UPDATE.ITEM.SUCCESS"})),o(Object(Y.c)(p)),o(Object(I.e)(L))):c.b.error(a.formatMessage({id:"ORDER.UPDATE.ITEM.FAIL"}))}))}}))})));var de=function(e){var t=e.onSearch,a=e.intl,c=Object(l.useRef)(null),n=Object(i.e)((function(e){return{statusList:e.order.status.list}}),i.c).statusList,o=[{value:"all",label:a.formatMessage({id:"GLOBAL.FILTER.ALL"})},{value:"id",label:a.formatMessage({id:"GLOBAL.FILTER.ORDER_ID"})},{value:"note",label:a.formatMessage({id:"GLOBAL.FILTER.NOTE"})},{value:"customer",label:a.formatMessage({id:"GLOBAL.FILTER.CUSTOMER"})},{value:"status",label:a.formatMessage({id:"GLOBAL.FILTER.STATUS"})},{value:"tracking",label:a.formatMessage({id:"GLOBAL.FILTER.TRACKING"})}],s=Object(l.useState)({type:"all",status:"",search:""}),u=Object(m.a)(s,2),E=u[0],p=u[1],b=n.map((function(e){return{value:e.id,label:e.name}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-lg-2 col-md-3"},r.a.createElement(w.a,{defaultValue:o[0],options:o,onChange:function(e){p(Object(d.a)(Object(d.a)({},E),{},{type:e.value,search:""})),"all"===e.value&&t({search:"director.type.id:shipment"})}})),"status"===E.type?r.a.createElement("div",{className:"col-lg-10 col-md-9"},r.a.createElement(w.a,{placeholder:a.formatMessage({id:"GLOBAL.SEARCH.PLACEHOLER_SELECT"}),options:b,onChange:function(e){"all"===e.value?t({search:"director.type.id:shipment",searchFields:"director.status.name:like"}):t({search:"director.type.id:shipment;director.status.id:".concat(e.value),searchFields:"director.type.id:=;director.status.id:="})}})):r.a.createElement("div",{className:"col-lg-10 col-md-9"},r.a.createElement("input",{type:"text",name:"search",value:E.search,className:"form-control",placeholder:a.formatMessage({id:"GLOBAL.SEARCH.PLACEHOLER_INPUT"}),onChange:function(e){var a=e.target.value;p(Object(d.a)(Object(d.a)({},E),{},{search:a})),c.current&&clearTimeout(c.current),c.current=setTimeout((function(){if(t&&a.length>0)switch(E.type){case"id":t({search:"director.type.id:shipment;id:".concat(a),searchFields:"id:=;director.type.id:="});break;case"customer":t({search:"director.type.id:shipment;customer_id:".concat(a),searchFields:"customer_id:=;director.type.id:="});break;case"note":t({search:"director.type.id:shipment;note:".concat(a),searchFields:"note:like;director.type.id:="});break;case"tracking":t({search:"director.type.id:shipment;trackings.code:".concat(a),searchFields:"items.product_id:=;trackings.code:like"});break;default:t({search:"director.type.id:shipment;".concat(a),searchFields:"director.type.id:="})}else t({search:"director.type.id:shipment"})}),500)}}))))};var me=Object(p.c)(Object(i.b)(null,null)((function(e){var t=e.intl,a=Object(i.d)(),c=Object(o.h)(),n=Object(i.e)((function(e){return e.order.list})),s=n.orderList,E=n.pagination,p=n.isLoading,f=Object(l.useState)({page:1,search:"director.type.id:shipment",searchJoin:"and",searchFields:"",orderBy:"updated_at",sortedBy:"desc",with:"trackings"}),O=Object(m.a)(f,2),h=O[0],v=O[1],g=[{id:"id",title:t.formatMessage({id:"ORDER.SHIPMENT.TABLE_ID"})},{id:"order_id",title:t.formatMessage({id:"ORDER.SHIPMENT.TABLE_ID"})},{id:"customer",title:t.formatMessage({id:"ORDER.RETAIL.TABLE_CUSTOMER"}),isSort:!1},{id:"status",title:t.formatMessage({id:"ORDER.SHIPMENT.TABLE_STATUS"}),isSort:!1},{id:"tracking",title:t.formatMessage({id:"ORDER.SHIPMENT.TRACKING"}),isSort:!1,width:"28%"},{id:"note",title:t.formatMessage({id:"ORDER.SHIPMENT.TABLE_NOTE"}),isSort:!1,width:"22%"},{id:"updated_at",title:t.formatMessage({id:"ORDER.SHIPMENT.TABLE_UPDATE_DATE"}),isSort:!0}],N={search:"directors.type_id:Shipment"};Object(l.useEffect)((function(){a(Object(I.f)()),a(Object(M.b)(N))}),[]),Object(l.useEffect)((function(){a(Object(I.d)(h))}),[h]);var L=s.map((function(e){var t,a;return{id:e.id||"-",order_id:e.id||"-",customer:e.customer_id||"-",status:(null===(t=e.status)||void 0===t?void 0:t.name)||"-",note:e.note||"-",tracking:e.trackings?r.a.createElement("div",null,null===(a=e.trackings)||void 0===a?void 0:a.map((function(e){return r.a.createElement("span",{key:e.id,className:"label font-weight-bold label-lg label-inline m-1 ".concat(e.checked?"label-light-success":"label-light-danger")},e.code)}))):"-",updated_at:e.updated_at||"-"}}));return r.a.createElement(r.a.Fragment,null,p&&r.a.createElement(u.a,null),r.a.createElement(C.a,{title:t.formatMessage({id:"ORDER.SHIPMENT.TITLE"})},r.a.createElement("button",{style:{minWidth:"100px"},type:"button",className:"btn btn-primary",onClick:function(){c.push("/ban-hang/don-van-chuyen-ho/tao-moi")}},r.a.createElement(S.a,{id:"GLOBAL.BUTTON.CREATE_ORDER"}))),r.a.createElement("div",{className:"px-8 pb-8"},r.a.createElement(b.c,null,r.a.createElement(b.d,null,r.a.createElement(de,{onSearch:function(e){var t=e.search,a=e.searchFields;v(Object(d.a)(Object(d.a)({},h),{},{page:1,search:t,searchFields:a,orderBy:"updated_at",sortedBy:"asc"}))},intl:t}),r.a.createElement(_,{columns:g,rows:L,page:h.page,lastpage:E.lastPage,onViewEdit:function(e){c.push("/ban-hang/don-van-chuyen-ho/".concat(e,"/chi-tiet"))},onPageChange:function(e){v(Object(d.a)(Object(d.a)({},h),{},{page:e}))},onSort:function(e,t){v(Object(d.a)(Object(d.a)({},h),{},{page:1,orderBy:e,sortedBy:t}))}})))))}))),ue=a(37),Ee=a(401);a(393);var pe=function(e){var t=e.intl,a=Object(i.e)((function(e){return{boxList:e.warehouse.box.list.data}}),i.c).boxList;return r.a.createElement(b.c,{className:"h-100"},r.a.createElement(b.e,{title:t.formatMessage({id:"ORDER.BOX"})}),(null===a||void 0===a?void 0:a.length)>0?r.a.createElement("div",{className:"pb-4"},r.a.createElement("div",{className:"box-card__header py-5"},r.a.createElement("span",{className:"col-4"},r.a.createElement(S.a,{id:"ORDER.SKU"})),r.a.createElement("span",{className:"col-4"},r.a.createElement(S.a,{id:"ORDER.WEIGHT"})),r.a.createElement("span",{className:"col-4"},r.a.createElement(S.a,{id:"ORDER.VOLUME"}))),r.a.createElement("div",{className:"order-card"},null===a||void 0===a?void 0:a.map((function(e,a){return r.a.createElement("div",{key:a,className:"box-card__item py-5",style:{backgroundColor:a%2!==1?"#e2e3ef":""}},r.a.createElement("div",{className:"col-4 order-title"},(null===e||void 0===e?void 0:e.sfa_id)||"-"),r.a.createElement("div",{className:"col-4 order-title"},Object(E.a)(null===e||void 0===e?void 0:e.weight)," ",t.formatMessage({id:"ORDER.UNIT.KG"})),r.a.createElement("div",{className:"col-4 order-title"},Object(E.a)(null===e||void 0===e?void 0:e.volume)," ",t.formatMessage({id:"ORDER.UNIT.M3"})))})))):r.a.createElement(b.d,null,r.a.createElement(T.a,null)))},be=a(1),fe=a(186),Oe=a(388),he=a(1245);var ve=function(e){var t=e.trackingDetail,a=e.show,c=e.onHide,n=e.onDelete,i=e.onUpdate,o=e.onNew,s=e.isNew,u=void 0!==s&&s,E=Object(l.useState)({code:"",checked:!1}),p=Object(m.a)(E,2),b=p[0],f=p[1];Object(l.useEffect)((function(){a&&f({code:(null===t||void 0===t?void 0:t.code)||"",checked:(null===t||void 0===t?void 0:t.checked)||!1})}),[a]);var O=function(){f({code:"",checked:!1})};return r.a.createElement(fe.a,{show:a,onHide:c,title:u?"Th\xeam m\u1edbi tracking":"C\u1eadp nh\u1eadt m\xe3 tracking"},r.a.createElement(Oe.a.Body,{className:"overlay overlay-block cursor-default"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("label",null,"M\xe3 tracking"),r.a.createElement("input",{name:"code",value:b.code,className:"form-control",onChange:function(e){/^[0-9]*$/.test(e.target.value)&&f(Object(d.a)(Object(d.a)({},b),{},Object(be.a)({},e.target.name,e.target.value)))}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"checkTracking",onChange:function(){f(Object(d.a)(Object(d.a)({},b),{},{checked:!b.checked}))},checked:b.checked}),r.a.createElement("label",{className:"form-check-label",htmlFor:"checkTracking"},r.a.createElement(S.a,{id:"TRACKING.RECEIVED"})))))),r.a.createElement(Oe.a.Footer,null,r.a.createElement("button",{type:"button",onClick:c,className:"btn btn-light btn-elevate"},r.a.createElement(S.a,{id:"GLOBAL.BUTTON.CANCEL"})),u?r.a.createElement(he.a,{color:"primary",onClick:function(){var e={code:b.code,checked:b.checked?1:0};o&&(o(e),O())}},r.a.createElement(S.a,{id:"GLOBAL.BUTTON.ADD"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,{onClick:function(){n(null===t||void 0===t?void 0:t.id)},color:"danger"},r.a.createElement(S.a,{id:"GLOBAL.BUTTON.DELETE"})),r.a.createElement(he.a,{color:"primary",onClick:function(){var e={id:(null===t||void 0===t?void 0:t.id)||"",code:b.code||(null===t||void 0===t?void 0:t.code)||"",checked:b.checked?1:0};i&&(i(e),O())}},r.a.createElement(S.a,{id:"GLOBAL.BUTTON.UPDATE"}))," ")))},ge=a(1288);var Ne=function(e){var t,a,c=e.order,n=void 0===c?{}:c,i=e.onUpdate,o=void 0===i?null:i,s=e.statusRes,d=e.intl,u=Object(l.useState)(""),E=Object(m.a)(u,2),p=E[0],f=E[1],O=Object(ge.a)((null===n||void 0===n?void 0:n.note)||"");return Object(l.useEffect)((function(){f((null===n||void 0===n?void 0:n.note)||"")}),[null===n||void 0===n?void 0:n.note]),r.a.createElement(b.c,{className:"h-100"},r.a.createElement(b.e,{title:d.formatMessage({id:"ORDER.INFO"})},r.a.createElement(b.f,null,r.a.createElement(he.a,{color:"primary",onClick:function(){o&&o(p)},disabled:O===p},r.a.createElement(S.a,{id:"GLOBAL.BUTTON.UPDATE"})))),r.a.createElement(b.d,null,r.a.createElement("div",{className:"form-group row align-items-center"},r.a.createElement("div",{className:"col-3"},r.a.createElement("span",{className:"order-title"},r.a.createElement(S.a,{id:"ORDER.ID"}))),r.a.createElement("div",{className:"col-9"},r.a.createElement("div",{className:"form-control bg-light"},(null===n||void 0===n?void 0:n.id)||""))),r.a.createElement("div",{className:"form-group row align-items-center"},r.a.createElement("div",{className:"col-3"},r.a.createElement("span",{className:"order-title"},r.a.createElement(S.a,{id:"ORDER.CUSTOMER"}))),r.a.createElement("div",{className:"col-9"},r.a.createElement("div",{className:"form-control bg-light"},(null===n||void 0===n?void 0:n.customer_id)||""))),r.a.createElement("div",{className:"form-group row align-items-center"},r.a.createElement("div",{className:"col-3"},r.a.createElement("span",{className:"order-title"},r.a.createElement(S.a,{id:"ORDER.STATUS"}))),r.a.createElement("div",{className:"col-9"},r.a.createElement("div",{className:"form-control bg-light"},(null===s||void 0===s?void 0:s.name)||(null===n||void 0===n||null===(t=n.status)||void 0===t?void 0:t.name)))),r.a.createElement("div",{className:"form-group row align-items-center"},r.a.createElement("div",{className:"col-3"},r.a.createElement("span",{className:"order-title"},r.a.createElement(S.a,{id:"ORDER.TYPE"}))),r.a.createElement("div",{className:"col-9"},r.a.createElement("div",{className:"form-control bg-light"},(null===n||void 0===n||null===(a=n.type)||void 0===a?void 0:a.name)||""))),r.a.createElement("div",{className:"form-group row align-items-center"},r.a.createElement("div",{className:"col-3"},r.a.createElement("span",{className:"order-title"},r.a.createElement(S.a,{id:"ORDER.NOTE"}))),r.a.createElement("div",{className:"col-9"},r.a.createElement("input",{value:p,className:"form-control",placeholder:"Nh\u1eadp ghi ch\xfa t\u1ea1i \u0111\xe2y",onChange:function(e){f(e.target.value)}}))),r.a.createElement("div",{className:"form-group row align-items-center"},r.a.createElement("div",{className:"col-3"},r.a.createElement("span",{className:"order-title"},r.a.createElement(S.a,{id:"ORDER.ORDER_DATE"}))),r.a.createElement("div",{className:"col-9"},r.a.createElement("div",{className:"form-control bg-light"},(null===n||void 0===n?void 0:n.create_at)||""))),r.a.createElement("div",{className:"form-group row align-items-center"},r.a.createElement("div",{className:"col-3"},r.a.createElement("span",{className:"order-title"},r.a.createElement(S.a,{id:"ORDER.LAST_UPDATE"}))),r.a.createElement("div",{className:"col-9"},r.a.createElement("div",{className:"form-control bg-light"},(null===n||void 0===n?void 0:n.updated_at)||"")))))};var Le=function(e){var t=e.intl,a=Object(i.e)((function(e){return{ladingBillList:e.warehouse.ladingBill.list.data}}),i.c).ladingBillList;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.c,{className:"h-100"},r.a.createElement(b.e,{title:t.formatMessage({id:"ORDER.LADING_BILL"})}),(null===a||void 0===a?void 0:a.length)>0?r.a.createElement("div",{className:"pb-4"},r.a.createElement("div",{className:"landing-bill-card__header py-5"},r.a.createElement("span",{className:"col-3 order-title"},r.a.createElement(S.a,{id:"ORDER.CODE"})),r.a.createElement("span",{className:"col-6 order-title"},r.a.createElement(S.a,{id:"ORDER.SHIPMENT_METHOD"})),r.a.createElement("span",{className:"col-3 order-title"},r.a.createElement(S.a,{id:"ORDER.TOTAL_MONEY"}))),r.a.createElement("div",{className:"order-card"},null===a||void 0===a?void 0:a.map((function(e,t){return r.a.createElement("div",{key:t,className:"landing-bill-card__item py-5",style:{backgroundColor:t%2!==1?"#e2e3ef":"-"}},r.a.createElement("div",{className:"col-3 order-title"},e.id||"-"),r.a.createElement("div",{className:"col-6 order-title"},e.shipment_method_id||"-"),r.a.createElement("div",{className:"col-3 order-title"},Object(E.a)(e.balance)||"-"))})))):r.a.createElement(b.d,null,r.a.createElement(T.a,null))))},Re=a(5),Te=a.n(Re);function je(e){var t=e.onLog,a=void 0===t?null:t,c=e.intl,n=Object(l.useState)(""),o=Object(m.a)(n,2),s=o[0],d=o[1],u=Object(i.e)((function(e){return{logList:e.notification.log.list}}),i.c).logList;return r.a.createElement(b.c,{className:"h-100"},r.a.createElement(b.e,{title:c.formatMessage({id:"ORDER.LOG"})}),r.a.createElement(b.d,{className:"d-flex flex-column justify-content-between"},r.a.createElement("div",{className:"row order-log-card"},r.a.createElement("div",{className:"col-12"},(null===u||void 0===u?void 0:u.length)>0?u.map((function(e,t){return r.a.createElement("div",{key:t,className:"d-flex"},r.a.createElement("b",{className:"mr-2"},e.creator_id),r.a.createElement("p",{style:{color:"rgb(177 141 28)"},className:"mr-2"},e.created_at,":"),r.a.createElement("p",null," ",function(e){if(!e.includes("{"))return e;var t=JSON.parse(e,(function(e,t){return t}));return t.product_id||t.wrote||t.director_id||t.supplier_id||t.discount_tax_percent||t.addtional||t.status}(e.content)))})):r.a.createElement(T.a,null))),r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("input",{value:s,className:"form-control",placeholder:"Nh\u1eadp ghi ch\xfa t\u1ea1i \u0111\xe2y",onChange:function(e){d(e.target.value)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{type:"button",className:"input-group-text",id:"basic-addon2",onClick:function(){a&&(d(""),a(s))},style:{backgroundColor:"#3699ff",color:"white"},disabled:!s},r.a.createElement(S.a,{id:"GLOBAL.BUTTON.WRITE"})))))))}je.prototype={onLog:Te.a.func};var Ae=je,Se=a(1292);var ye=function(e){var t=e.shipment,a=void 0===t?{}:t,c=e.onUpdate,n=void 0===c?null:c,o=e.shipmentInfoRes,s=e.intl,d=Object(l.useState)(!1),u=Object(m.a)(d,2),E=u[0],p=u[1],f=Object(l.useState)(null),O=Object(m.a)(f,2),h=O[0],v=O[1],g=Object(i.e)((function(e){return{shipmentList:e.order.shipmentInfo.shipmentInfoList}}),i.c).shipmentList,N=g.map((function(e){return{value:e.id,label:e.consignee,address:e.address,tel:e.tel}})),L=g.find((function(e){return e.id===o}));return r.a.createElement(b.c,{style:{height:"55%"}},r.a.createElement(b.e,{title:s.formatMessage({id:"ORDER.SHIPMENT_INFO"})},r.a.createElement(b.f,null,E&&r.a.createElement("div",{style:{width:"200px"}},r.a.createElement(w.a,{options:N,className:"w-100",onChange:function(e){v(e)}})),r.a.createElement(he.a,{className:"ml-2",color:"secondary",onClick:function(){p(!E),v(null)}},r.a.createElement("i",{style:{paddingRight:0},className:E?"flaticon-cancel":"flaticon-edit"})),r.a.createElement(he.a,{className:"ml-2",color:"primary",onClick:function(){n&&h&&n(null===h||void 0===h?void 0:h.value)},disabled:!h},r.a.createElement(S.a,{id:"GLOBAL.BUTTON.UPDATE"})))),r.a.createElement(b.d,null,r.a.createElement("div",{className:"form-group row align-items-center"},r.a.createElement("div",{className:"col-3"},r.a.createElement("span",{className:"order-title"},r.a.createElement(S.a,{id:"ORDER.CUSTOMER"}))),r.a.createElement("div",{className:"col-9"},r.a.createElement("div",{className:"form-control bg-light"},L?L.consignee:(null===a||void 0===a?void 0:a.consignee)||""))),r.a.createElement("div",{className:"form-group row align-items-center"},r.a.createElement("div",{className:"col-3"},r.a.createElement("span",{className:"order-title"},r.a.createElement(S.a,{id:"ORDER.ADDRESS"}))),r.a.createElement("div",{className:"col-9"},r.a.createElement("div",{className:"form-control bg-light"},L?L.address:(null===a||void 0===a?void 0:a.address)||""))),r.a.createElement("div",{className:"form-group row align-items-center"},r.a.createElement("div",{className:"col-3"},r.a.createElement("span",{className:"order-title"},r.a.createElement(S.a,{id:"ORDER.TEL"}))),r.a.createElement("div",{className:"col-9"},r.a.createElement(Se.a,{className:"form-control bg-light",format:"#### #### #### ####",value:L?L.tel:(null===a||void 0===a?void 0:a.tel)||"",displayType:"text"})))))};var De=function(e){var t=e.shipment,a=void 0===t?{}:t,c=e.onUpdate,n=void 0===c?null:c,o=e.methodRes,s=e.intl,d=Object(l.useState)(!1),p=Object(m.a)(d,2),f=p[0],O=p[1],h=Object(l.useState)(null),v=Object(m.a)(h,2),g=v[0],N=v[1],L=Object(i.e)((function(e){return{shipmentMethodList:e.home.home.shipmentMethodList}}),i.c).shipmentMethodList,R=Object(i.e)((function(e){return{isActionLoading:e.order.list.isActionLoading}}),i.c).isActionLoading,T=null===L||void 0===L?void 0:L.map((function(e){return{value:e.id,label:"".concat(e.name," - ph\xed ").concat(e.fee)}})),j=null===L||void 0===L?void 0:L.find((function(e){return e.id===o}));return r.a.createElement(b.c,{style:{height:"41%"}},R&&r.a.createElement(u.a,null),r.a.createElement(b.e,{title:s.formatMessage({id:"ORDER.SHIPMENT_METHOD"})},r.a.createElement(b.f,null,f&&r.a.createElement("div",{style:{width:"200px"}},r.a.createElement(w.a,{options:T,className:"w-100",onChange:function(e){N(e)}})),r.a.createElement(he.a,{className:"ml-2",color:"secondary",onClick:function(){O(!f),N(null)}},r.a.createElement("i",{style:{paddingRight:0},className:f?"flaticon-cancel":"flaticon-edit"})),r.a.createElement(he.a,{className:"ml-2",color:"primary",onClick:function(){n&&g&&n(null===g||void 0===g?void 0:g.value)},disabled:!g},r.a.createElement(S.a,{id:"GLOBAL.BUTTON.UPDATE"})))),r.a.createElement(b.d,null,r.a.createElement("div",{className:"form-group row align-items-center"},r.a.createElement("div",{className:"col-3"},r.a.createElement("span",{className:"order-title"}," ",r.a.createElement(S.a,{id:"ORDER.NAME"}))),r.a.createElement("div",{className:"col-9"},r.a.createElement("div",{className:"form-control bg-light"},j?j.name:(null===a||void 0===a?void 0:a.name)||""))),r.a.createElement("div",{className:"form-group row align-items-center"},r.a.createElement("div",{className:"col-3"},r.a.createElement("span",{className:"order-title"},r.a.createElement(S.a,{id:"ORDER.FEE"}))),r.a.createElement("div",{className:"col-9"},r.a.createElement("div",{className:"form-control bg-light"},j?Object(E.a)(null===j||void 0===j?void 0:j.fee):Object(E.a)(null===a||void 0===a?void 0:a.fee))))))};var _e=function(e){var t=e.trackingList,a=void 0===t?[]:t,c=e.onNewCick,n=e.onViewClick,l=e.intl;return r.a.createElement(b.c,{className:"h-100"},r.a.createElement(b.e,{title:l.formatMessage({id:"ORDER.TRACKING_LIST"})},r.a.createElement(b.f,null,r.a.createElement(he.a,{color:"primary",onClick:c},r.a.createElement(S.a,{id:"GLOBAL.BUTTON.CREATE"})))),(null===a||void 0===a?void 0:a.length)>0?r.a.createElement("div",{className:"pb-4"},r.a.createElement("div",{className:"tracking-card__header py-5"},r.a.createElement("span",{className:"col-6"},r.a.createElement(S.a,{id:"GLOBAL.NO"})),r.a.createElement("span",{className:"col-6"},r.a.createElement(S.a,{id:"ORDER.CODE_TRACKING"}))),r.a.createElement("div",{className:"order-card"},null===a||void 0===a?void 0:a.map((function(e,t){return r.a.createElement("div",{key:t,className:"tracking-card__item py-5",style:{backgroundColor:t%2!==1?"#e2e3ef":"-"},onClick:function(){return t=e.id,void n(t);var t}},r.a.createElement("div",{className:"col-6 order-title"},t+1),r.a.createElement("div",{className:"col-6"},r.a.createElement("span",{className:"label font-weight-bold label-lg label-inline mr-2 ".concat(e.checked?"label-light-success":"label-light-danger")},e.code)))})))):r.a.createElement(b.d,null,r.a.createElement(T.a,null)))};var Ce=Object(p.c)(Object(i.b)(null,null)((function(e){var t=e.history,a=e.intl,n=e.match.params.id,o=Object(i.d)(),s=Object(i.e)((function(e){var t=e.order,a=e.home;return{orderDetail:t.list.orderDetail,isLoadingDetail:t.list.isLoading,isActionLoadingDetail:t.list.isActionLoading,isActionLoadingCost:t.cost.isActionLoading,statusList:a.home.statusList}}),i.c),d=s.orderDetail,E=s.isLoadingDetail,p=s.isActionLoadingDetail,b=s.isActionLoadingCost,f=s.statusList,O={id:n,params:{with:"items.trackings;trackings;shipmentInfor",appends:"customer;shipmentMethod"}},h={search:"owners.objectable_type:order;owners.objectable_id:".concat(n),searchFields:"owners.objectable_type:=;owners.objectable_id:=",searchJoin:"and"},v={search:"owningBoxes.objectable_type:order;owningBoxes.objectable_id:".concat(n),searchFields:"owningBoxes.objectable_type:=;owningBoxes.objectable_id:=",searchJoin:"and"},g={search:"receipts.receiptable_id:".concat(n,";receipts.receiptable_type:App\\Entities\\Order")},N={search:"logable_type:App\\\\Entities\\\\Order;logable_id:".concat(n)};Object(l.useEffect)((function(){o(Object(I.g)()),o(Object(I.e)(O)).then((function(e){if(e.type.includes("fulfilled")){var t={search:"user_id:".concat(e.payload.customer_id)};o(Object(q.b)(t))}})),o(Object(z.d)(h)),o(Object(Q.c)(v)),o(Object(ue.g)(g))}),[]);var L=Object(l.useState)(null),R=Object(m.a)(L,2),T=R[0],j=R[1],A=Object(l.useState)(null),y=Object(m.a)(A,2),D=y[0],_=y[1];Object(l.useEffect)((function(){o(Object(U.c)(N))}),[]);var M=Object(l.useState)(null),w=Object(m.a)(M,2),B=w[0],k=w[1],P=Object(l.useState)(null),F=Object(m.a)(P,2),G=F[0],x=F[1],H=Object(l.useState)(!1),W=Object(m.a)(H,2),V=W[0],K=W[1],J=Object(l.useState)(!1),Y=Object(m.a)(J,2),$=Y[0],Z=Y[1],ee=Object(l.useState)(null),te=Object(m.a)(ee,2),ae=te[0],ce=te[1],ne=(G||d.steps||[]).map((function(e){return f.find((function(t){return t.id===e}))})),le=E||p||b;return r.a.createElement(r.a.Fragment,null,le&&r.a.createElement(u.a,null),r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{title:a.formatMessage({id:"ORDER.SHIPMENT.DETAIL.TITLE"})},r.a.createElement(X.a,{className:"btn btn-light ml-2",onClick:function(){return t.push("/ban-hang/don-van-chuyen-ho")}},r.a.createElement("i",{className:"fa fa-arrow-left"}),r.a.createElement(S.a,{id:"GLOBAL.BUTTON.BACK"})),(null===ne||void 0===ne?void 0:ne.length)>0?null===ne||void 0===ne?void 0:ne.map((function(e,t){return r.a.createElement(X.a,{key:t,className:"btn btn-primary ml-2",onClick:function(){return function(e){var t={id:n,body:{status:e}};o(Object(I.h)(t)).then((function(e){var t,n;e.type.includes("fulfilled")?(c.b.success(a.formatMessage({id:"ORDER.UPDATE.STATUS.SUCCESS"})),k(null===(t=e.payload)||void 0===t?void 0:t.status),x(null===(n=e.payload)||void 0===n?void 0:n.steps),o(Object(U.c)(N))):c.b.error(a.formatMessage({id:"ORDER.UPDATE.STATUS.FAIL"}))}))}(null===e||void 0===e?void 0:e.id)}},null===e||void 0===e?void 0:e.name)})):null),r.a.createElement("div",{className:"px-8 pb-8"},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Ne,{statusRes:B,order:d,onUpdate:function(e){var t={id:n,body:{note:e}};o(Object(I.h)(t)).then((function(e){e.type.includes("fulfilled")?c.b.success(a.formatMessage({id:"ORDER.UPDATE.INFO.SUCCESS"})):c.b.error(a.formatMessage({id:"ORDER.UPDATE.INFO.FAIL"}))}))},intl:a})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"h-100"},r.a.createElement(ye,{shipmentInfoRes:T,shipment:d.shipment_infor,onUpdate:function(e){var t={id:n,body:{shipment_infor_id:e}};o(Object(I.h)(t)).then((function(e){e.type.includes("fulfilled")?(c.b.success(a.formatMessage({id:"ORDER.UPDATE.SHIPMENT_INFO.SUCCESS"})),j(e.payload.shipment_infor_id)):c.b.error(a.formatMessage({id:"ORDER.UPDATE.SHIPMENT_INFO.FAIL"}))}))},intl:a}),r.a.createElement(De,{methodRes:D,shipment:d.shipment_method,onUpdate:function(e){var t={id:n,body:{shipment_method_id:e}};o(Object(I.h)(t)).then((function(e){e.type.includes("fulfilled")?(c.b.success(a.formatMessage({id:"ORDER.UPDATE.SHIPMENT_METHOD.SUCCESS"})),_(e.payload.shipment_method_id)):c.b.error(a.formatMessage({id:"ORDER.UPDATE.SHIPMENT_METHOD.FAIL"}))}))},intl:a})))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(pe,{intl:a})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Le,{onView:function(e){t.push("/warehouse/lading-bills/".concat(e))},intl:a}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(_e,{trackingList:d.trackings,onNewCick:function(){K(!0),Z(!0),ce(null)},onViewClick:function(e){var t,a=null===d||void 0===d||null===(t=d.trackings)||void 0===t?void 0:t.findIndex((function(t){return t.id===e}));if(-1!==a){K(!0),Z(!1);var c=null===d||void 0===d?void 0:d.trackings[a];ce(c)}},intl:a})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Ae,{onLog:function(e){var t={content:e,logable_id:n,logable_type:"AppEntitiesOrder"};o(Object(U.a)(t)).then((function(e){e.type.includes("fulfilled")?(o(Object(U.c)(N)),c.b.success(a.formatMessage({id:"ORDER.UPDATE.LOG.SUCCESS"}))):c.b.error(a.formatMessage({id:"ORDER.UPDATE.LOG.FAIL"}))}))},intl:a}))))),r.a.createElement(ve,{trackingDetail:ae,show:V,isNew:$,onHide:function(){return K(!1)},onDelete:function(e){var t={id:e,body:{action:"detach",params:'["orders",'.concat(d.id,"]")}};o(Object(Ee.b)(t)).then((function(e){e.type.includes("fulfilled")?(o(Object(I.e)(O)),c.b.success(a.formatMessage({id:"ORDER.DELETE.TRACKING.SUCCESS"}))):c.b.error(a.formatMessage({id:"ORDER.DELETE.TRACKING.FAIL"})),K(!1)}))},onUpdate:function(e){var t={id:e.id,params:{code:e.code,checked:e.checked}};o(Object(Ee.h)(t)).then((function(e){e.type.includes("fulfilled")?(o(Object(I.e)(O)),c.b.success(a.formatMessage({id:"ORDER.UPDATE.TRACKING.SUCCESS"}))):c.b.error(a.formatMessage({id:"ORDER.UPDATE.TRACKING.FAIL"}))})),K(!1),Z(!1)},onNew:function(e){var t={code:e.code,checked:e.checked};o(Object(Ee.a)(t)).then((function(e){if(e.type.includes("fulfilled")){var t,l={id:null===(t=e.payload)||void 0===t?void 0:t.id,body:{action:"attach",params:'["orders","'.concat(n,'"]')}};o(Object(Ee.b)(l)).then((function(e){e.type.includes("fulfilled")?(o(Object(I.e)(O)),c.b.success(a.formatMessage({id:"ORDER.CREATE.TRACKING.SUCCESS"}))):c.b.error(a.formatMessage({id:"ORDER.CREATE.TRACKING.FAIL"}))}))}else c.b.error(a.formatMessage({id:"ORDER.CREATE.TRACKING.FAIL"}));K(!1)}))}})))}))),Ie=a(48),Me=a(1296),we=a(73);a(1361);var Be=function(e){var t=e.onSearchCustomer,a=void 0===t?null:t,n=e.onSubmit,s=void 0===n?null:n,u=e.btnRef,E=e.isSuccessNew,p=e.intl,f=Object(i.d)(),O=Object(i.e)((function(e){var t=e.authService,a=e.home,c=e.order;return{customerList:t.user.userList,shipmentMethodList:a.home.shipmentMethodList,shipmentList:c.shipmentInfo.shipmentInfoList}}),i.c),h=O.customerList,v=O.shipmentMethodList,g=O.shipmentList,N=Object(l.useState)({typeTracking:"code",typeCustomer:"id",shipmentSelected:null,methodSelected:null,trackingList:[],code:""}),L=Object(m.a)(N,2),R=L[0],T=L[1],j=Object(l.useState)(!0),A=Object(m.a)(j,2),y=A[0],D=A[1],_=Object(l.useState)(null),C=Object(m.a)(_,2),I=C[0],M=C[1],B=Object(l.useRef)(null),k=function(e){B.current&&clearTimeout(B.current),B.current=setTimeout((function(){if(e.length>0){var t={text:e,type:R.typeCustomer};a&&a(t)}}),500)},U=function(e){M(e);var t={search:"user_id:".concat(e.value)};f(Object(q.b)(t)).then((function(e){if(e.type.includes("fulfilled")){var t=e.payload.data;if(e.payload.data.length>0){var a,n,l,r,i={value:null===(a=t[0])||void 0===a?void 0:a.id,label:null===(n=t[0])||void 0===n?void 0:n.consignee,address:null===(l=t[0])||void 0===l?void 0:l.address,tel:null===(r=t[0])||void 0===r?void 0:r.tel};T(Object(d.a)(Object(d.a)({},R),{},{shipmentSelected:i}))}else T(Object(d.a)(Object(d.a)({},R),{},{shipmentSelected:null}));c.b.success("C\xf3 ".concat(t.length," th\xf4ng tin nh\u1eadn h\xe0ng"))}else c.b.success("Kh\xf4ng C\xf3 th\xf4ng tin nh\u1eadn h\xe0ng");D(!1)}))},P=function(e){T(Object(d.a)(Object(d.a)({},R),{},{methodSelected:e}))},F=function(e){T(Object(d.a)(Object(d.a)({},R),{},{shipmentSelected:e}))},G=function(e){/^[0-9]*$/.test(e.target.value)&&T(Object(d.a)(Object(d.a)({},R),{},{code:e.target.value}))},x=function(){var e={code:R.code||"",expected_delivery:"1"},t=Object(Ie.a)(R.trackingList);t.push(e),T(Object(d.a)(Object(d.a)({},R),{},{trackingList:t,code:""}))},H=null===h||void 0===h?void 0:h.map((function(e){return{value:e.id,label:e.email}})),W=null===v||void 0===v?void 0:v.map((function(e){return{value:e.id,label:e.name}})),V=g.map((function(e){return{value:e.id,label:e.consignee,address:e.address,tel:e.tel}})),K=!E&&(!!R.shipmentSelected||R.trackingList.length>0);return r.a.createElement(r.a.Fragment,null,r.a.createElement(we.d,{enableReinitialize:!0,initialValues:{note:""},innerRef:u,onSubmit:function(e){var t,a,c,n={trackings:R.trackingList||[],methodId:(null===(t=R.methodSelected)||void 0===t?void 0:t.value)||W[0].value,shipmentId:(null===(a=R.shipmentSelected)||void 0===a?void 0:a.value)||(null===(c=V[0])||void 0===c?void 0:c.value),note:e.note,customer_id:null===I||void 0===I?void 0:I.value};s&&s(n)}},(function(){var e,t,a,c;return r.a.createElement(we.c,null,r.a.createElement("div",{className:"form-group row "},r.a.createElement("div",{className:"col-xl-6 mb-8"},r.a.createElement(b.c,{className:"h-100"},r.a.createElement(b.d,null,r.a.createElement("div",{className:"form-group row align-items-center align-items-center"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h4",{className:" text-dark font-weight-bold mb-2"},r.a.createElement(S.a,{id:"ORDER.TRACKING"})))),r.a.createElement(le.a,{className:"mb-8"}),r.a.createElement("div",{className:"form-group"},null===(e=R.trackingList)||void 0===e?void 0:e.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",{className:"form-group input-group"},r.a.createElement("span",{className:"form-control bg-light input-group-prepend"},e.code),r.a.createElement("span",{style:{width:"65px"},className:"btn btn-danger btn-sm input-group-append input-group-text",onClick:function(){return function(e){var t=Object(Ie.a)(R.trackingList);t.splice(e,1),T(Object(d.a)(Object(d.a)({},R),{},{trackingList:t}))}(t)}},r.a.createElement(S.a,{id:"GLOBAL.BUTTON.DELETE"}))))})),r.a.createElement("div",{className:"form-group input-group"},r.a.createElement("input",{className:"form-control input-group-prepend",type:"text",value:R.code,onChange:G,placeholder:p.formatMessage({id:"GLOBAL.TRACKING.PLACEHOLER.INPUT"})}),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm input-group-append input-group-text",onClick:x,disabled:!R.code,style:{width:"65px"}},r.a.createElement(S.a,{id:"GLOBAL.BUTTON.ADD"})))),r.a.createElement(le.a,{className:"mb-8"}),r.a.createElement("div",{className:"form-group row align-items-center"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.SHIPMENT_METHOD"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement(w.a,{placeholder:p.formatMessage({id:"GLOBAL.SEARCH.PLACEHOLER_INPUT"}),defaultValue:W[0],options:W,onChange:P}))),r.a.createElement("div",{className:"form-group row align-items-center"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.NOTE_ORDER"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement(we.b,{name:"note",component:Me.a,placeholder:p.formatMessage({id:"GLOBAL.PLACEHOLER.INPUT"})})))))),r.a.createElement("div",{className:"col-xl-6 mb-8"},r.a.createElement(b.c,{className:"h-100"},r.a.createElement(b.d,null,r.a.createElement("div",{className:"form-group row align-items-center  align-items-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h4",{className:" text-dark font-weight-bold mb-2"},r.a.createElement(S.a,{id:"ORDER.CUSTOMER_INFO"}))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(w.a,{placeholder:p.formatMessage({id:"GLOBAL.SEARCH.PLACEHOLER_INPUT"}),options:H,onInputChange:k,onChange:U}))),r.a.createElement(le.a,{className:"mb-9"}),r.a.createElement("div",{className:"form-group row align-items-center  align-items-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h4",{className:" text-dark font-weight-bold mb-2"},r.a.createElement(S.a,{id:"ORDER.CONSIGNEE_INFO"}))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(w.a,{placeholder:p.formatMessage({id:"GLOBAL.PLACEHOLER.SELECT"}),value:R.shipmentSelected,options:V,onChange:F,isDisabled:y}))),r.a.createElement(le.a,{className:"mb-9"}),r.a.createElement("div",{className:"form-group row align-items-center"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.CONSIGNEE"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"form-control bg-light"},(null===(t=R.shipmentSelected)||void 0===t?void 0:t.label)||""))),r.a.createElement("div",{className:"form-group row align-items-center"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.ADDRESS"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"form-control bg-light"},(null===(a=R.shipmentSelected)||void 0===a?void 0:a.address)||""))),r.a.createElement("div",{className:"form-group row align-items-center"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.TEL"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"form-control bg-light"},(null===(c=R.shipmentSelected)||void 0===c?void 0:c.tel)||""))))))))})),r.a.createElement(o.a,{when:K,message:p.formatMessage({id:"GLOBAL.MESSAGE.FILLED_OUT"})}))};var ke=Object(p.c)(Object(i.b)(null,null)((function(e){var t=e.intl,a=Object(o.h)(),n=Object(i.d)(),s=Object(l.useRef)(null),d=Object(i.e)((function(e){var t=e.order,a=e.auth,c=e.product;return{isActionLoadingOrder:t.list.isActionLoading,isLoadingUser:a.isLoading,isLoadingProduct:c.list.loading}}),i.c),E=d.isActionLoadingOrder,p=d.isLoadingUser,b=d.isLoadingProduct,f=Object(l.useState)(!1),O=Object(m.a)(f,2),h=O[0],v=O[1],g=function(e){var l={shipment_method_id:e.methodId,shipment_infor_id:e.shipmentId,type:"shipment",note:e.note,trackings:JSON.stringify(e.trackings),customer_id:e.customer_id};e.methodId?e.shipmentId?n(Object(I.a)(l)).then((function(e){e.type.includes("fulfilled")?(c.b.success(t.formatMessage({id:"ORDER.CREATE.SHIPMENT.SUCCESS"})),v(!0),a.push("/ban-hang/don-van-chuyen-ho/".concat(e.payload.id,"/chi-tiet"))):(v(!1),c.b.error(t.formatMessage({id:"ORDER.CREATE.SHIPMENT.FAIL"})))})):t.formatMessage({id:"ORDER.CREATE.WHOLESALE.WARNING2"}):t.formatMessage({id:"ORDER.CREATE.WHOLESALE.WARNING1"})},N=E||b||p;return r.a.createElement(r.a.Fragment,null,N&&r.a.createElement(u.a,null),r.a.createElement(C.a,{title:t.formatMessage({id:"ORDER.SHIPMENT.NEW.TITLE"})},r.a.createElement("button",{type:"button",onClick:function(){return a.goBack()},className:"btn btn-light"},r.a.createElement("i",{className:"fa fa-arrow-left"}),r.a.createElement(S.a,{id:"GLOBAL.BUTTON.BACK"})),"  ",r.a.createElement("button",{type:"submit",style:{width:"100px"},className:"btn btn-primary ml-2",onClick:function(){s.current&&s.current.handleSubmit()}},r.a.createElement(S.a,{id:"GLOBAL.BUTTON.CREATE_ORDER"}))),r.a.createElement("div",{className:"px-8"},r.a.createElement(Be,{intl:t,onSearchCustomer:function(e){var t=e.text,a=e.type,c={search:t,searchFields:"".concat(a,":like")};n(Object(ae.f)(c))},onSubmit:g,btnRef:s,onNew:g,isSuccessNew:h})))})));var Ue=function(e){var t=e.onSearch,a=e.intl,c=Object(l.useRef)(null),n=Object(i.e)((function(e){return{statusList:e.order.status.list}}),i.c).statusList,o=[{value:"all",label:a.formatMessage({id:"GLOBAL.FILTER.ALL"})},{value:"id",label:a.formatMessage({id:"GLOBAL.FILTER.ORDER_ID"})},{value:"note",label:a.formatMessage({id:"GLOBAL.FILTER.NOTE"})},{value:"customer",label:a.formatMessage({id:"GLOBAL.FILTER.CUSTOMER"})},{value:"status",label:a.formatMessage({id:"GLOBAL.FILTER.STATUS"})},{value:"product",label:a.formatMessage({id:"GLOBAL.FILTER.JANCODE"})}],s=Object(l.useState)({type:"all",status:"",search:""}),u=Object(m.a)(s,2),E=u[0],p=u[1],b=n.map((function(e){return{value:e.id,label:e.name}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-lg-2 col-md-3"},r.a.createElement(w.a,{defaultValue:o[0],options:o,onChange:function(e){p(Object(d.a)(Object(d.a)({},E),{},{type:e.value,search:""})),"all"===e.value&&t({search:"director.type.id:wholesale"})}})),"status"===E.type?r.a.createElement("div",{className:"col-lg-10 col-md-9"},r.a.createElement(w.a,{options:b,onChange:function(e){"all"===e.value?t({search:"director.type.id:wholesale",searchFields:"director.status.name:like"}):t({search:"director.type.id:wholesale;director.status.id:".concat(e.value),searchFields:"director.type.id:=;director.status.id:="})},placeholder:a.formatMessage({id:"GLOBAL.SEARCH.PLACEHOLER_SELECT"})})):r.a.createElement("div",{className:"col-lg-10 col-md-9"},r.a.createElement("input",{type:"text",name:"search",value:E.search,className:"form-control",placeholder:a.formatMessage({id:"GLOBAL.SEARCH.PLACEHOLER_INPUT"}),onChange:function(e){var a=e.target.value;p(Object(d.a)(Object(d.a)({},E),{},{search:a})),c.current&&clearTimeout(c.current),c.current=setTimeout((function(){if(t&&a.length>0)switch(E.type){case"id":t({search:"director.type.id:wholesale;id:".concat(a),searchFields:"id:like;director.type.id:="});break;case"customer":t({search:"director.type.id:wholesale;customer_id:".concat(a),searchFields:"customer_id:like;director.type.id:="});break;case"note":t({search:"director.type.id:wholesale;note:".concat(a),searchFields:"note:like;director.type.id:="});break;case"product":t({search:"director.type.id:wholesale;items.product_id:".concat(a),searchFields:"items.product_id:like;director.type.id:="});break;default:t({search:"director.type.id:wholesale;".concat(a),searchFields:"director.type.id:="})}else t({search:"director.type.id:wholesale"})}),500)}}))))};var Pe=Object(p.c)(Object(i.b)(null,null)((function(e){var t=e.intl,a=Object(i.d)(),c=Object(o.h)(),n=Object(i.e)((function(e){return e.order.list})),s=n.orderList,p=n.pagination,f=n.isLoading,O=Object(l.useState)({page:1,search:"director.type.id:wholesale",searchJoin:"and",searchFields:"",with:"items",orderBy:"updated_at",sortedBy:"desc"}),h=Object(m.a)(O,2),v=h[0],g=h[1],N=[{id:"id",title:t.formatMessage({id:"ORDER.WHOLESALE.TABLE_ID"}),isSort:!1},{id:"order_id",title:t.formatMessage({id:"ORDER.WHOLESALE.TABLE_ID"}),isSort:!1},{id:"customer",title:t.formatMessage({id:"ORDER.RETAIL.TABLE_CUSTOMER"}),isSort:!1},{id:"product",title:t.formatMessage({id:"ORDER.WHOLESALE.TABLE_PRODUCT"}),isSort:!1},{id:"balance",title:t.formatMessage({id:"ORDER.WHOLESALE.TABLE_PRICE"}),isSort:!1},{id:"status",title:t.formatMessage({id:"ORDER.WHOLESALE.TABLE_STATUS"}),isSort:!1},{id:"note",title:t.formatMessage({id:"ORDER.WHOLESALE.TABLE_NOTE"}),isSort:!1,width:"22%"},{id:"updated_at",title:t.formatMessage({id:"ORDER.WHOLESALE.TABLE_UPDATE_DATE"}),isSort:!0}],L={search:"directors.type_id:Wholesale"};Object(l.useEffect)((function(){a(Object(I.f)()),a(Object(M.b)(L))}),[]),Object(l.useEffect)((function(){a(Object(I.d)(v))}),[v]);var R=s.map((function(e){var t,a,c;return{id:e.id||"-",order_id:e.id||"-",customer:e.customer_id||"-",product:(null===(t=e.items)||void 0===t?void 0:t.length)>0?r.a.createElement("p",null,null===(a=e.items[0])||void 0===a?void 0:a.product_id):"-",balance:Object(E.a)(null===e||void 0===e?void 0:e.balance)||0,status:(null===(c=e.status)||void 0===c?void 0:c.name)||"-",note:e.note||"-",updated_at:e.updated_at||"-"}}));return r.a.createElement(r.a.Fragment,null,f&&r.a.createElement(u.a,null),r.a.createElement(C.a,{title:t.formatMessage({id:"ORDER.WHOLESALE.TITLE"})},r.a.createElement(he.a,{style:{minWidth:"100px"},color:"primary",onClick:function(){c.push("/ban-hang/don-si/tao-moi")}},r.a.createElement(S.a,{id:"GLOBAL.BUTTON.CREATE_ORDER"}))),r.a.createElement("div",{className:"px-8 pb-8"},r.a.createElement(r.a.Fragment,null,r.a.createElement(b.c,null,r.a.createElement(b.d,null,r.a.createElement(Ue,{onSearch:function(e){var t=e.search,a=e.searchFields;g(Object(d.a)(Object(d.a)({},v),{},{page:1,search:t,searchFields:a}))},intl:t}),r.a.createElement(_,{columns:N,rows:R,page:v.page,lastpage:p.lastPage,onViewEdit:function(e){c.push("/ban-hang/don-si/".concat(e,"/chi-tiet"))},onPageChange:function(e){g(Object(d.a)(Object(d.a)({},v),{},{page:e}))},onSort:function(e,t){g(Object(d.a)(Object(d.a)({},v),{},{page:1,orderBy:e,sortedBy:t}))}}))))))}))),Fe=a(1327),Ge=a(391),xe=a(68);a(1362);var He=function(e){var t=e.onSearchProduct,a=void 0===t?null:t,n=e.onSearchCustomer,s=void 0===n?null:n,u=e.onSubmitNew,E=void 0===u?null:u,p=e.btnRef,f=e.onSelectProduct,O=e.isSuccessNew,h=e.intl,v=Object(i.d)(),g=Object(i.e)((function(e){var t=e.order,a=e.home,c=e.product,n=e.authService;return{shipmentList:t.shipmentInfo.shipmentInfoList,taxList:a.home.taxList,productList:c.list.productList,customerList:n.user.userList,shipmentMethodList:a.home.shipmentMethodList}}),i.c),N=g.shipmentList,L=g.taxList,R=g.productList,T=g.customerList,j=g.shipmentMethodList,A=xe.d().shape({quantity:xe.c().required(h.formatMessage({id:"ORDER.CREATE.WHOLESALE.QUANTITY_REQUIRED"}))}),y=[{value:"1",label:h.formatMessage({id:"TRACKING.PIECE"})},{value:"0",label:h.formatMessage({id:"TRACKING.BOX"})}],D=Object(l.useState)({typeSearchProduct:"name",productSelected:null,box:null,tax:null,typeSearchCustomer:"email",methodSelected:null,shipmentInfoSelected:null}),_=Object(m.a)(D,2),C=_[0],I=_[1],M=Object(l.useState)(null),B=Object(m.a)(M,2),k=B[0],U=B[1],P=Object(l.useState)(!0),F=Object(m.a)(P,2),G=F[0],x=F[1],H=R.map((function(e){return{value:e.id,label:e.name,price:e.price}})),W=L.map((function(e){return{value:e.id,label:e.name,percent:e.percent}})),V=Object(l.useRef)(null),K=function(e){V.current&&clearTimeout(V.current),V.current=setTimeout((function(){var t={value:e,type:C.typeSearchProduct};e.length>0&&a&&a(t)}),500)},J=function(e){I(Object(d.a)(Object(d.a)({},C),{},{productSelected:e})),f()},Y=function(e){I(Object(d.a)(Object(d.a)({},C),{},{box:e.value}))},z=function(e){I(Object(d.a)(Object(d.a)({},C),{},{tax:e}))},Q=null===T||void 0===T?void 0:T.map((function(e){return{value:e.id,label:e.email}})),X=j.map((function(e){return{value:e.id,label:e.name}})),$=Object(l.useRef)(null),Z=function(e){$.current&&clearTimeout($.current),$.current=setTimeout((function(){var t={value:e,type:C.typeSearchCustomer};e.length>0&&s&&s(t)}),500)},ee=function(e){U(e);var t={search:"user_id:".concat(e.value)};v(Object(q.b)(t)).then((function(e){if(e.type.includes("fulfilled")){var t,a=null===(t=e.payload)||void 0===t?void 0:t.data;if(e.payload.data.length>0){var n,l,r,i,o={value:null===(n=a[0])||void 0===n?void 0:n.id,label:null===(l=a[0])||void 0===l?void 0:l.consignee,address:null===(r=a[0])||void 0===r?void 0:r.address,tel:null===(i=a[0])||void 0===i?void 0:i.tel};I(Object(d.a)(Object(d.a)({},C),{},{shipmentInfoSelected:o}))}else I(Object(d.a)(Object(d.a)({},C),{},{shipmentInfoSelected:null}));c.b.success("".concat(a.length," ").concat(h.formatMessage({id:"ORDER.CONSIGNEE_INFO"})))}else c.b.success(h.formatMessage({id:"ORDER.CONSIGNEE_INFO_NO_DATA"}));x(!1)}))},te=function(e){I(Object(d.a)(Object(d.a)({},C),{},{methodSelected:e.value}))},ae=C.shipmentInfoSelected?N.map((function(e){return{value:e.id,label:e.consignee,address:e.address,tel:e.tel}})):[],ce=function(e){I(Object(d.a)(Object(d.a)({},C),{},{shipmentInfoSelected:e}))},ne=!O&&(!!C.productSelected||!!k);return r.a.createElement(r.a.Fragment,null,r.a.createElement(we.d,{enableReinitialize:!0,initialValues:{property:"",quantity:1,noteProduct:"",noteOrder:""},innerRef:p,onSubmit:function(e){var t,a,c,n,l,r,i,o=(null===(t=C.tax)||void 0===t?void 0:t.percent)||W[0].percent,s={productId:(null===(a=C.productSelected)||void 0===a?void 0:a.value)||"",price:(null===(c=C.productSelected)||void 0===c?void 0:c.price)||"",shipmentInfoId:(null===(n=C.shipmentInfoSelected)||void 0===n?void 0:n.value)||(null===(l=ae[0])||void 0===l?void 0:l.value),box:(null===(r=C.box)||void 0===r?void 0:r.value)||y[0].value,shipmentMethodId:C.methodSelected||(null===(i=X[0])||void 0===i?void 0:i.value),tax:o,quantity:e.quantity,noteOrder:e.noteOrder,noteProduct:e.noteProduct,property:e.property,customer_id:null===k||void 0===k?void 0:k.value};E&&E(s)},validationSchema:A},(function(){var e,t,a,c,n,l;return r.a.createElement(we.c,null,r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-xl-6 mb-8"},r.a.createElement(b.c,{className:"h-100"},r.a.createElement(b.d,null,r.a.createElement("div",{className:"form-group row align-items-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h4",{className:" text-dark font-weight-bold mb-2"},r.a.createElement(S.a,{id:"ORDER.PRODUCT_INFO"}))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(w.a,{placeholder:h.formatMessage({id:"GLOBAL.SEARCH.PLACEHOLER_INPUT"}),options:H,onInputChange:K,onChange:J}))),r.a.createElement(le.a,{className:"mb-9"}),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.CODE"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"form-control bg-light"},null===(e=C.productSelected)||void 0===e?void 0:e.value))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.NAME"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"form-control bg-light product-detail-name"},null===(t=C.productSelected)||void 0===t?void 0:t.label))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.PRICE"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"form-control bg-light"},null===(a=C.productSelected)||void 0===a?void 0:a.price))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.QUANTITY"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement(we.b,{type:"number",min:"1",name:"quantity",component:Me.a,placeholder:h.formatMessage({id:"GLOBAL.PLACEHOLER.INPUT"})}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.FORMALITY"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement(w.a,{defaultValue:y[0],options:y,onChange:Y}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.PROPERTIES"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement(we.b,{name:"property",component:Me.a,placeholder:h.formatMessage({id:"GLOBAL.PLACEHOLER.INPUT"})}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.TAX_PERCENT"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement(w.a,{placeholder:h.formatMessage({id:"GLOBAL.PLACEHOLER.SELECT"}),defaultValue:W[0],options:W,onChange:z}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.NOTE_PRODUCT"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement(we.b,{name:"noteProduct",component:Me.a,placeholder:h.formatMessage({id:"GLOBAL.PLACEHOLER.INPUT"})}))),r.a.createElement(le.a,{className:"mb-9"}),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.SHIPMENT_METHOD"}))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(w.a,{placeholder:h.formatMessage({id:"GLOBAL.PLACEHOLER.SELECT"}),defaultValue:X[0],options:X,onChange:te}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.NOTE_ORDER"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement(we.b,{name:"noteOrder",component:Me.a,placeholder:h.formatMessage({id:"GLOBAL.PLACEHOLER.INPUT"})})))))),r.a.createElement("div",{className:"col-xl-6"},r.a.createElement(b.c,null,r.a.createElement(b.d,null,r.a.createElement("div",{className:"form-group row  align-items-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h4",{className:" text-dark font-weight-bold mb-2"},r.a.createElement(S.a,{id:"ORDER.CUSTOMER_INFO"}))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(w.a,{placeholder:h.formatMessage({id:"GLOBAL.SEARCH.PLACEHOLER_INPUT"}),options:Q,onInputChange:Z,onChange:ee}))),r.a.createElement(le.a,{className:"mb-9"}),r.a.createElement("div",{className:"form-group row  align-items-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h4",{className:" text-dark font-weight-bold mb-2"},r.a.createElement(S.a,{id:"ORDER.CONSIGNEE_INFO"}))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(w.a,{placeholder:h.formatMessage({id:"GLOBAL.PLACEHOLER.SELECT"}),value:C.shipmentInfoSelected,options:ae,onChange:ce,isDisabled:G}))),r.a.createElement(le.a,{className:"mb-9"}),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.CONSIGNEE"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"form-control bg-light"},(null===(c=C.shipmentInfoSelected)||void 0===c?void 0:c.label)||""))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.ADDRESS"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"form-control bg-light"},(null===(n=C.shipmentInfoSelected)||void 0===n?void 0:n.address)||""))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",null,r.a.createElement(S.a,{id:"ORDER.TEL"}))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"form-control bg-light"},(null===(l=C.shipmentInfoSelected)||void 0===l?void 0:l.tel)||""))))))))})),r.a.createElement(o.a,{when:ne,message:h.formatMessage({id:"GLOBAL.MESSAGE.FILLED_OUT"})}))};var We=Object(p.c)(Object(i.b)(null,null)((function(e){var t=e.intl,a=Object(o.h)(),n=Object(i.d)(),s=Object(l.useRef)(null),d=Object(i.e)((function(e){var t=e.order,a=e.product,c=e.auth;return{isActionLoadingOrder:t.list.isActionLoading,isLoadingProduct:a.list.loading,isLoadingUser:c.isLoading,isLoadingShipment:t.shipmentInfo.isLoading}}),i.c),E=d.isActionLoadingOrder,p=d.isLoadingProduct,b=d.isLoadingUser,f=d.isLoadingShipment,O=Object(l.useState)(!0),h=Object(m.a)(O,2),v=h[0],g=h[1],N=Object(l.useState)(!1),L=Object(m.a)(N,2),R=L[0],T=L[1],j=E||p||b||f;return r.a.createElement(r.a.Fragment,null,j&&r.a.createElement(u.a,null),r.a.createElement(C.a,{title:t.formatMessage({id:"ORDER.WHOLESALE.NEW.TITLE"})},r.a.createElement(X.a,{type:"button",onClick:function(){return a.goBack()},className:"btn btn-light"},r.a.createElement("i",{className:"fa fa-arrow-left"}),r.a.createElement(S.a,{id:"GLOBAL.BUTTON.BACK"})),"  ",r.a.createElement(X.a,{style:{width:"100px"},type:"submit",className:"btn btn-primary ml-2",onClick:function(){s.current&&s.current.handleSubmit()},disabled:v},r.a.createElement(S.a,{id:"GLOBAL.BUTTON.CREATE_ORDER"}))),r.a.createElement("div",{className:"px-8 pb-8"},r.a.createElement(He,{intl:t,onSearchProduct:function(e){var t=e.value,a=e.type,c={search:t,searchFields:"".concat(a,":like")};n(Object(Ge.h)(c))},onSearchCustomer:function(e){var t=e.value,a=e.type,c={search:t,searchFields:"".concat(a,":like")};n(Object(ae.f)(c))},onSubmitNew:function(e){var l={product_id:e.productId,price:e.price,quantity:e.quantity,link:"",tax_percent:e.tax,note:e.noteProduct,is_box:e.box},r={shipment_method_id:e.shipmentMethodId,shipment_infor_id:e.shipmentInfoId,customer_id:e.customer_id,type:"wholesale",note:e.noteOrder,item:JSON.stringify(l)};e.shipmentMethodId?e.shipmentInfoId?e.price<=0?c.b.warning(t.formatMessage({id:"ORDER.CREATE.WHOLESALE.WARNING3"})):n(Object(I.a)(r)).then((function(e){e.type.includes("fulfilled")?(c.b.success(t.formatMessage({id:"ORDER.CREATE.WHOLESALE.SUCCESS"})),T(!0),a.push("/ban-hang/don-si/".concat(e.payload.id,"/chi-tiet"))):(T(!1),c.b.error(t.formatMessage({id:"ORDER.CREATE.WHOLESALE.FAIL"})))})):c.b.warning(t.formatMessage({id:"ORDER.CREATE.WHOLESALE.WARNING2"})):c.b.warning(t.formatMessage({id:"ORDER.CREATE.WHOLESALE.WARNING1"}))},btnRef:s,onSelectProduct:function(){return g(!1)},isSuccessNew:R})))})));function Ve(){var e=Object(o.k)(),t=Object(i.e)((function(e){return e.auth.user})).role,a=null===t||void 0===t?void 0:t.includes(n.a.SALE),l=(null===t||void 0===t?void 0:t.includes(n.a.ADMIN))||(null===t||void 0===t?void 0:t.includes(n.a.ROOT));return a||l?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,null),r.a.createElement(o.e,null,r.a.createElement(o.b,{exact:!0,from:e.url,to:"".concat(e.url,"/don-le")}),r.a.createElement(o.c,{path:"".concat(e.url,"/:id/chi-tiet"),component:Fe.a}),r.a.createElement(o.c,{path:"".concat(e.url,"/don-si/:id/chi-tiet"),component:Fe.a}),r.a.createElement(o.c,{path:"".concat(e.url,"/don-si/tao-moi"),component:We}),r.a.createElement(o.c,{path:"".concat(e.url,"/don-si"),component:Pe}),r.a.createElement(o.c,{path:"".concat(e.url,"/don-le/:id/chi-tiet"),component:se}),r.a.createElement(o.c,{path:"".concat(e.url,"/don-le"),component:oe}),r.a.createElement(o.c,{path:"".concat(e.url,"/don-dau-gia/:id/chi-tiet"),component:$}),r.a.createElement(o.c,{path:"".concat(e.url,"/don-dau-gia"),component:k}),r.a.createElement(o.c,{path:"".concat(e.url,"/don-thanh-toan-ho/:id/chi-tiet"),component:te.a}),r.a.createElement(o.c,{path:"".concat(e.url,"/don-thanh-toan-ho/tao-moi"),component:re}),r.a.createElement(o.c,{path:"".concat(e.url,"/don-thanh-toan-ho"),component:ee}),r.a.createElement(o.c,{path:"".concat(e.url,"/don-van-chuyen-ho/:id/chi-tiet"),component:Ce}),r.a.createElement(o.c,{path:"".concat(e.url,"/don-van-chuyen-ho/tao-moi"),component:ke}),r.a.createElement(o.c,{path:"".concat(e.url,"/don-van-chuyen-ho"),component:me}),r.a.createElement(o.c,{component:s.a}))):r.a.createElement(o.b,{to:"/dashboard"})}}}]);
//# sourceMappingURL=12.d39cc98c.chunk.js.map